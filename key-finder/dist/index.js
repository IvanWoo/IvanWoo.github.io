var ir="production";function Be(t,e,n,i){var s=arguments.length,c=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(t,e,n,i);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(c=(s<3?r(c):s>3?r(e,n,c):r(e,n))||c);return s>3&&c&&Object.defineProperty(e,n,c),c}var Le=(t,e={})=>{let n=Reflect.ownKeys(t),i=Reflect.ownKeys(e),s=Symbol("isa");function c(r){for(let o of n){let a=Object.getOwnPropertyDescriptor(r.prototype,o);!a||a.configurable?Object.defineProperty(r.prototype,o,{value:t[o],writable:!0}):console.log(`not patching: ${r.name}.${o.toString()}`)}return Object.defineProperty(r.prototype,s,{value:!0}),r}for(let r of i)Object.defineProperty(c,r,{value:e[r],enumerable:e.propertyIsEnumerable(r)});return Object.defineProperty(c,Symbol.hasInstance,{value:r=>!!r[s]}),c};var _e=(t,e=n=>n!==void 0?": "+n:"")=>class extends Error{constructor(n){super(t(n)+e(n))}};var U=Array.isArray;var re=t=>typeof t=="string";var On=Le({addWatch(t,e){return this._watches=this._watches||{},this._watches[t]?!1:(this._watches[t]=e,!0)},removeWatch(t){if(!!this._watches)return this._watches[t]?(delete this._watches[t],!0):!1},notifyWatches(t,e){if(!this._watches)return;let n=this._watches;for(let i in n)n[i](i,t,e)}}),Nn=t=>t&&(t instanceof Float32Array||t instanceof Float64Array||t instanceof Uint32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Int8Array||t instanceof Uint16Array||t instanceof Int16Array||t instanceof Uint8ClampedArray),Dn=_e(()=>"illegal state"),Fn=t=>{throw new Dn(t)},Ve=t=>U(t)?t:re(t)?t.length>0?t.split("."):[]:t!=null?[t]:[],or=t=>ze(t);function ze(t){let e=Ve(t),[n,i,s,c]=e;switch(e.length){case 0:return r=>r;case 1:return r=>r!=null?r[n]:void 0;case 2:return r=>r!=null&&(r=r[n])!=null?r[i]:void 0;case 3:return r=>r!=null&&(r=r[n])!=null&&(r=r[i])!=null?r[s]:void 0;case 4:return r=>r!=null&&(r=r[n])!=null&&(r=r[i])!=null&&(r=r[s])!=null?r[c]:void 0;default:return r=>{let o=e.length-1,a=r;for(let u=0;a!=null&&u<=o;u++)a=a[e[u]];return a}}}var sr=t=>ke(t);function ke(t){let e=Ve(t),[n,i,s,c]=e;switch(e.length){case 0:return(o,a)=>a;case 1:return(o,a)=>(o=ne(o),o[n]=a,o);case 2:return(o,a)=>{let u;return o=ne(o),o[n]=u=ne(o[n]),u[i]=a,o};case 3:return(o,a)=>{let u,l;return o=ne(o),o[n]=u=ne(o[n]),u[i]=l=ne(u[i]),l[s]=a,o};case 4:return(o,a)=>{let u,l,h;return o=ne(o),o[n]=u=ne(o[n]),u[i]=l=ne(u[i]),l[s]=h=ne(l[s]),h[c]=a,o};default:let r;for(let o=e.length;--o>=0;)r=jn(e[o],r);return r}}var ne=t=>U(t)||Nn(t)?t.slice():Object.assign({},t),jn=(t,e)=>(n,i)=>(n=ne(n),n[t]=e?e(n[t],i):i,n),xe=(t,e,n,...i)=>Rn(t,e,n,...i);function Rn(t,e,n,...i){return ke(e)(t,n.apply(null,(i.unshift(ze(e)(t)),i)))}var qe=(t,e,n)=>ke(e)(t,n),me=class{constructor(e,n){n&&!n(e)&&Fn("initial state value did not validate"),this._value=e,this.valid=n}get value(){return this._value}set value(e){this.reset(e)}deref(){return this._value}equiv(e){return this===e}reset(e){let n=this._value;return this.valid&&!this.valid(e)?n:(this._value=e,this.notifyWatches(n,e),e)}resetIn(e,n){return this.reset(qe(this._value,e,n))}resetInUnsafe(e,n){return this.reset(qe(this._value,e,n))}swap(e,...n){return this.reset(e.apply(null,[this._value,...n]))}swapIn(e,n,...i){return this.reset(xe(this._value,e,n,...i))}swapInUnsafe(e,n,...i){return this.reset(xe(this._value,e,n,...i))}addWatch(e,n){}removeWatch(e){}notifyWatches(e,n){}release(){return delete this._watches,delete this._value,!0}};me=Be([On],me);var ar=Object.getPrototypeOf({}),$e="function",cr="string",K=(t,e)=>{let n;if(t===e)return!0;if(t!=null){if(typeof t.equiv===$e)return t.equiv(e)}else return t==e;if(e!=null){if(typeof e.equiv===$e)return e.equiv(t)}else return t==e;return typeof t===cr||typeof e===cr?!1:(n=Object.getPrototypeOf(t),(n==null||n===ar)&&(n=Object.getPrototypeOf(e),n==null||n===ar)?Ft(t,e):typeof t!==$e&&t.length!==void 0&&typeof e!==$e&&e.length!==void 0?Ot(t,e):t instanceof Set&&e instanceof Set?Nt(t,e):t instanceof Map&&e instanceof Map?Dt(t,e):t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():t instanceof RegExp&&e instanceof RegExp?t.toString()===e.toString():t!==t&&e!==e)},Ot=(t,e,n=K)=>{let i=t.length;if(i===e.length)for(;--i>=0&&n(t[i],e[i]););return i<0},Nt=(t,e,n=K)=>t.size===e.size&&n([...t.keys()].sort(),[...e.keys()].sort()),Dt=(t,e,n=K)=>t.size===e.size&&n([...t].sort(),[...e].sort()),Ft=(t,e,n=K)=>{if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let i in t)if(!e.hasOwnProperty(i)||!n(t[i],e[i]))return!1;return!0};var Pn=0,Gn=()=>Pn++;function jt(t,e,n,i,s){return new ur(t,e,n,i,s)}var ur=class{constructor(e,n,i,s=!0,c=K){this.parent=e,this.id=`view-${Gn()}`,this.tx=i||(a=>a),this.path=Ve(n),this.isDirty=!0,this.isLazy=s;let r=or(this.path),o=this.parent.deref();this.unprocessed=o?r(o):void 0,s||(this.state=this.tx(this.unprocessed),this.unprocessed=void 0),e.addWatch(this.id,(a,u,l)=>{let h=u&&r(u),d=l&&r(l);c(d,h)||(s?this.unprocessed=d:this.state=this.tx(d),this.isDirty=!0)})}get value(){return this.deref()}deref(){return this.isDirty&&(this.isLazy&&(this.state=this.tx(this.unprocessed),this.unprocessed=void 0),this.isDirty=!1),this.state}changed(){return this.isDirty}view(){return this.isDirty&&this.isLazy?this.tx(this.unprocessed):this.state}release(){return this.unprocessed=void 0,this.isLazy||(this.state=this.tx(void 0)),this.isDirty=!0,this.parent.removeWatch(this.id)}};var de=Symbol(),Ce=()=>{},lr="*";var Oe=t=>typeof t=="function";var Un=_e(()=>"illegal argument(s)"),ae=t=>{throw new Un(t)};var oe=(t,e)=>t!=null&&typeof t[e]=="function";var Hn=t=>t!=null&&typeof t.deref=="function",We=t=>Hn(t)?t.deref():t,fr=t=>t!=null&&typeof t!="string"&&typeof t[Symbol.iterator]=="function",hr=Object.getPrototypeOf,Bn=t=>{let e;return t!=null&&typeof t=="object"&&((e=hr(t))===null||hr(e)===null)},Ye,Ke,Ln=[],Vn=[],zn=t=>Ye&&Ye.length>=t?Ye:Ye=new Int32Array(t),qn=t=>Ke&&Ke.length>=t?Ke:Ke=new Int32Array(t),mr=(t,e,n,i,s)=>{let c=e.length,r=t.linear;if(t.distance=c,s!=="only-distance"){for(let o=0,a=0;o<c;o++,a+=3)r[a]=i,r[a+1]=o,r[a+2]=e[o];if(s==="full"){let o=t[n];for(let a=0;a<c;a++)o[a]=e[a]}}return t},Yn=(t,e,n="full",i=K)=>{let s={distance:0,adds:{},dels:{},const:{},linear:[]};if(t===e||t==null&&e==null)return s;if(t==null||t.length===0)return mr(s,e,"adds",1,n);if(e==null||e.length===0)return mr(s,t,"dels",-1,n);let c=t.length>=e.length,r,o,a,u;c?(r=e,o=t):(r=t,o=e),a=r.length,u=o.length;let l=a+1,h=u-a,d=h+l,p=a+u+3,_=qn(p).fill(-1,0,p),T=zn(p).fill(-1,0,p),S=Ln,v=Vn,y=(R,P,ee)=>{let X,z;P>ee?(X=_[R-1],z=P):(X=_[R+1],z=ee);let f=z-(R-l);for(;f<a&&z<u&&i(r[f],o[z]);)f++,z++;_[R]=v.length/3,v.push(f,z,X),T[R]=z},w=-1,M;do{for(w++,M=-w+l;M<d;M++)y(M,T[M-1]+1,T[M+1]);for(M=d+w;M>d;M--)y(M,T[M-1]+1,T[M+1]);y(d,T[d-1]+1,T[d+1])}while(T[d]!==u);if(s.distance=h+2*w,n!=="only-distance"){for(w=_[d]*3;w>=0;)S.push(w),w=v[w+2]*3;n==="full"?$n(S,v,s,r,o,c):Wn(S,v,s,r,o,c,n==="only-distance-linear")}return S.length=0,v.length=0,s},$n=(t,e,n,i,s,c)=>{let r=n.linear,o=n.const,a=t.length,u=0,l=0,h,d,p,_;for(c?(h=n.dels,d=n.adds,p=-1,_=1):(h=n.adds,d=n.dels,p=1,_=-1);--a>=0;){let T=t[a],S=e[T],v=e[T+1],y=v-S;for(;u<S||l<v;){let w=l-u;y>w?(r.push(p,l,h[l]=s[l]),l++):y<w?(r.push(_,u,d[u]=i[u]),u++):(r.push(0,u,o[u]=i[u]),u++,l++)}}},Wn=(t,e,n,i,s,c,r)=>{let o=n.linear,a=c?-1:1,u=c?1:-1,l=t.length,h=0,d=0;for(;--l>=0;){let p=t[l],_=e[p],T=e[p+1],S=T-_;for(;h<_||d<T;){let v=d-h;S>v?(o.push(a,d,s[d]),d++):S<v?(o.push(u,h,i[h]),h++):(r&&o.push(0,h,i[h]),h++,d++)}}},Xn=(t,e,n="full",i=K)=>t===e?{distance:0}:n==="only-distance"?Kn(t,e,i):Jn(t,e,i),Kn=(t,e,n)=>{t||(t={}),e||(e={});let i=0;for(let s in t){let c=e[s];(c===void 0||!n(t[s],c))&&i++}for(let s in e)!(s in t)&&i++;return{distance:i}},Jn=(t,e,n)=>{t||(t={}),e||(e={});let i=0,s=[],c=[],r=[];for(let o in t){let a=e[o];a===void 0?(c.push(o),i++):n(t[o],a)||(r.push(o,a),i++)}for(let o in e)o in t||(s.push(o),i++);return{distance:i,adds:s,dels:c,edits:r}},Je=Array.isArray,Qn=Math.max,dr=Object.getPrototypeOf({}),Xe="function",Qe="string",pr=(()=>{let t=new Array(2048);for(let e=2,n=t.length;e<n;e++)t[e]=e-2;return t})(),Zn=t=>{if(t<=pr.length)return pr.slice(0,t);let e=new Array(t);for(;--t>=2;)e[t]=t-2;return e},gr=(t,e,n,i,s,c=0)=>{let r=s[1];if(r.__skip)return;if(r.__diff===!1){Ne(i),e.replaceChild(t,n,c,s);return}let o=i[1];if(o&&o.__skip){e.replaceChild(t,n,c,s,!1);return}let a=r.__impl;if(a&&a!==e)return a.diffTree(t,a,n,i,s,c);let u=Yn(i,s,"only-distance-linear",De);if(u.distance===0)return;let l=u.linear,h=e.getChild(n,c),d,p,_;if(l[0]!==0||i[1].key!==r.key){Ne(i),e.replaceChild(t,n,c,s);return}if((_=i.__release)&&_!==s.__release&&Ne(i),l[3]!==0&&(ri(e,h,i[1],s[1]),u.distance===2))return;let T=l.length,S=i.length-1,v=ni(l),y=Zn(S+1);for(d=6;d<T;d+=3)p=l[d],!!p&&(p===-1?ei(t,e,h,i,s,l,d,v,y,S):ti(t,e,h,l,d,v,y,S));(_=s.__init)&&_!=i.__init&&_.apply(s,[h,...s.__args])},ei=(t,e,n,i,s,c,r,o,a,u)=>{let l=c[r+2];if(Je(l)){let h=l[1].key;if(h!==void 0&&o[h][2]!==void 0){let d=o[h];h=d[0],gr(t,e,n,i[h],s[d[2]],a[h])}else{let d=c[r+1];Ne(l),e.removeChild(n,a[d]),ii(a,u,d)}}else typeof l===Qe&&e.setContent(n,"")},ti=(t,e,n,i,s,c,r,o)=>{let a=i[s+2];if(typeof a===Qe)e.setContent(n,a);else if(Je(a)){let u=a[1].key;if(u===void 0||c[u][0]===void 0){let l=i[s+1];e.createTree(t,n,a,r[l]),oi(r,o,l)}}},ii=(t,e,n)=>{for(;e>n;e--)t[e]=Qn(t[e]-1,0)},oi=(t,e,n)=>{for(;e>=n;e--)t[e]++},ri=(t,e,n,i)=>{let s=Xn(n,i,"full",K);t.removeAttribs(e,s.dels,n);let c=de,r,o,a;for(a=s.edits,r=a.length;(r-=2)>=0;)o=a[r],o[0]==="o"&&o[1]==="n"&&t.removeAttribs(e,[o],n),o!=="value"?t.setAttrib(e,o,a[r+1],i):c=a[r+1];for(a=s.adds,r=a.length;--r>=0;)o=a[r],o!=="value"?t.setAttrib(e,o,i[o],i):c=i[o];c!==de&&t.setAttrib(e,"value",c,i)},Ne=t=>{if(Je(t)){let e;if((e=t[1])&&e.__release===!1)return;for(t.__release&&(t.__release.apply(t.__this,t.__args),delete t.__release),e=t.length;--e>=2;)Ne(t[e])}},ni=t=>{let e,n,i,s={};for(let c=t.length;(c-=3)>=0;)n=t[c+2],Je(n)&&(e=n[1].key)!==void 0&&(i=s[e],!i&&(s[e]=i=[,,]),i[t[c]+1]=t[c+1]);return s},De=(t,e)=>{let n;if(t===e)return!0;if(t!=null){if(typeof t.equiv===Xe)return t.equiv(e)}else return t==e;if(e!=null){if(typeof e.equiv===Xe)return e.equiv(t)}else return t==e;return typeof t===Qe||typeof e===Qe?!1:(n=Object.getPrototypeOf(t),(n==null||n===dr)&&(n=Object.getPrototypeOf(e),n==null||n===dr)?!(t.__diff===!1||e.__diff===!1)&&Ft(t,e,De):typeof t!==Xe&&t.length!==void 0&&typeof e!==Xe&&e.length!==void 0?Ot(t,e,De):t instanceof Set&&e instanceof Set?Nt(t,e,De):t instanceof Map&&e instanceof Map?Dt(t,e,De):t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():t instanceof RegExp&&e instanceof RegExp?t.toString()===e.toString():t!==t&&e!==e)},si={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"},ai=/^([^\s\.#]+)(?:#([^\s\.#]+))?(?:\.([^\s#]+))?$/,Ea=new RegExp(`[${Object.keys(si).join("")}]`,"g"),ci={button:1,option:1,script:1,style:1,text:1,textarea:1,title:1},Rt=t=>t.split(" ").reduce((e,n)=>(e[n]=!0,e),{}),ui=Rt("animate animateColor animateMotion animateTransform circle clipPath color-profile defs desc discard ellipse feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feDropShadow feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence filter font foreignObject g image line linearGradient marker mask metadata mpath path pattern polygon polyline radialGradient rect set stop style svg switch symbol text textPath title tref tspan use view"),Sa=Rt("area base br col command embed hr img input keygen link meta param source stop track use wbr ?xml"),Ia=Rt("animate circle ellipse line path polygon polyline rect"),yr=(t,e)=>{if(e=We(e),e==null)return t;if(re(e))return t+" "+e;let n=new Set(t.split(" "));for(let i in e)We(e[i])?n.add(i):n.delete(i);return[...n].join(" ")},li=(t,e,n)=>{e&&(t.id=e);let i=We(t.class);return n?(n=n.replace(/\./g," "),t.class=i?yr(n,i):n):i&&(t.class=re(i)?i:yr("",i)),t},fi=t=>{let e="",n;for(let i in t)n=We(t[i]),Oe(n)&&(n=n(t)),n!=null&&(e+=`${i}:${n};`);return e},hi=(t,e)=>{if(t==null||!e||!e.length)return t;let n=Object.assign({},t);for(let i of e){let s=n[i];oe(s,"deref")&&(n[i]=s.deref())}return n},mi=t=>Object.keys(t).reduce((e,n)=>(e.push(`${n}: ${t[n]}`),e),[]).join(" "),di="http://www.w3.org/2000/svg",Ze=U,br=fr,_r=re,vr=(t,e)=>e.__init&&e.__init.apply(e.__this,[t,...e.__args]),et=(t,e,n,i,s,c=!0)=>{if(Ze(i)){let r=i[0];if(typeof r=="function")return et(t,e,n,r.apply(null,[t.ctx,...i.slice(1)]),s);let o=i[1];if(o.__impl)return o.__impl.createTree(t,n,i,s,c);let a=e.createElement(n,r,o,s);if(i.length>2){let u=i.length;for(let l=2;l<u;l++)et(t,e,a,i[l],void 0,c)}return c&&vr(a,i),a}if(br(i)){let r=[];for(let o of i)r.push(et(t,e,n,o,s,c));return r}return i==null?n:e.createTextElement(n,i)},tt=(t,e,n,i,s=0)=>{if(Ze(i)){let c=e.getChild(n,s);typeof i[0]=="function"&&tt(t,e,n,i[0].apply(null,[t.ctx,...i.slice(1)]),s);let r=i[1];if(r.__impl)return r.__impl.hydrateTree(t,n,i,s);vr(c,i);for(let o in r)o[0]==="o"&&o[1]==="n"&&e.setAttrib(c,o,r[o]);for(let o=i.length,a=2;a<o;a++)tt(t,e,c,i[a],a-2)}else if(br(i))for(let c of i)tt(t,e,n,c,s),s++},gi=(t,e,n,i)=>{let s=ui[e]?document.createElementNS(di,e):document.createElement(e);return n&&pi(s,n),Er(t,s,i)},yi=(t,e,n)=>Er(t,document.createTextNode(e),n),Er=(t,e,n)=>t?n===void 0?t.appendChild(e):t.insertBefore(e,t.children[n]):e,bi=(t,e)=>t.children[e],_i=(t,e,n,i,s,c=!0)=>(e.removeChild(n,i),e.createTree(t,n,s,i,c)),vi=(t,e)=>t.textContent=e,pi=(t,e)=>{for(let n in e)Sr(t,n,e[n],e);return t},Sr=(t,e,n,i)=>{if(e.startsWith("__"))return;let s=e[0]==="o"&&e[1]==="n";if(!s&&typeof n=="function"&&(n=n(i)),n!==void 0&&n!==!1)switch(e){case"style":Si(t,n);break;case"value":Ei(t,n);break;case"prefix":t.setAttribute(e,_r(n)?n:mi(n));break;case"accesskey":t.accessKey=n;break;case"contenteditable":t.contentEditable=n;break;case"tabindex":t.tabIndex=n;break;case"align":case"autocapitalize":case"checked":case"dir":case"draggable":case"hidden":case"id":case"lang":case"namespaceURI":case"scrollTop":case"scrollLeft":case"title":t[e]=n;break;default:s?Ii(t,e.substr(2),n):t.setAttribute(e,n===!0?"":n)}else t[e]!=null?t[e]=null:t.removeAttribute(e);return t},Ei=(t,e)=>{let n;switch(t.type){case"text":case"textarea":case"password":case"search":case"number":case"email":case"url":case"tel":case"date":case"datetime-local":case"time":case"week":case"month":if((n=t.value)!==void 0&&typeof e=="string"){let i=e.length-(n.length-(t.selectionStart||0));t.value=e,t.selectionStart=t.selectionEnd=i;break}default:t.value=e}},Mi=(t,e,n)=>{for(let i=e.length;--i>=0;){let s=e[i];s[0]==="o"&&s[1]==="n"?wi(t,s.substr(2),n[s]):t.hasAttribute(s)?t.removeAttribute(s):t[s]=null}},Si=(t,e)=>(t.setAttribute("style",fi(e)),t),Ii=(t,e,n)=>_r(n)?t.setAttribute("on"+e,n):Ze(n)?t.addEventListener(e,...n):t.addEventListener(e,n),wi=(t,e,n)=>Ze(n)?t.removeEventListener(e,...n):t.removeEventListener(e,n),Ti=(t,e)=>{let n=t.children[e];n!==void 0&&t.removeChild(n)},rt=U,Ai=fr,ki=Bn,xi=(t,e)=>{let n=t[0],i=ki(t[1]),s,c,r;return(typeof n!="string"||!(s=ai.exec(n)))&&ae(`${n} is not a valid tag name`),c=s[1],n===c&&i&&(!e||t[1].key)?t:(r=li(i?Object.assign({},t[1]):{},s[2],s[3]),r.__skip&&t.length<3?[c,r]:[c,r,...t.slice(i?2:1)])},Ci=(t,e)=>ce(e,t,t.ctx,[0],t.keys!==!1,t.span!==!1),ce=(t,e,n,i,s,c)=>{if(t!=null){if(rt(t)){if(t.length===0)return;let r,o=t[1],a;if(o&&(a=o.__impl)&&(a=a.normalizeTree))return a(e,t);let u=t[0];if(typeof u=="function")return ce(u.apply(null,[n,...t.slice(1)]),e,n,i,s,c);if(typeof u.render=="function"){let l=[n,...t.slice(1)];return r=ce(u.render.apply(u,l),e,n,i,s,c),rt(r)&&(r.__this=u,r.__init=u.init,r.__release=u.release,r.__args=l),r}return r=xi(t,s),o=r[1],o.__normalize===!1?r:(s&&o.key===void 0&&(o.key=i.join("-")),r.length>2?Oi(r,o,e,n,i,s,c):r)}return typeof t=="function"?ce(t(n),e,n,i,s,c):typeof t.toHiccup=="function"?ce(t.toHiccup(e.ctx),e,n,i,s,c):typeof t.deref=="function"?ce(t.deref(),e,n,i,s,c):c?["span",s?{key:i.join("-")}:{},t.toString()]:t.toString()}},Oi=(t,e,n,i,s,c,r)=>{let o=t[0],a=[o,e];r=r&&!ci[o];for(let u=2,l=2,h=0,d=t.length;u<d;u++){let p=t[u];if(p!=null){let _=rt(p);if(_&&rt(p[0])||!_&&Ai(p))for(let T of p)T=ce(T,n,i,s.concat(h),c,r),T!==void 0&&(a[l++]=T),h++;else p=ce(p,n,i,s.concat(h),c,r),p!==void 0&&(a[l++]=p),h++}}return a},Ni={createTree(t,e,n,i,s){return et(t,this,e,n,i,s)},hydrateTree(t,e,n,i){return tt(t,this,e,n,i)},diffTree(t,e,n,i,s){gr(t,this,e,n,i,s)},normalizeTree:Ci,getElementById(t){return document.getElementById(t)},getChild:bi,createElement:gi,createTextElement:yi,replaceChild(t,e,n,i,s){_i(t,this,e,n,i,s)},removeChild:Ti,setContent:vi,removeAttribs:Mi,setAttrib:Sr},Di=(t,e)=>re(t)?e.getElementById(t):t,Ir=(t,e={},n=Ni)=>{let i=Object.assign({root:"app"},e),s=[],c=!0,r=Di(i.root,n),o=()=>{if(c){i.ctx=hi(e.ctx,i.autoDerefKeys);let a=n.normalizeTree(i,t);a!=null&&(i.hydrate?(n.hydrateTree(i,r,a),i.hydrate=!1):n.diffTree(i,r,s,a),s=a),c&&requestAnimationFrame(o)}};return requestAnimationFrame(o),()=>c=!1};var Pt;(function(t){t[t.FINE=0]="FINE",t[t.DEBUG=1]="DEBUG",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.SEVERE=4]="SEVERE",t[t.NONE=5]="NONE"})(Pt||(Pt={}));var Fi=Object.freeze({level:Pt.NONE,fine(){},debug(){},info(){},warn(){},severe(){}}),ji=t=>t instanceof Promise,Pi=(t,e)=>Ri(t,e);function Ri(t,e){let n=ze(t),i=ke(t);return(s,...c)=>i(s,e.apply(null,(c.unshift(n(s)),c)))}var ue="--set-value",Gi="--update-value",Fe="--toggle-value",Gt="--cancel",Ui="--dispatch",Ut="--dispatch-async",$="--dispatch-now",Ht="--delay",Hi="--fetch",Q="--state",Bi="--redo",Li="--undo",ve=Fi,wr=class{constructor(e,n){this.handlers={},this.effects={},this.eventQueue=[],this.priorities=[],this.addBuiltIns(),e&&this.addHandlers(e),n&&this.addEffects(n)}addBuiltIns(){this.addEffects({[Ui]:[e=>this.dispatch(e),-999],[Ut]:[([e,n,i,s],c,r)=>{let o=this.effects[e];if(o){let a=o(n,c,r);ji(a)?a.then(u=>this.dispatch([i,u])).catch(u=>this.dispatch([s,u])):ve.warn("async effect did not return Promise")}else ve.warn(`skipping invalid async effect: ${e}`)},-999],[Ht]:[([e,n])=>new Promise(i=>setTimeout(()=>i(n),e)),1e3],[Hi]:[e=>fetch(e).then(n=>{if(!n.ok)throw new Error(n.statusText);return n}),1e3]})}addHandler(e,n){let i=this.interceptorsFromSpec(n);i.length>0?(this.handlers[e]&&(this.removeHandler(e),ve.warn(`overriding handler for ID: ${e}`)),this.handlers[e]=i):ae(`no handlers in spec for ID: ${e}`)}addHandlers(e){for(let n in e)this.addHandler(n,e[n])}addEffect(e,n,i=1){this.effects[e]&&(this.removeEffect(e),ve.warn(`overriding effect for ID: ${e}`)),this.effects[e]=n;let s=[e,i],c=this.priorities;for(let r=0;r<c.length;r++)if(s[1]<c[r][1]){c.splice(r,0,s);return}c.push(s)}addEffects(e){for(let n in e){let i=e[n];U(i)?this.addEffect(n,i[0],i[1]):this.addEffect(n,i)}}instrumentWith(e,n){let i=e.map(Mr),s=this.handlers;for(let c of n||Object.keys(s)){let r=s[c];r&&(s[c]=i.concat(r))}}removeHandler(e){delete this.handlers[e]}removeHandlers(e){for(let n of e)this.removeHandler(n)}removeEffect(e){delete this.effects[e];let n=this.priorities;for(let i=n.length-1;i>=0;i--)if(e===n[i][0]){n.splice(i,1);return}}removeEffects(e){for(let n of e)this.removeEffect(n)}context(){return this.currCtx}dispatch(...e){this.eventQueue.push(...e)}dispatchNow(...e){(this.currQueue||this.eventQueue).push(...e)}dispatchLater(e,n=17){setTimeout(()=>this.dispatch(e),n)}processQueue(e){if(this.eventQueue.length>0){this.currQueue=[...this.eventQueue],this.eventQueue.length=0,e=this.currCtx=e||{};for(let n of this.currQueue)this.processEvent(e,n);return this.currQueue=this.currCtx=void 0,this.processEffects(e),!0}return!1}processEvent(e,n){let i=this.handlers[n[0]];if(!i){ve.warn(`missing handler for event type: ${n[0].toString()}`);return}!this.processForward(e,i,n)||this.processReverse(e,i,n)}processForward(e,n,i){let s=!1;for(let c=0,r=n.length;c<r&&!e[Gt];c++){let o=n[c];o.pre&&this.mergeEffects(e,o.pre(e[Q],i,this,e)),s=s||!!o.post}return s}processReverse(e,n,i){for(let s=n.length;--s>=0&&!e[Gt];){let c=n[s];c.post&&this.mergeEffects(e,c.post(e[Q],i,this,e))}}processEffects(e){let n=this.effects;for(let i of this.priorities){let s=i[0],c=e[s];c!==void 0&&this.processEffect(e,n,s,c)}}processEffect(e,n,i,s){let c=n[i];if(i!==Q)for(let r of s)c(r,this,e);else c(s,this,e)}mergeEffects(e,n){if(!!n)for(let i in n){let s=n[i];if(s!=null)if(i===Q||i===Gt)e[i]=s;else if(i===$)if(U(s[0]))for(let c of s)c&&this.dispatchNow(c);else this.dispatchNow(s);else if(e[i]||(e[i]=[]),U(s[0]))for(let c of s)c!==void 0&&e[i].push(c);else e[i].push(s)}}interceptorsFromSpec(e){return U(e)?e.map(Mr):Oe(e)?[{pre:e}]:[e]}},Bt=class extends wr{constructor(e,n,i){super(n,i);this.state=e||new me({})}deref(){return this.state.deref()}addBuiltIns(){super.addBuiltIns(),this.addHandlers({[ue]:(e,[n,[i,s]])=>({[Q]:qe(e,i,s)}),[Gi]:(e,[n,[i,s,...c]])=>({[Q]:xe(e,i,s,...c)}),[Fe]:(e,[n,i])=>({[Q]:xe(e,i,s=>!s)}),[Li]:Tr("undo"),[Bi]:Tr("redo")}),this.addEffects({[Q]:[e=>this.state.reset(e),-1e3]})}processQueue(e){if(this.eventQueue.length>0){let n=this.state.deref();this.currQueue=[...this.eventQueue],this.eventQueue.length=0,e=this.currCtx=Object.assign(Object.assign({},e),{[Q]:n});for(let i of this.currQueue)this.processEvent(e,i);return this.currQueue=this.currCtx=void 0,this.processEffects(e),this.state.deref()!==n}return!1}},Mr=t=>Oe(t)?{pre:t}:t,Tr=t=>(e,[n,i],s,c)=>{let r=i?i[0]:"history";if(oe(c[r],t)){let o=c[r][t]();return{[Q]:s.state.deref(),[$]:i?o!==void 0?i[1]:i[2]:void 0}}else ve.warn("no history in context")},Ar=(t,e)=>console.log("event:",e),kr=(t,e)=>{let n=sr(t);return(i,[s,c])=>({[Q]:n(i,e?e(c):c)})},xr=(t,e)=>{let n=Pi(t,e);return(i,[s,...c])=>({[Q]:n(i,...c)})};var Vi={},Ee=(()=>{try{return Vi.env.UMBRELLA_ASSERTS==="1"}catch(t){}return!1})()?(t,e="assertion failed")=>{if(typeof t=="function"&&!t()||!t)throw new Error(typeof e=="function"?e():e)}:Ce,zi=_e(()=>"illegal arity"),pe=t=>{throw new zi(t)};var Cr=(t,e)=>{if(!!t){for(let n=0,i=t.length,s;n<i;n++)if(s=t[n],s[0].call(s[1],e),e.canceled)return}},qi=Le({addListener(t,e,n){let i=(this._listeners=this._listeners||{})[t];return!i&&(i=this._listeners[t]=[]),this.__listener(i,e,n)===-1?(i.push([e,n]),!0):!1},removeListener(t,e,n){let i;if(!(i=this._listeners))return!1;let s=i[t];if(s){let c=this.__listener(s,e,n);if(c!==-1)return s.splice(c,1),!s.length&&delete i[t],!0}return!1},notify(t){let e;if(!(e=this._listeners))return!1;t.target===void 0&&(t.target=this),Cr(e[t.id],t),Cr(e[lr],t)},__listener(t,e,n){let i=t.length;for(;--i>=0;){let s=t[i];if(s[0]===e&&s[1]===n)break}return i}}),Se="route-changed",Lt=class{constructor(e){if(e.authenticator=e.authenticator||((n,i,s)=>({id:n.id,title:n.title,params:s})),e.prefix=e.prefix===void 0?"/":e.prefix,e.separator=e.separator||"/",this.config=e,Ee(this.routeForID(this.config.defaultRouteID)!==void 0,`missing config for default route: '${this.config.defaultRouteID}'`),e.initialRouteID){let n=this.routeForID(e.initialRouteID);Ee(n!==void 0,`missing config for initial route: ${this.config.initialRouteID}`),Ee(!$i(n),"initial route MUST not be parametric")}}addListener(e,n,i){}removeListener(e,n,i){}notify(e){}start(){if(this.config.initialRouteID){let e=this.routeForID(this.config.initialRouteID);this.current={id:e.id,title:e.title,params:{}},this.notify({id:Se,value:this.current})}}route(e){e.charAt(0)==="#"&&(e=e.substr(1)),e=e.substr(this.config.prefix.length);let n=this.matchRoutes(e);if(!n){if(!this.handleRouteFailure())return;let i=this.routeForID(this.config.defaultRouteID);n={id:i.id,title:i.title,params:{}}}return K(n,this.current)||(this.current=n,this.notify({id:Se,value:n})),n}format(...e){let[n,i,s]=e,c;switch(e.length){case 3:c={id:n,params:i};break;case 2:re(n)?c={id:n,params:i}:(s=i,c=n);break;case 1:c=re(n)?{id:n}:n;break;default:pe(e.length)}let r=this.routeForID(c.id);if(r){let o=c.params||{};return(s?"#":"")+this.config.prefix+r.match.map(a=>a.charAt(0)==="?"?(a=o[a.substr(1)])!=null?a:"NULL":a).join(this.config.separator)}else ae(`invalid route ID: ${c.id}`)}routeForID(e){return this.config.routes.find(n=>n.id===e)}matchRoutes(e){let n=this.config.routes,i=e.split(this.config.separator);for(let s=0,c=n.length;s<c;s++){let r=this.matchRoute(i,n[s]);if(r)return r}}matchRoute(e,n){let i=n.match,s=i.length;if(e.length===s){let c={};for(let r=0;r<s;r++){let o=i[r];if(o.charAt(0)==="?")c[o.substr(1)]=e[r];else if(e[r]!==o)return}return n.validate&&!this.validateRouteParams(c,n.validate)?void 0:n.auth?this.config.authenticator(n,e,c):{id:n.id,title:n.title,params:c}}}validateRouteParams(e,n){for(let i in n)if(e[i]!==void 0){let s=n[i];if(s.coerce&&(e[i]=s.coerce(e[i])),s.check&&!s.check(e[i]))return!1}return!0}handleRouteFailure(){return!0}};Lt=Be([qi],Lt);var $i=t=>t.match.some(e=>e.charAt(0)==="?"),Vt=class extends Lt{constructor(e){super(e);this.useFragment=e.useFragment!==!1,this.ignoreHashChange=!1}start(){if(window.addEventListener("popstate",this.handlePopChange()),this.useFragment&&window.addEventListener("hashchange",this.handleHashChange()),this.config.initialRouteID){let e=this.routeForID(this.config.initialRouteID);this.route(this.format({id:e.id,title:e.title}))}else this.route(this.useFragment?location.hash:location.pathname)}release(){window.removeEventListener("popstate",this.popHandler),this.useFragment&&window.removeEventListener("hashchange",this.hashHandler)}route(e,n=!0){let i=this.current,s=super.route(e);return s&&!K(s,i)&&(this.currentPath=this.format(s),n&&history.pushState(this.currentPath,s.title||window.document.title||"",this.currentPath)),s}routeTo(e){this.useFragment&&(location.hash=e),this.route(e)}format(...e){let n;switch(e.length){case 2:n={id:e[0],params:e[1]};break;case 1:n=re(e[0])?{id:e[0]}:e[0];break;default:pe(e.length)}return super.format(n,this.useFragment)}handlePopChange(){return this.popHandler=this.popHandler||(e=>{this.route(e.state||(this.useFragment?location.hash:location.pathname),!1)}).bind(this)}handleHashChange(){return this.hashHandler=this.hashHandler||(e=>{if(!this.ignoreHashChange){let n=e.newURL.substr(e.newURL.indexOf("#"));n!==this.currentPath&&this.route(n,!1)}}).bind(this)}handleRouteFailure(){return this.ignoreHashChange=!0,location.hash=this.format({id:this.routeForID(this.config.defaultRouteID).id}),this.ignoreHashChange=!1,!0}};var Wi=([t,e,n],i)=>["option",{value:t,disabled:!!n,selected:t===i},e],Or=(t,e,n,i)=>["select",e,...n.map(s=>Wi(s,i))],Nr=t=>{let e=Object.assign({element:"h1",attribs:{},subElement:"small",subAttribs:{}},t);return(n,i,s)=>[e.element,e.attribs,i,s?[e.subElement,e.subAttribs,s]:void 0]},Yi={anim:100,pad:1,margin:0,vertical:!1,bgOn:{fill:"#000"},bgOff:{fill:"#999"},fgOn:{fill:"#fff"},fgOff:{fill:"#fff"}},Dr=(t={})=>{let e=Object.assign(Object.assign({w:10,h:10},Yi),t),{w:n,h:i,pad:s,margin:c,vertical:r}=e,o=c*2,a=s+c,u=r?n+s*2:(n+s)*2,l=r?(i+s)*2:i+s*2,h={width:u+o,height:l+o},d={transition:`all ${e.anim}ms ease-out`},p=Object.assign(Object.assign({},e.bgOn),{width:u,height:l,x:c,y:c}),_=Object.assign(Object.assign({},p),e.bgOff),T=Object.assign(Object.assign(Object.assign({},r?{x:a,y:a}:{x:u+c-s-n,y:a}),e.fgOn),{style:d,width:n,height:i}),S=Object.assign(Object.assign(Object.assign({},T),r?{y:l+c-s-i}:{x:a}),e.fgOff);return(v,y,w)=>["svg",Object.assign(Object.assign({},h),y),["rect",w?p:_],["rect",w?T:S]]};var Ki=t=>t!=null&&typeof t!="function"&&t.length!==void 0,nt=t=>t!=null&&typeof t[Symbol.iterator]=="function",je=t=>oe(t,"xform")?t.xform():t,Ie=class{constructor(e){this.value=e}deref(){return this.value}},Ji=t=>new Ie(t),ge=t=>t instanceof Ie,Xi=t=>t instanceof Ie?t:new Ie(t),it=t=>t instanceof Ie?t.deref():t,Qi=t=>t.length===2?[void 0,t[1]]:t.length===3?[t[1],t[2]]:pe(t.length);function to(...t){let e=t[0],n=e[0],i=e[1],s=e[2];t=Qi(t);let c=t[0]==null?n():t[0],r=t[1];return it(i(oe(r,"$reduce")?r.$reduce(s,c):Ki(r)?Zi(s,c,r):eo(s,c,r)))}var Zi=(t,e,n)=>{for(let i=0,s=n.length;i<s;i++)if(e=t(e,n[i]),ge(e)){e=e.deref();break}return e},eo=(t,e,n)=>{for(let i of n)if(e=t(e,i),ge(e)){e=e.deref();break}return e},ro=(t,e)=>[t,n=>n,e];function B(t){return t?[...t]:ro(()=>[],(e,n)=>(e.push(n),e))}function*no(t,e){let n=je(t)(B()),i=n[1],s=n[2];for(let c of e){let r=s([],c);if(ge(r)){yield*it(i(r.deref()));return}r.length&&(yield*r)}yield*it(i([]))}function*zt(t,e){let n=je(t)([Ce,Ce,(i,s)=>s])[2];for(let i of e){let s=n(de,i);if(ge(s)){s=it(s.deref()),s!==de&&(yield s);return}s!==de&&(yield s)}}var Fr=(t,e,n=zt)=>{let i=e.length-1;return nt(e[i])?e.length>1?n(t.apply(null,e.slice(0,i)),e[i]):n(t(),e[0]):void 0},qt=(t,e)=>[t[0],t[1],e];function N(t,e){return nt(e)?zt(N(t),e):n=>{let i=n[2];return qt(n,(s,c)=>i(s,t(c)))}}function L(...t){return io(L,to,t)}var io=(t,e,n)=>{let i,s;switch(n.length){case 4:s=n[3],i=n[2];break;case 3:s=n[2];break;case 2:return N(c=>t(n[0],n[1],c));default:pe(n.length)}return e(je(n[0])(n[1]),i,s)},oo=t=>{let{1:e,2:n}=je(t)(B()),i=!1;return s=>{if(!i){let c=n([],s);return i=ge(c),i&&(c=e(c.deref())),c.length===1?c[0]:c.length>0?c:void 0}}};function jr(...t){let[e,n,i,s,c,r,o,a,u,l]=t;switch(t.length){case 0:pe(0);case 1:return e;case 2:return(...d)=>e(n(...d));case 3:return(...d)=>e(n(i(...d)));case 4:return(...d)=>e(n(i(s(...d))));case 5:return(...d)=>e(n(i(s(c(...d)))));case 6:return(...d)=>e(n(i(s(c(r(...d))))));case 7:return(...d)=>e(n(i(s(c(r(o(...d)))))));case 8:return(...d)=>e(n(i(s(c(r(o(a(...d))))))));case 9:return(...d)=>e(n(i(s(c(r(o(a(u(...d)))))))));case 10:default:let h=(...d)=>e(n(i(s(c(r(o(a(u(l(...d))))))))));return t.length===10?h:jr(h,...t.slice(10))}}function so(...t){let[e,n,i,s,c,r,o,a]=t;switch(t.length){case 1:return u=>[e(u)];case 2:return u=>[e(u),n(u)];case 3:return u=>[e(u),n(u),i(u)];case 4:return u=>[e(u),n(u),i(u),s(u)];case 5:return u=>[e(u),n(u),i(u),s(u),c(u)];case 6:return u=>[e(u),n(u),i(u),s(u),c(u),r(u)];case 7:return u=>[e(u),n(u),i(u),s(u),c(u),r(u),o(u)];case 8:return u=>[e(u),n(u),i(u),s(u),c(u),r(u),o(u),a(u)];default:return u=>{let l=new Array(t.length);for(let h=t.length;--h>=0;)l[h]=t[h](u);return l}}}function $t(t,e,n){return new Rr(t,e,n)}var Rr=class{constructor(e,n,i){e===void 0?(e=0,n=Infinity):n===void 0&&(n=e,e=0),i=i===void 0?e<n?1:-1:i,this.from=e,this.to=n,this.step=i}*[Symbol.iterator](){let{from:e,to:n,step:i}=this;if(i>0)for(;e<n;)yield e,e+=i;else if(i<0)for(;e>n;)yield e,e+=i}$reduce(e,n){let i=this.step;if(i>0)for(let s=this.from,c=this.to;s<c&&!ge(n);s+=i)n=e(n,s);else for(let s=this.from,c=this.to;s>c&&!ge(n);s+=i)n=e(n,s);return n}};function*Pr(...t){let e=t.map(n=>n[Symbol.iterator]());for(;;){let n=[];for(let i of e){let s=i.next();if(s.done)return;n.push(s.value)}yield n}}function ot(t,e){return nt(e)?zt(ot(t),e):n=>{let i=n[2];return qt(n,(s,c)=>t(c)?i(s,c):s)}}var ao=t=>((t==null||!t[Symbol.iterator])&&ae(`value is not iterable: ${t}`),t),co=t=>U(t)?t:[...ao(t)],Gr=1/4294967295,Ur=class{float(e=1){return this.int()*Gr*e}norm(e=1){return(this.int()*Gr-.5)*2*e}minmax(e,n){return this.float()*(n-e)+e}},Wt=Math.random,Hr=class extends Ur{int(){return Wt()*4294967296>>>0}float(e=1){return Wt()*e}norm(e=1){return(Wt()-.5)*2*e}},Br=new Hr,uo=(t,e,n=Br)=>{let i=t.length;Ee(i>0,"no choices given");let s=e?t.map((r,o)=>[e[o],r]).sort((r,o)=>o[0]-r[0]):t.map(r=>[1,r]),c=s.reduce((r,o)=>r+o[0],0);return c<=0&&console.warn("total weights <= 0"),()=>{let r=n.float(c),o=c;for(let a=0;a<i;a++)if(o-=s[a][0],o<=r)return s[a][1]}};function Re(...t){return t=t.map(je),jr.apply(null,t)}function we(t,e){return nt(e)?no(we(t),e):n=>{let i=n[2],s=t;return qt(n,(c,r)=>--s>0?i(c,r):s===0?Xi(i(c,r)):Ji(c))}}function lo(...t){return N(so.apply(null,t.map(oo)))}var fo=t=>{let e=Object.keys(t),[n,i,s]=e,[c,r,o]=e.map(a=>t[a]);switch(e.length){case 3:return a=>{let u={},l;return l=a[o],l!==void 0&&(u[s]=l),l=a[r],l!==void 0&&(u[i]=l),l=a[c],l!==void 0&&(u[n]=l),u};case 2:return a=>{let u={},l;return l=a[r],l!==void 0&&(u[i]=l),l=a[c],l!==void 0&&(u[n]=l),u};case 1:return a=>{let u={},l=a[c];return l!==void 0&&(u[n]=l),u};default:return a=>{let u,l,h={};for(let d=e.length-1;d>=0;d--)u=e[d],l=a[t[u]],l!==void 0&&(h[u]=l);return h}}};function Lr(...t){let e=t.length>2&&Fr(Lr,t);if(e)return e;let n=t[0];if(U(n)&&(n=n.reduce((i,s,c)=>(i[s]=c,i),{})),t[1]){let i=Object.keys(n);return N(s=>L(Re(N(c=>[c,s[n[c]]]),ot(c=>c[1]!==void 0)),t[1],i))}else return N(fo(n))}function st(...t){let e=Fr(st,t);if(e)return e;let[n,i]=t,s=Object.keys(n);return Re(lo.apply(null,s.map(c=>n[c])),Lr(s,i))}function*ho(t,e=Infinity){for(;e-- >0;)yield t()}var at=(t,e,n=Br)=>ho(e?uo(co(t),e,n):()=>t[n.float(t.length)|0]);function*Vr(t,e=Infinity){for(;e-- >0;)yield t}var J=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function V(t,e,n){return n={path:e,exports:{},require:function(i,s){return mo(i,s??n.path)}},t(n,n.exports),n.exports}function mo(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var po=V(function(t){(function(e){function n(){if(n.prototype._singleton)throw new Error("WebMidi is a singleton, it cannot be instantiated directly.");(n.prototype._singleton=this)._inputs=[],this._outputs=[],this._userHandlers={},this._stateChangeQueue=[],this._processingStateChange=!1,this._midiInterfaceEvents=["connected","disconnected"],this._nrpnBuffer=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]],this._nrpnEventsEnabled=!0,this._nrpnTypes=["entry","increment","decrement"],this._notes=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],this._semitones={C:0,D:2,E:4,F:5,G:7,A:9,B:11},Object.defineProperties(this,{MIDI_SYSTEM_MESSAGES:{value:{sysex:240,timecode:241,songposition:242,songselect:243,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1},writable:!1,enumerable:!0,configurable:!1},MIDI_CHANNEL_MESSAGES:{value:{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,channelmode:11,nrpn:11,programchange:12,channelaftertouch:13,pitchbend:14},writable:!1,enumerable:!0,configurable:!1},MIDI_REGISTERED_PARAMETER:{value:{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]},writable:!1,enumerable:!0,configurable:!1},MIDI_CONTROL_CHANGE_MESSAGES:{value:{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101},writable:!1,enumerable:!0,configurable:!1},MIDI_NRPN_MESSAGES:{value:{entrymsb:6,entrylsb:38,increment:96,decrement:97,paramlsb:98,parammsb:99,nullactiveparameter:127},writable:!1,enumerable:!0,configurable:!1},MIDI_CHANNEL_MODE_MESSAGES:{value:{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127},writable:!1,enumerable:!0,configurable:!1},octaveOffset:{value:0,writable:!0,enumerable:!0,configurable:!1}}),Object.defineProperties(this,{supported:{enumerable:!0,get:function(){return"requestMIDIAccess"in navigator}},enabled:{enumerable:!0,get:function(){return this.interface!==void 0}.bind(this)},inputs:{enumerable:!0,get:function(){return this._inputs}.bind(this)},outputs:{enumerable:!0,get:function(){return this._outputs}.bind(this)},sysexEnabled:{enumerable:!0,get:function(){return!(!this.interface||!this.interface.sysexEnabled)}.bind(this)},nrpnEventsEnabled:{enumerable:!0,get:function(){return!!this._nrpnEventsEnabled}.bind(this),set:function(r){return this._nrpnEventsEnabled=r,this._nrpnEventsEnabled}},nrpnTypes:{enumerable:!0,get:function(){return this._nrpnTypes}.bind(this)},time:{enumerable:!0,get:function(){return performance.now()}}})}var i=new n;function s(r){var o=this;this._userHandlers={channel:{},system:{}},this._midiInput=r,Object.defineProperties(this,{connection:{enumerable:!0,get:function(){return o._midiInput.connection}},id:{enumerable:!0,get:function(){return o._midiInput.id}},manufacturer:{enumerable:!0,get:function(){return o._midiInput.manufacturer}},name:{enumerable:!0,get:function(){return o._midiInput.name}},state:{enumerable:!0,get:function(){return o._midiInput.state}},type:{enumerable:!0,get:function(){return o._midiInput.type}}}),this._initializeUserHandlers(),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}function c(r){var o=this;this._midiOutput=r,Object.defineProperties(this,{connection:{enumerable:!0,get:function(){return o._midiOutput.connection}},id:{enumerable:!0,get:function(){return o._midiOutput.id}},manufacturer:{enumerable:!0,get:function(){return o._midiOutput.manufacturer}},name:{enumerable:!0,get:function(){return o._midiOutput.name}},state:{enumerable:!0,get:function(){return o._midiOutput.state}},type:{enumerable:!0,get:function(){return o._midiOutput.type}}})}n.prototype.enable=function(r,o){this.enabled||(this.supported?navigator.requestMIDIAccess({sysex:o}).then(function(a){var u,l=[],h=[];this.interface=a,this._resetInterfaceUserHandlers(),this.interface.onstatechange=function(v){l.push(v)};for(var d=a.inputs.values(),p=d.next();p&&!p.done;p=d.next())h.push(p.value.open());for(var _=a.outputs.values(),T=_.next();T&&!T.done;T=_.next())h.push(T.value.open());function S(){clearTimeout(u),this._updateInputsAndOutputs(),this.interface.onstatechange=this._onInterfaceStateChange.bind(this),typeof r=="function"&&r.call(this),l.forEach(function(v){this._onInterfaceStateChange(v)}.bind(this))}u=setTimeout(S.bind(this),200),Promise&&Promise.all(h).catch(function(v){}).then(S.bind(this))}.bind(this),function(a){typeof r=="function"&&r.call(this,a)}.bind(this)):typeof r=="function"&&r(new Error("The Web MIDI API is not supported by your browser.")))},n.prototype.disable=function(){if(!this.supported)throw new Error("The Web MIDI API is not supported by your browser.");this.enabled&&(this.removeListener(),this.inputs.forEach(function(r){r.removeListener()})),this.interface&&(this.interface.onstatechange=void 0),this.interface=void 0,this._inputs=[],this._outputs=[],this._nrpnEventsEnabled=!0,this._resetInterfaceUserHandlers()},n.prototype.addListener=function(r,o){if(!this.enabled)throw new Error("WebMidi must be enabled before adding event listeners.");if(typeof o!="function")throw new TypeError("The 'listener' parameter must be a function.");if(!(0<=this._midiInterfaceEvents.indexOf(r)))throw new TypeError("The specified event type is not supported.");return this._userHandlers[r].push(o),this},n.prototype.hasListener=function(r,o){if(!this.enabled)throw new Error("WebMidi must be enabled before checking event listeners.");if(typeof o!="function")throw new TypeError("The 'listener' parameter must be a function.");if(!(0<=this._midiInterfaceEvents.indexOf(r)))throw new TypeError("The specified event type is not supported.");for(var a=0;a<this._userHandlers[r].length;a++)if(this._userHandlers[r][a]===o)return!0;return!1},n.prototype.removeListener=function(r,o){if(!this.enabled)throw new Error("WebMidi must be enabled before removing event listeners.");if(o!==void 0&&typeof o!="function")throw new TypeError("The 'listener' parameter must be a function.");if(0<=this._midiInterfaceEvents.indexOf(r))if(o)for(var a=0;a<this._userHandlers[r].length;a++)this._userHandlers[r][a]===o&&this._userHandlers[r].splice(a,1);else this._userHandlers[r]=[];else{if(r!==void 0)throw new TypeError("The specified event type is not supported.");this._resetInterfaceUserHandlers()}return this},n.prototype.toMIDIChannels=function(r){var o;if(r==="all"||r===void 0)o=["all"];else{if(r==="none")return o=[];o=Array.isArray(r)?r:[r]}return-1<o.indexOf("all")&&(o=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),o.map(function(a){return parseInt(a)}).filter(function(a){return 1<=a&&a<=16})},n.prototype.getInputById=function(r){if(!this.enabled)throw new Error("WebMidi is not enabled.");r=String(r);for(var o=0;o<this.inputs.length;o++)if(this.inputs[o].id===r)return this.inputs[o];return!1},n.prototype.getOutputById=function(r){if(!this.enabled)throw new Error("WebMidi is not enabled.");r=String(r);for(var o=0;o<this.outputs.length;o++)if(this.outputs[o].id===r)return this.outputs[o];return!1},n.prototype.getInputByName=function(r){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var o=0;o<this.inputs.length;o++)if(~this.inputs[o].name.indexOf(r))return this.inputs[o];return!1},n.prototype.getOctave=function(r){if(r!=null&&0<=r&&r<=127)return Math.floor(Math.floor(r)/12-1)+Math.floor(i.octaveOffset)},n.prototype.getOutputByName=function(r){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var o=0;o<this.outputs.length;o++)if(~this.outputs[o].name.indexOf(r))return this.outputs[o];return!1},n.prototype.guessNoteNumber=function(r){var o=!1;if(r&&r.toFixed&&0<=r&&r<=127?o=Math.round(r):0<=parseInt(r)&&parseInt(r)<=127?o=parseInt(r):(typeof r=="string"||r instanceof String)&&(o=this.noteNameToNumber(r)),o===!1)throw new Error("Invalid input value ("+r+").");return o},n.prototype.noteNameToNumber=function(r){typeof r!="string"&&(r="");var o=r.match(/([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)/i);if(!o)throw new RangeError("Invalid note name.");var a=i._semitones[o[1].toUpperCase()],u=12*(parseInt(o[3])+1-Math.floor(i.octaveOffset))+a;if(-1<o[2].toLowerCase().indexOf("b")?u-=o[2].length:-1<o[2].toLowerCase().indexOf("#")&&(u+=o[2].length),u<0||127<u)throw new RangeError("Invalid note name or note outside valid range.");return u},n.prototype._updateInputsAndOutputs=function(){this._updateInputs(),this._updateOutputs()},n.prototype._updateInputs=function(){for(var r=0;r<this._inputs.length;r++){for(var o=!0,a=this.interface.inputs.values(),u=a.next();u&&!u.done;u=a.next())if(this._inputs[r]._midiInput===u.value){o=!1;break}o&&this._inputs.splice(r,1)}this.interface&&this.interface.inputs.forEach(function(l){for(var h=!0,d=0;d<this._inputs.length;d++)this._inputs[d]._midiInput===l&&(h=!1);h&&this._inputs.push(new s(l))}.bind(this))},n.prototype._updateOutputs=function(){for(var r=0;r<this._outputs.length;r++){for(var o=!0,a=this.interface.outputs.values(),u=a.next();u&&!u.done;u=a.next())if(this._outputs[r]._midiOutput===u.value){o=!1;break}o&&this._outputs.splice(r,1)}this.interface&&this.interface.outputs.forEach(function(l){for(var h=!0,d=0;d<this._outputs.length;d++)this._outputs[d]._midiOutput===l&&(h=!1);h&&this._outputs.push(new c(l))}.bind(this))},n.prototype._onInterfaceStateChange=function(r){this._updateInputsAndOutputs();var o={timestamp:r.timeStamp,type:r.port.state};this.interface&&r.port.state==="connected"?r.port.type==="output"?o.port=this.getOutputById(r.port.id):r.port.type==="input"&&(o.port=this.getInputById(r.port.id)):o.port={connection:"closed",id:r.port.id,manufacturer:r.port.manufacturer,name:r.port.name,state:r.port.state,type:r.port.type},this._userHandlers[r.port.state].forEach(function(a){a(o)})},n.prototype._resetInterfaceUserHandlers=function(){for(var r=0;r<this._midiInterfaceEvents.length;r++)this._userHandlers[this._midiInterfaceEvents[r]]=[]},s.prototype.on=s.prototype.addListener=function(r,o,a){var u=this;if(o===void 0&&(o="all"),Array.isArray(o)||(o=[o]),o.forEach(function(h){if(h!=="all"&&!(1<=h&&h<=16))throw new RangeError("The 'channel' parameter is invalid.")}),typeof a!="function")throw new TypeError("The 'listener' parameter must be a function.");if(i.MIDI_SYSTEM_MESSAGES[r]!==void 0)this._userHandlers.system[r]||(this._userHandlers.system[r]=[]),this._userHandlers.system[r].push(a);else{if(i.MIDI_CHANNEL_MESSAGES[r]===void 0)throw new TypeError("The specified event type is not supported.");if(-1<o.indexOf("all")){o=[];for(var l=1;l<=16;l++)o.push(l)}this._userHandlers.channel[r]||(this._userHandlers.channel[r]=[]),o.forEach(function(h){u._userHandlers.channel[r][h]||(u._userHandlers.channel[r][h]=[]),u._userHandlers.channel[r][h].push(a)})}return this},s.prototype.hasListener=function(r,o,a){var u=this;if(typeof a!="function")throw new TypeError("The 'listener' parameter must be a function.");if(o===void 0&&(o="all"),o.constructor!==Array&&(o=[o]),i.MIDI_SYSTEM_MESSAGES[r]!==void 0){for(var l=0;l<this._userHandlers.system[r].length;l++)if(this._userHandlers.system[r][l]===a)return!0}else if(i.MIDI_CHANNEL_MESSAGES[r]!==void 0){if(-1<o.indexOf("all")){o=[];for(var h=1;h<=16;h++)o.push(h)}return!!this._userHandlers.channel[r]&&o.every(function(d){var p=u._userHandlers.channel[r][d];return p&&-1<p.indexOf(a)})}return!1},s.prototype.removeListener=function(r,o,a){var u=this;if(a!==void 0&&typeof a!="function")throw new TypeError("The 'listener' parameter must be a function.");if(o===void 0&&(o="all"),o.constructor!==Array&&(o=[o]),i.MIDI_SYSTEM_MESSAGES[r]!==void 0)if(a===void 0)this._userHandlers.system[r]=[];else for(var l=0;l<this._userHandlers.system[r].length;l++)this._userHandlers.system[r][l]===a&&this._userHandlers.system[r].splice(l,1);else if(i.MIDI_CHANNEL_MESSAGES[r]!==void 0){if(-1<o.indexOf("all")){o=[];for(var h=1;h<=16;h++)o.push(h)}if(!this._userHandlers.channel[r])return this;o.forEach(function(d){var p=u._userHandlers.channel[r][d];if(p)if(a===void 0)u._userHandlers.channel[r][d]=[];else for(var _=0;_<p.length;_++)p[_]===a&&p.splice(_,1)})}else{if(r!==void 0)throw new TypeError("The specified event type is not supported.");this._initializeUserHandlers()}return this},s.prototype._initializeUserHandlers=function(){for(var r in i.MIDI_CHANNEL_MESSAGES)Object.prototype.hasOwnProperty.call(i.MIDI_CHANNEL_MESSAGES,r)&&(this._userHandlers.channel[r]={});for(var o in i.MIDI_SYSTEM_MESSAGES)Object.prototype.hasOwnProperty.call(i.MIDI_SYSTEM_MESSAGES,o)&&(this._userHandlers.system[o]=[])},s.prototype._onMidiMessage=function(r){if(0<this._userHandlers.system.midimessage.length){var o={target:this,data:r.data,timestamp:r.timeStamp,type:"midimessage"};this._userHandlers.system.midimessage.forEach(function(a){a(o)})}r.data[0]<240?(this._parseChannelEvent(r),this._parseNrpnEvent(r)):r.data[0]<=255&&this._parseSystemEvent(r)},s.prototype._parseNrpnEvent=function(r){var o,a,u=r.data[0]>>4,l=15&r.data[0],h=1+l;if(1<r.data.length&&(o=r.data[1],a=2<r.data.length?r.data[2]:void 0),i.nrpnEventsEnabled&&u===i.MIDI_CHANNEL_MESSAGES.controlchange&&(o>=i.MIDI_NRPN_MESSAGES.increment&&o<=i.MIDI_NRPN_MESSAGES.parammsb||o===i.MIDI_NRPN_MESSAGES.entrymsb||o===i.MIDI_NRPN_MESSAGES.entrylsb)){var d={target:this,type:"controlchange",data:r.data,timestamp:r.timeStamp,channel:h,controller:{number:o,name:this.getCcNameByNumber(o)},value:a};if(d.controller.number===i.MIDI_NRPN_MESSAGES.parammsb&&d.value!=i.MIDI_NRPN_MESSAGES.nullactiveparameter)i._nrpnBuffer[l]=[],i._nrpnBuffer[l][0]=d;else if(i._nrpnBuffer[l].length===1&&d.controller.number===i.MIDI_NRPN_MESSAGES.paramlsb)i._nrpnBuffer[l].push(d);else if(i._nrpnBuffer[l].length!==2||d.controller.number!==i.MIDI_NRPN_MESSAGES.increment&&d.controller.number!==i.MIDI_NRPN_MESSAGES.decrement&&d.controller.number!==i.MIDI_NRPN_MESSAGES.entrymsb)if(i._nrpnBuffer[l].length===3&&i._nrpnBuffer[l][2].number===i.MIDI_NRPN_MESSAGES.entrymsb&&d.controller.number===i.MIDI_NRPN_MESSAGES.entrylsb)i._nrpnBuffer[l].push(d);else if(3<=i._nrpnBuffer[l].length&&i._nrpnBuffer[l].length<=4&&d.controller.number===i.MIDI_NRPN_MESSAGES.parammsb&&d.value===i.MIDI_NRPN_MESSAGES.nullactiveparameter)i._nrpnBuffer[l].push(d);else if(4<=i._nrpnBuffer[l].length&&i._nrpnBuffer[l].length<=5&&d.controller.number===i.MIDI_NRPN_MESSAGES.paramlsb&&d.value===i.MIDI_NRPN_MESSAGES.nullactiveparameter){i._nrpnBuffer[l].push(d);var p=[];i._nrpnBuffer[l].forEach(function(y){p.push(y.data)});var _=i._nrpnBuffer[l][0].value<<7|i._nrpnBuffer[l][1].value,T=i._nrpnBuffer[l][2].value;i._nrpnBuffer[l].length===6&&(T=i._nrpnBuffer[l][2].value<<7|i._nrpnBuffer[l][3].value);var S="";switch(i._nrpnBuffer[l][2].controller.number){case i.MIDI_NRPN_MESSAGES.entrymsb:S=i._nrpnTypes[0];break;case i.MIDI_NRPN_MESSAGES.increment:S=i._nrpnTypes[1];break;case i.MIDI_NRPN_MESSAGES.decrement:S=i._nrpnTypes[2];break;default:throw new Error("The NPRN type was unidentifiable.")}var v={timestamp:d.timestamp,channel:d.channel,type:"nrpn",data:p,controller:{number:_,type:S,name:"Non-Registered Parameter "+_},value:T};i._nrpnBuffer[l]=[],this._userHandlers.channel[v.type]&&this._userHandlers.channel[v.type][v.channel]&&this._userHandlers.channel[v.type][v.channel].forEach(function(y){y(v)})}else i._nrpnBuffer[l]=[];else i._nrpnBuffer[l].push(d)}},s.prototype._parseChannelEvent=function(r){var o,a,u=r.data[0]>>4,l=1+(15&r.data[0]);1<r.data.length&&(o=r.data[1],a=2<r.data.length?r.data[2]:void 0);var h={target:this,data:r.data,timestamp:r.timeStamp,channel:l};u===i.MIDI_CHANNEL_MESSAGES.noteoff||u===i.MIDI_CHANNEL_MESSAGES.noteon&&a===0?(h.type="noteoff",h.note={number:o,name:i._notes[o%12],octave:i.getOctave(o)},h.velocity=a/127,h.rawVelocity=a):u===i.MIDI_CHANNEL_MESSAGES.noteon?(h.type="noteon",h.note={number:o,name:i._notes[o%12],octave:i.getOctave(o)},h.velocity=a/127,h.rawVelocity=a):u===i.MIDI_CHANNEL_MESSAGES.keyaftertouch?(h.type="keyaftertouch",h.note={number:o,name:i._notes[o%12],octave:i.getOctave(o)},h.value=a/127):u===i.MIDI_CHANNEL_MESSAGES.controlchange&&0<=o&&o<=119?(h.type="controlchange",h.controller={number:o,name:this.getCcNameByNumber(o)},h.value=a):u===i.MIDI_CHANNEL_MESSAGES.channelmode&&120<=o&&o<=127?(h.type="channelmode",h.controller={number:o,name:this.getChannelModeByNumber(o)},h.value=a):u===i.MIDI_CHANNEL_MESSAGES.programchange?(h.type="programchange",h.value=o):u===i.MIDI_CHANNEL_MESSAGES.channelaftertouch?(h.type="channelaftertouch",h.value=o/127):u===i.MIDI_CHANNEL_MESSAGES.pitchbend?(h.type="pitchbend",h.value=((a<<7)+o-8192)/8192):h.type="unknownchannelmessage",this._userHandlers.channel[h.type]&&this._userHandlers.channel[h.type][l]&&this._userHandlers.channel[h.type][l].forEach(function(d){d(h)})},s.prototype.getCcNameByNumber=function(r){if(!(0<=(r=Math.floor(r))&&r<=119))throw new RangeError("The control change number must be between 0 and 119.");for(var o in i.MIDI_CONTROL_CHANGE_MESSAGES)if(Object.prototype.hasOwnProperty.call(i.MIDI_CONTROL_CHANGE_MESSAGES,o)&&r===i.MIDI_CONTROL_CHANGE_MESSAGES[o])return o},s.prototype.getChannelModeByNumber=function(r){if(!(120<=(r=Math.floor(r))&&status<=127))throw new RangeError("The control change number must be between 120 and 127.");for(var o in i.MIDI_CHANNEL_MODE_MESSAGES)if(Object.prototype.hasOwnProperty.call(i.MIDI_CHANNEL_MODE_MESSAGES,o)&&r===i.MIDI_CHANNEL_MODE_MESSAGES[o])return o},s.prototype._parseSystemEvent=function(r){var o=r.data[0],a={target:this,data:r.data,timestamp:r.timeStamp};o===i.MIDI_SYSTEM_MESSAGES.sysex?a.type="sysex":o===i.MIDI_SYSTEM_MESSAGES.timecode?a.type="timecode":o===i.MIDI_SYSTEM_MESSAGES.songposition?a.type="songposition":o===i.MIDI_SYSTEM_MESSAGES.songselect?(a.type="songselect",a.song=r.data[1]):o===i.MIDI_SYSTEM_MESSAGES.tuningrequest?a.type="tuningrequest":o===i.MIDI_SYSTEM_MESSAGES.clock?a.type="clock":o===i.MIDI_SYSTEM_MESSAGES.start?a.type="start":o===i.MIDI_SYSTEM_MESSAGES.continue?a.type="continue":o===i.MIDI_SYSTEM_MESSAGES.stop?a.type="stop":o===i.MIDI_SYSTEM_MESSAGES.activesensing?a.type="activesensing":o===i.MIDI_SYSTEM_MESSAGES.reset?a.type="reset":a.type="unknownsystemmessage",this._userHandlers.system[a.type]&&this._userHandlers.system[a.type].forEach(function(u){u(a)})},c.prototype.send=function(r,o,a){if(!(128<=r&&r<=255))throw new RangeError("The status byte must be an integer between 128 (0x80) and 255 (0xFF).");o===void 0&&(o=[]),Array.isArray(o)||(o=[o]);var u=[];return o.forEach(function(l){var h=Math.floor(l);if(!(0<=h&&h<=255))throw new RangeError("Data bytes must be integers between 0 (0x00) and 255 (0xFF).");u.push(h)}),this._midiOutput.send([r].concat(u),parseFloat(a)||0),this},c.prototype.sendSysex=function(r,o,a){if(!i.sysexEnabled)throw new Error("Sysex message support must first be activated.");return a=a||{},r=[].concat(r),o.forEach(function(u){if(u<0||127<u)throw new RangeError("The data bytes of a sysex message must be integers between 0 (0x00) and 127 (0x7F).")}),o=r.concat(o,i.MIDI_SYSTEM_MESSAGES.sysexend),this.send(i.MIDI_SYSTEM_MESSAGES.sysex,o,this._parseTimeParameter(a.time)),this},c.prototype.sendTimecodeQuarterFrame=function(r,o){return o=o||{},this.send(i.MIDI_SYSTEM_MESSAGES.timecode,r,this._parseTimeParameter(o.time)),this},c.prototype.sendSongPosition=function(r,o){o=o||{};var a=(r=Math.floor(r)||0)>>7&127,u=127&r;return this.send(i.MIDI_SYSTEM_MESSAGES.songposition,[a,u],this._parseTimeParameter(o.time)),this},c.prototype.sendSongSelect=function(r,o){if(o=o||{},!(0<=(r=Math.floor(r))&&r<=127))throw new RangeError("The song number must be between 0 and 127.");return this.send(i.MIDI_SYSTEM_MESSAGES.songselect,[r],this._parseTimeParameter(o.time)),this},c.prototype.sendTuningRequest=function(r){return r=r||{},this.send(i.MIDI_SYSTEM_MESSAGES.tuningrequest,void 0,this._parseTimeParameter(r.time)),this},c.prototype.sendClock=function(r){return r=r||{},this.send(i.MIDI_SYSTEM_MESSAGES.clock,void 0,this._parseTimeParameter(r.time)),this},c.prototype.sendStart=function(r){return r=r||{},this.send(i.MIDI_SYSTEM_MESSAGES.start,void 0,this._parseTimeParameter(r.time)),this},c.prototype.sendContinue=function(r){return r=r||{},this.send(i.MIDI_SYSTEM_MESSAGES.continue,void 0,this._parseTimeParameter(r.time)),this},c.prototype.sendStop=function(r){return r=r||{},this.send(i.MIDI_SYSTEM_MESSAGES.stop,void 0,this._parseTimeParameter(r.time)),this},c.prototype.sendActiveSensing=function(r){return r=r||{},this.send(i.MIDI_SYSTEM_MESSAGES.activesensing,[],this._parseTimeParameter(r.time)),this},c.prototype.sendReset=function(r){return r=r||{},this.send(i.MIDI_SYSTEM_MESSAGES.reset,void 0,this._parseTimeParameter(r.time)),this},c.prototype.stopNote=function(r,o,a){if(r==="all")return this.sendChannelMode("allnotesoff",0,o,a);var u=64;return(a=a||{}).rawVelocity?!isNaN(a.velocity)&&0<=a.velocity&&a.velocity<=127&&(u=a.velocity):!isNaN(a.velocity)&&0<=a.velocity&&a.velocity<=1&&(u=127*a.velocity),this._convertNoteToArray(r).forEach(function(l){i.toMIDIChannels(o).forEach(function(h){this.send((i.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(h-1),[l,Math.round(u)],this._parseTimeParameter(a.time))}.bind(this))}.bind(this)),this},c.prototype.playNote=function(r,o,a){var u,l=64;if((a=a||{}).rawVelocity?!isNaN(a.velocity)&&0<=a.velocity&&a.velocity<=127&&(l=a.velocity):!isNaN(a.velocity)&&0<=a.velocity&&a.velocity<=1&&(l=127*a.velocity),u=this._parseTimeParameter(a.time),this._convertNoteToArray(r).forEach(function(d){i.toMIDIChannels(o).forEach(function(p){this.send((i.MIDI_CHANNEL_MESSAGES.noteon<<4)+(p-1),[d,Math.round(l)],u)}.bind(this))}.bind(this)),!isNaN(a.duration)){a.duration<=0&&(a.duration=0);var h=64;a.rawVelocity?!isNaN(a.release)&&0<=a.release&&a.release<=127&&(h=a.release):!isNaN(a.release)&&0<=a.release&&a.release<=1&&(h=127*a.release),this._convertNoteToArray(r).forEach(function(d){i.toMIDIChannels(o).forEach(function(p){this.send((i.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(p-1),[d,Math.round(h)],(u||i.time)+a.duration)}.bind(this))}.bind(this))}return this},c.prototype.sendKeyAftertouch=function(r,o,a,u){var l=this;if(u=u||{},o<1||16<o)throw new RangeError("The channel must be between 1 and 16.");(isNaN(a)||a<0||1<a)&&(a=.5);var h=Math.round(127*a);return this._convertNoteToArray(r).forEach(function(d){i.toMIDIChannels(o).forEach(function(p){l.send((i.MIDI_CHANNEL_MESSAGES.keyaftertouch<<4)+(p-1),[d,h],l._parseTimeParameter(u.time))})}),this},c.prototype.sendControlChange=function(r,o,a,u){if(u=u||{},typeof r=="string"){if((r=i.MIDI_CONTROL_CHANGE_MESSAGES[r])===void 0)throw new TypeError("Invalid controller name.")}else if(!(0<=(r=Math.floor(r))&&r<=119))throw new RangeError("Controller numbers must be between 0 and 119.");if(!(0<=(o=Math.floor(o)||0)&&o<=127))throw new RangeError("Controller value must be between 0 and 127.");return i.toMIDIChannels(a).forEach(function(l){this.send((i.MIDI_CHANNEL_MESSAGES.controlchange<<4)+(l-1),[r,o],this._parseTimeParameter(u.time))}.bind(this)),this},c.prototype._selectRegisteredParameter=function(r,o,a){var u=this;if(r[0]=Math.floor(r[0]),!(0<=r[0]&&r[0]<=127))throw new RangeError("The control65 value must be between 0 and 127");if(r[1]=Math.floor(r[1]),!(0<=r[1]&&r[1]<=127))throw new RangeError("The control64 value must be between 0 and 127");return i.toMIDIChannels(o).forEach(function(){u.sendControlChange(101,r[0],o,{time:a}),u.sendControlChange(100,r[1],o,{time:a})}),this},c.prototype._selectNonRegisteredParameter=function(r,o,a){var u=this;if(r[0]=Math.floor(r[0]),!(0<=r[0]&&r[0]<=127))throw new RangeError("The control63 value must be between 0 and 127");if(r[1]=Math.floor(r[1]),!(0<=r[1]&&r[1]<=127))throw new RangeError("The control62 value must be between 0 and 127");return i.toMIDIChannels(o).forEach(function(){u.sendControlChange(99,r[0],o,{time:a}),u.sendControlChange(98,r[1],o,{time:a})}),this},c.prototype._setCurrentRegisteredParameter=function(r,o,a){var u=this;if((r=[].concat(r))[0]=Math.floor(r[0]),!(0<=r[0]&&r[0]<=127))throw new RangeError("The msb value must be between 0 and 127");return i.toMIDIChannels(o).forEach(function(){u.sendControlChange(6,r[0],o,{time:a})}),r[1]=Math.floor(r[1]),0<=r[1]&&r[1]<=127&&i.toMIDIChannels(o).forEach(function(){u.sendControlChange(38,r[1],o,{time:a})}),this},c.prototype._deselectRegisteredParameter=function(r,o){var a=this;return i.toMIDIChannels(r).forEach(function(){a.sendControlChange(101,127,r,{time:o}),a.sendControlChange(100,127,r,{time:o})}),this},c.prototype.setRegisteredParameter=function(r,o,a,u){var l=this;if(u=u||{},!Array.isArray(r)){if(!i.MIDI_REGISTERED_PARAMETER[r])throw new Error("The specified parameter is not available.");r=i.MIDI_REGISTERED_PARAMETER[r]}return i.toMIDIChannels(a).forEach(function(){l._selectRegisteredParameter(r,a,u.time),l._setCurrentRegisteredParameter(o,a,u.time),l._deselectRegisteredParameter(a,u.time)}),this},c.prototype.setNonRegisteredParameter=function(r,o,a,u){var l=this;if(u=u||{},!(0<=r[0]&&r[0]<=127&&0<=r[1]&&r[1]<=127))throw new Error("Position 0 and 1 of the 2-position parameter array must both be between 0 and 127.");return o=[].concat(o),i.toMIDIChannels(a).forEach(function(){l._selectNonRegisteredParameter(r,a,u.time),l._setCurrentRegisteredParameter(o,a,u.time),l._deselectRegisteredParameter(a,u.time)}),this},c.prototype.incrementRegisteredParameter=function(r,o,a){var u=this;if(a=a||{},!Array.isArray(r)){if(!i.MIDI_REGISTERED_PARAMETER[r])throw new Error("The specified parameter is not available.");r=i.MIDI_REGISTERED_PARAMETER[r]}return i.toMIDIChannels(o).forEach(function(){u._selectRegisteredParameter(r,o,a.time),u.sendControlChange(96,0,o,{time:a.time}),u._deselectRegisteredParameter(o,a.time)}),this},c.prototype.decrementRegisteredParameter=function(r,o,a){if(a=a||{},!Array.isArray(r)){if(!i.MIDI_REGISTERED_PARAMETER[r])throw new TypeError("The specified parameter is not available.");r=i.MIDI_REGISTERED_PARAMETER[r]}return i.toMIDIChannels(o).forEach(function(){this._selectRegisteredParameter(r,o,a.time),this.sendControlChange(97,0,o,{time:a.time}),this._deselectRegisteredParameter(o,a.time)}.bind(this)),this},c.prototype.setPitchBendRange=function(r,o,a,u){var l=this;if(u=u||{},!(0<=(r=Math.floor(r)||0)&&r<=127))throw new RangeError("The semitones value must be between 0 and 127");if(!(0<=(o=Math.floor(o)||0)&&o<=127))throw new RangeError("The cents value must be between 0 and 127");return i.toMIDIChannels(a).forEach(function(){l.setRegisteredParameter("pitchbendrange",[r,o],a,{time:u.time})}),this},c.prototype.setModulationRange=function(r,o,a,u){var l=this;if(u=u||{},!(0<=(r=Math.floor(r)||0)&&r<=127))throw new RangeError("The semitones value must be between 0 and 127");if(!(0<=(o=Math.floor(o)||0)&&o<=127))throw new RangeError("The cents value must be between 0 and 127");return i.toMIDIChannels(a).forEach(function(){l.setRegisteredParameter("modulationrange",[r,o],a,{time:u.time})}),this},c.prototype.setMasterTuning=function(r,o,a){var u=this;if(a=a||{},(r=parseFloat(r)||0)<=-65||64<=r)throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");var l=Math.floor(r)+64,h=r-Math.floor(r),d=(h=Math.round((h+1)/2*16383))>>7&127,p=127&h;return i.toMIDIChannels(o).forEach(function(){u.setRegisteredParameter("channelcoarsetuning",l,o,{time:a.time}),u.setRegisteredParameter("channelfinetuning",[d,p],o,{time:a.time})}),this},c.prototype.setTuningProgram=function(r,o,a){var u=this;if(a=a||{},!(0<=(r=Math.floor(r))&&r<=127))throw new RangeError("The program value must be between 0 and 127");return i.toMIDIChannels(o).forEach(function(){u.setRegisteredParameter("tuningprogram",r,o,{time:a.time})}),this},c.prototype.setTuningBank=function(r,o,a){var u=this;if(a=a||{},!(0<=(r=Math.floor(r)||0)&&r<=127))throw new RangeError("The bank value must be between 0 and 127");return i.toMIDIChannels(o).forEach(function(){u.setRegisteredParameter("tuningbank",r,o,{time:a.time})}),this},c.prototype.sendChannelMode=function(r,o,a,u){if(u=u||{},typeof r=="string"){if(!(r=i.MIDI_CHANNEL_MODE_MESSAGES[r]))throw new TypeError("Invalid channel mode message name.")}else if(!(120<=(r=Math.floor(r))&&r<=127))throw new RangeError("Channel mode numerical identifiers must be between 120 and 127.");if((o=Math.floor(o)||0)<0||127<o)throw new RangeError("Value must be an integer between 0 and 127.");return i.toMIDIChannels(a).forEach(function(l){this.send((i.MIDI_CHANNEL_MESSAGES.channelmode<<4)+(l-1),[r,o],this._parseTimeParameter(u.time))}.bind(this)),this},c.prototype.sendProgramChange=function(r,o,a){var u=this;if(a=a||{},r=Math.floor(r),isNaN(r)||r<0||127<r)throw new RangeError("Program numbers must be between 0 and 127.");return i.toMIDIChannels(o).forEach(function(l){u.send((i.MIDI_CHANNEL_MESSAGES.programchange<<4)+(l-1),[r],u._parseTimeParameter(a.time))}),this},c.prototype.sendChannelAftertouch=function(r,o,a){var u=this;a=a||{},r=parseFloat(r),(isNaN(r)||r<0||1<r)&&(r=.5);var l=Math.round(127*r);return i.toMIDIChannels(o).forEach(function(h){u.send((i.MIDI_CHANNEL_MESSAGES.channelaftertouch<<4)+(h-1),[l],u._parseTimeParameter(a.time))}),this},c.prototype.sendPitchBend=function(r,o,a){var u=this;if(a=a||{},isNaN(r)||r<-1||1<r)throw new RangeError("Pitch bend value must be between -1 and 1.");var l=Math.round((r+1)/2*16383),h=l>>7&127,d=127&l;return i.toMIDIChannels(o).forEach(function(p){u.send((i.MIDI_CHANNEL_MESSAGES.pitchbend<<4)+(p-1),[d,h],u._parseTimeParameter(a.time))}),this},c.prototype._parseTimeParameter=function(r){var o,a=parseFloat(r);return typeof r=="string"&&r.substring(0,1)==="+"?a&&0<a&&(o=i.time+a):a>i.time&&(o=a),o},c.prototype._convertNoteToArray=function(r){var o=[];return Array.isArray(r)||(r=[r]),r.forEach(function(a){o.push(i.guessNoteNumber(a))}),o},t.exports?t.exports=i:e.WebMidi||(e.WebMidi=i)})(J)}),Me=po;var zr="route-to",ct="toggle-debug",ye="toggle-key-state",be="set-key-state",ut="reset-key-state",lt="set-random-key-state",Pe="set-highlights",ft="reset-highlights",ht="set-size",mt="toggle-view-config",dt="set-midi-devices";var le="set-midi-file",pt="set-midi-file-error",qr="set-comparison";var $r=t=>{Me.inputs.forEach(e=>e.addListener("noteon","all",n=>{t.dispatch([ye,n.note.number%12]),console.log(`Received 'noteon' message (${n.note.name+n.note.octave}) from ${e.name}`)}))},Wr=t=>{Me.enable(e=>{if(e){console.log("WebMidi could not be enabled.",e);return}else console.log("WebMidi enabled!"),t.dispatch([dt,Me.inputs.map(n=>n.name)]);$r(t)})},go=(t,e)=>{if(Me.inputs.forEach(n=>n.removeListener()),e==="All Devices"){$r(t);return}else{let n=Me.getInputByName(e);n&&n.addListener("noteon","all",i=>{t.dispatch([ye,i.note.number%12]),console.log(`Received 'noteon' message (${i.note.name+i.note.octave}) from ${e}`)})}},Yr=t=>{let e=t.views,n=t.ui.midiDevicesStatus,i=t.bus;return()=>{let s=e.enabledMidi.deref(),c=e.midiDevices.deref();return["div",["span",n.content[Number(s)],""],["span",n.dropdown.root,c.length>=1?[Or,{...n.dropdown.selection,onchange:r=>go(i,r.target.value)},L(N(r=>[r,r]),B(),["All Devices",...c])]:"Web MIDI unavailable"]]}};function Kr(t,e,n,i){return["a",{...n,onclick:s=>{s.preventDefault(),t.bus.dispatch(e)}},i]}function Jr(t,e,n){return["div#debug",t.ui.column.debug[e],[Kr,[ct],t.ui.debugToggle,e?"close":"open"],["pre",t.ui.code,n]]}var Yt="route-to";var gt=ir,Kt=class{constructor(e){this.config=e,this.state=new me(e.initialState||{}),this.ctx={bus:new Bt(this.state,e.events,e.effects),views:{},ui:e.ui},this.addViews(this.config.views),this.router=new Vt(e.router),this.router.addListener(Se,n=>this.ctx.bus.dispatch([Se,n.value])),this.ctx.bus.addHandlers({[Se]:kr("route"),[zr]:(n,[i,s])=>({[Yt]:s})}),this.ctx.bus.addEffect(Yt,([n,i])=>this.router.routeTo(this.router.format(n,i))),gt&&gt==="development"&&this.ctx.bus.instrumentWith([Ar]),this.addViews({route:"route",routeComponent:["route.id",n=>(this.config.components[n]||(()=>["div",`missing component for route: ${n}`]))(this.ctx)]})}addViews(e){let n=this.ctx.views;for(let i in e){let s=e[i];n[i]=U(s)?jt(this.state,s[0],s[1]):jt(this.state,s)}}start(){Wr(this.ctx.bus),window.addEventListener("resize",()=>{this.ctx.bus.dispatch([ht])}),this.router.start(),Ir(()=>{if(this.ctx.bus.processQueue())return this.rootComponent()},{root:this.config.domRoot,ctx:this.ctx})}rootComponent(){let e=this.ctx.views.debug.deref(),n=this.ctx.ui;return["div",n.root,gt&&gt==="development"?[["div",n.column.content[e],this.ctx.views.routeComponent],[Jr,e,this.ctx.views.json]]:["div",this.ctx.views.routeComponent]]}};var Jt=(t,e,n={})=>(i,s)=>["a",{...n,onclick:t,disabled:s},e];var Xr=t=>{let e=t.ui,n=Jt(s=>{s.preventDefault(),t.bus.dispatch([ut])},"CLEAR",e.toolbar.button),i=Jt(s=>{s.preventDefault(),t.bus.dispatch([lt])},"RANDOM",e.toolbar.button);return()=>["div",e.toolbar.root,[n],[i]]};var yo={anim:100,pad:1,margin:0,hlOn:{fill:"#E83015"},bgOn:{fill:"#CCCCCC"},bgOff:{fill:"#CCCCCC"},fgOn:{fill:"#E83015"},fgOff:{fill:"#fff"},floor:1},bo=["filter",{id:"blur"},["feGaussianBlur",{in:"SourceGraphic",stdDeviation:".25"}]],yt=(t={})=>{let e={r:5,...yo,...t},{r:n,pad:i,margin:s,glyph:c,floor:r}=e,o=.5,a=n*o**2,u=s*2,l=n+i,h=l+s,p=l*2+u,_={width:p,height:p*r},T={transition:`all ${e.anim}ms ease-out`},S={cx:h,cy:h},v={...e.hlOn,...S,r:l},y={...e.bgOn,...S,style:T,r:n},w={...y,...e.bgOff},M={...e.fgOn,...S,style:T,r:a},R={...M,...e.fgOff},P={...e.fgOn,x:"50%",y:"50%","text-anchor":"middle","alignment-baseline":"central",font:"bold font-sans","font-size":p*o,style:T},ee={...P,...e.fgOff};return(X,z,f,m)=>["svg",{..._,...z},bo,["g",["circle",m?v:{}],["circle",f?y:w],c?["text",f?P:ee,c]:["circle",f?M:R]]]};var Xt={anim:0,r:16,pad:2},_o={...Xt,glyph:"C"},vo={...Xt,bgOn:{fill:"#000"},bgOff:{fill:"#000"}},Eo=(t,e)=>[1,3,6,8,10].includes(t)?e.minor:t===4?e.e:e.major,Qr=t=>{let e=t.views,n=t.ui,i=e.size.deref(),s=Math.min(18*2,i[0]*.9/13),c={r:s/2*(8/9),pad:s/2*(1/9)},r=e.highlights.deref();return["div.mb-4",...e.keyState.deref().map((o,a)=>["div",Eo(a,n.toggleGroup.key),[a===0?yt({..._o,...c}):[2,4,5,7,9,11].includes(a)?yt({...Xt,...c}):yt({...vo,...c}),{onclick:u=>{u.preventDefault(),t.bus.dispatch([ye,a])}},o,r.includes(a)]])]};var So=t=>t[Symbol.iterator]();function*Qt(t,e){let n={},i=So(t),s;for(;s=i.next(),!s.done;){let c=e?e(s.value):s.value,r=JSON.stringify(c),o=n[r];o?o[1]++:n[r]=[c,1]}yield*Object.keys(n).map(c=>n[c])}var Io=t=>t instanceof Map;function wo(t,e){if(Io(t))for(let n of e)t.set(n[0],n[1]);else for(let n of e)t.add(n);return t}var Mo=(t,e)=>oe(t,"empty")?t.empty():new(t[Symbol.species]||e),Zt=(t,e,n)=>{if(n=n||Mo(t,Set),t===e)return wo(n,t);if(e.size<t.size)return Zt(e,t,n);for(let i of e)t.has(i)&&n.add(i);return n};var bt=(t,e)=>Array(Math.abs(e)+1).join(t);function _t(t){return t!==null&&typeof t=="object"&&typeof t.name=="string"}function vt(t){return t!==null&&typeof t=="object"&&typeof t.step=="number"&&typeof t.alt=="number"}var Zr=[0,2,4,-1,1,3,5],en=Zr.map(t=>Math.floor(t*7/12));function tn(t){let{step:e,alt:n,oct:i,dir:s=1}=t,c=Zr[e]+7*n;if(i===void 0)return[s*c];let r=i-en[e]-4*n;return[s*c,s*r]}var To=[3,0,4,1,5,2,6];function ko(t){let[e,n,i]=t,s=To[Ao(e)],c=Math.floor((e+1)/7);if(n===void 0)return{step:s,alt:c,dir:i};let r=n+4*c+en[s];return{step:s,alt:c,oct:r,dir:i}}function Ao(t){let e=(t+1)%7;return e<0?7+e:e}var rn={empty:!0,name:"",pc:"",acc:""},nn=new Map,xo=t=>"CDEFGAB".charAt(t),Et=t=>t<0?bt("b",-t):bt("#",t),er=t=>t[0]==="b"?-t.length:t.length;function Z(t){let e=nn.get(t);if(e)return e;let n=typeof t=="string"?Co(t):vt(t)?Z(Oo(t)):_t(t)?Z(t.name):rn;return nn.set(t,n),n}var No=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function Do(t){let e=No.exec(t);return[e[1].toUpperCase(),e[2].replace(/x/g,"##"),e[3],e[4]]}function Fo(t){return Z(ko(t))}var jo=(t,e)=>(t%e+e)%e,tr=[0,2,4,5,7,9,11];function Co(t){let e=Do(t);if(e[0]===""||e[3]!=="")return rn;let n=e[0],i=e[1],s=e[2],c=(n.charCodeAt(0)+3)%7,r=er(i),o=s.length?+s:void 0,a=tn({step:c,alt:r,oct:o}),u=n+i+s,l=n+i,h=(tr[c]+r+120)%12,d=o===void 0?jo(tr[c]+r,12)-12*99:tr[c]+r+12*(o+1),p=d>=0&&d<=127?d:null,_=o===void 0?null:Math.pow(2,(d-69)/12)*440;return{empty:!1,acc:i,alt:r,chroma:h,coord:a,freq:_,height:d,letter:n,midi:p,name:u,oct:o,pc:l,step:c}}function Oo(t){let{step:e,alt:n,oct:i}=t,s=xo(e);if(!s)return"";let c=s+Et(n);return i||i===0?c+i:c}var rr={empty:!0,name:"",acc:""},Ro="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",Po="(AA|A|P|M|m|d|dd)([-+]?\\d+)",Go=new RegExp("^"+Ro+"|"+Po+"$");function Uo(t){let e=Go.exec(`${t}`);return e===null?["",""]:e[1]?[e[1],e[2]]:[e[4],e[3]]}var on={};function Ge(t){return typeof t=="string"?on[t]||(on[t]=Ho(t)):vt(t)?Ge(Bo(t)):_t(t)?Ge(t.name):rr}var sn=[0,2,4,5,7,9,11],an="PMMPPMM";function Ho(t){let e=Uo(t);if(e[0]==="")return rr;let n=+e[0],i=e[1],s=(Math.abs(n)-1)%7,c=an[s];if(c==="M"&&i==="P")return rr;let r=c==="M"?"majorable":"perfectable",o=""+n+i,a=n<0?-1:1,u=n===8||n===-8?n:a*(s+1),l=Lo(r,i),h=Math.floor((Math.abs(n)-1)/7),d=a*(sn[s]+l+12*h),p=(a*(sn[s]+l)%12+12)%12,_=tn({step:s,alt:l,oct:h,dir:a});return{empty:!1,name:o,num:n,q:i,step:s,alt:l,dir:a,type:r,simple:u,semitones:d,chroma:p,coord:_,oct:h}}function Lo(t,e){return e==="M"&&t==="majorable"||e==="P"&&t==="perfectable"?0:e==="m"&&t==="majorable"?-1:/^A+$/.test(e)?e.length:/^d+$/.test(e)?-1*(t==="perfectable"?e.length:e.length+1):0}function Bo(t){let{step:e,alt:n,oct:i=0,dir:s}=t;if(!s)return"";let c=e+1+7*i,r=s<0?"-":"",o=an[e]==="M"?"majorable":"perfectable";return r+c+Vo(o,n)}function Vo(t,e){return e===0?t==="majorable"?"M":"P":e===-1&&t==="majorable"?"m":e>0?bt("A",e):bt("d",t==="perfectable"?e:e+1)}function St(t,e){let n=Z(t),i=Ge(e);if(n.empty||i.empty)return"";let s=n.coord,c=i.coord,r=s.length===1?[s[0]+c[0]]:[s[0]+c[0],s[1]+c[1]];return Fo(r).name}var cn={empty:!0,name:"",chordType:""},un={};function Ue(t){return typeof t=="string"?un[t]||(un[t]=qo(t)):typeof t=="number"?Ue(nr[t]||""):vt(t)?zo(t):_t(t)?Ue(t.name):cn}function zo(t){return Ue(Et(t.alt)+nr[t.step])}var $o=/^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;function Wo(t){return $o.exec(t)||["","","",""]}var Yo="I II III IV V VI VII",nr=Yo.split(" ");function qo(t){let[e,n,i,s]=Wo(t);if(!i)return cn;let c=i.toUpperCase(),r=nr.indexOf(c),o=er(n),a=1;return{empty:!1,name:e,roman:i,interval:Ge({step:r,alt:o,dir:a}).name,acc:n,chordType:s,alt:o,step:r,major:i===c,oct:0,dir:a}}var ie=Object.freeze([]),Ko={type:"major",tonic:"",alteration:0,keySignature:""},Jo={tonic:"",grades:ie,intervals:ie,scale:ie,chords:ie,chordsHarmonicFunction:ie,chordScales:ie},Xo={...Ko,...Jo,type:"major",minorRelative:"",scale:ie,secondaryDominants:ie,secondaryDominantsMinorRelative:ie,substituteDominants:ie,substituteDominantsMinorRelative:ie},ln=(t,e,n="")=>e.map((i,s)=>`${t[s]}${n}${i}`);function Qo(t,e,n,i){return s=>{let c=t.map(o=>Ue(o).interval||""),r=c.map(o=>St(s,o));return{tonic:s,grades:t,intervals:c,scale:r,chords:ln(r,e),chordsHarmonicFunction:n.slice(),chordScales:ln(r,i," ")}}}var Zo=(t,e)=>{let n=Z(t),i=Z(e);return n.empty||i.empty?0:i.coord[0]-n.coord[0]},es=Qo("I II III IV V VI VII".split(" "),"maj7 m7 m7 maj7 7 m7 m7b5".split(" "),"T SD T SD D T D".split(" "),"major,dorian,phrygian,lydian,mixolydian,minor,locrian".split(","));function fn(t){let e=Z(t).pc;if(!e)return Xo;let n=es(e),i=Zo("C",e),s=c=>{let r=Ue(c);return r.empty?"":St(t,r.interval)+r.chordType};return{...n,type:"major",minorRelative:St(e,"-3m"),alteration:i,keySignature:Et(i),secondaryDominants:"- VI7 VII7 I7 II7 III7 -".split(" ").map(s),secondaryDominantsMinorRelative:"- IIIm7b5 IV#m7 Vm7 VIm7 VIIm7b5 -".split(" ").map(s),substituteDominants:"- bIII7 IV7 bV7 bVI7 bVII7 -".split(" ").map(s),substituteDominantsMinorRelative:"- IIIm7 Im7 IIbm7 VIm7 IVm7 -".split(" ").map(s)}}function ts(t){return+t>=0&&+t<=127}function It(t){if(ts(t))return+t;let e=Z(t);return e.empty?null:e.midi}var rs="C C# D D# E F F# G G# A A# B".split(" "),ns="C Db D Eb E F Gb G Ab A Bb B".split(" ");function hn(t,e={}){if(isNaN(t)||t===-Infinity||t===Infinity)return"";t=Math.round(t);let i=(e.sharps===!0?rs:ns)[t%12];if(e.pitchClass)return i;let s=Math.floor(t/12)-1;return i+s}var is=Z,mn=t=>{let e=is(t);return e.empty?"":hn(e.midi||e.chroma,{sharps:e.alt>0,pitchClass:e.midi===null})};function as(t){var e=new W(t),n=e.readChunk();if(n.id!="MThd")throw"Bad MIDI file.  Expected 'MHdr', got: '"+n.id+"'";for(var i=os(n.data),s=[],c=0;!e.eof()&&c<i.numTracks;c++){var r=e.readChunk();if(r.id!="MTrk")throw"Bad MIDI file.  Expected 'MTrk', got: '"+r.id+"'";var o=ss(r.data);s.push(o)}return{header:i,tracks:s}}function os(t){var e=new W(t),n=e.readUInt16(),i=e.readUInt16(),s={format:n,numTracks:i},c=e.readUInt16();return c&32768?(s.framesPerSecond=256-(c>>8),s.ticksPerFrame=c&255):s.ticksPerBeat=c,s}function ss(t){for(var e=new W(t),n=[];!e.eof();){var i=c();n.push(i)}return n;var s;function c(){var r={};r.deltaTime=e.readVarInt();var o=e.readUInt8();if((o&240)==240)if(o===255){r.meta=!0;var a=e.readUInt8(),u=e.readVarInt();switch(a){case 0:if(r.type="sequenceNumber",u!==2)throw"Expected length for sequenceNumber event is 2, got "+u;return r.number=e.readUInt16(),r;case 1:return r.type="text",r.text=e.readString(u),r;case 2:return r.type="copyrightNotice",r.text=e.readString(u),r;case 3:return r.type="trackName",r.text=e.readString(u),r;case 4:return r.type="instrumentName",r.text=e.readString(u),r;case 5:return r.type="lyrics",r.text=e.readString(u),r;case 6:return r.type="marker",r.text=e.readString(u),r;case 7:return r.type="cuePoint",r.text=e.readString(u),r;case 32:if(r.type="channelPrefix",u!=1)throw"Expected length for channelPrefix event is 1, got "+u;return r.channel=e.readUInt8(),r;case 33:if(r.type="portPrefix",u!=1)throw"Expected length for portPrefix event is 1, got "+u;return r.port=e.readUInt8(),r;case 47:if(r.type="endOfTrack",u!=0)throw"Expected length for endOfTrack event is 0, got "+u;return r;case 81:if(r.type="setTempo",u!=3)throw"Expected length for setTempo event is 3, got "+u;return r.microsecondsPerBeat=e.readUInt24(),r;case 84:if(r.type="smpteOffset",u!=5)throw"Expected length for smpteOffset event is 5, got "+u;var l=e.readUInt8(),h={0:24,32:25,64:29,96:30};return r.frameRate=h[l&96],r.hour=l&31,r.min=e.readUInt8(),r.sec=e.readUInt8(),r.frame=e.readUInt8(),r.subFrame=e.readUInt8(),r;case 88:if(r.type="timeSignature",u!=4)throw"Expected length for timeSignature event is 4, got "+u;return r.numerator=e.readUInt8(),r.denominator=1<<e.readUInt8(),r.metronome=e.readUInt8(),r.thirtyseconds=e.readUInt8(),r;case 89:if(r.type="keySignature",u!=2)throw"Expected length for keySignature event is 2, got "+u;return r.key=e.readInt8(),r.scale=e.readUInt8(),r;case 127:return r.type="sequencerSpecific",r.data=e.readBytes(u),r;default:return r.type="unknownMeta",r.data=e.readBytes(u),r.metatypeByte=a,r}}else if(o==240){r.type="sysEx";var u=e.readVarInt();return r.data=e.readBytes(u),r}else if(o==247){r.type="endSysEx";var u=e.readVarInt();return r.data=e.readBytes(u),r}else throw"Unrecognised MIDI event type byte: "+o;else{var d;if((o&128)==0){if(s===null)throw"Running status byte encountered before status byte";d=o,o=s,r.running=!0}else d=e.readUInt8(),s=o;var p=o>>4;switch(r.channel=o&15,p){case 8:return r.type="noteOff",r.noteNumber=d,r.velocity=e.readUInt8(),r;case 9:var _=e.readUInt8();return r.type=_===0?"noteOff":"noteOn",r.noteNumber=d,r.velocity=_,_===0&&(r.byte9=!0),r;case 10:return r.type="noteAftertouch",r.noteNumber=d,r.amount=e.readUInt8(),r;case 11:return r.type="controller",r.controllerType=d,r.value=e.readUInt8(),r;case 12:return r.type="programChange",r.programNumber=d,r;case 13:return r.type="channelAftertouch",r.amount=d,r;case 14:return r.type="pitchBend",r.value=d+(e.readUInt8()<<7)-8192,r;default:throw"Unrecognised MIDI event type: "+p}}}}function W(t){this.buffer=t,this.bufferLen=this.buffer.length,this.pos=0}W.prototype.eof=function(){return this.pos>=this.bufferLen};W.prototype.readUInt8=function(){var t=this.buffer[this.pos];return this.pos+=1,t};W.prototype.readInt8=function(){var t=this.readUInt8();return t&128?t-256:t};W.prototype.readUInt16=function(){var t=this.readUInt8(),e=this.readUInt8();return(t<<8)+e};W.prototype.readInt16=function(){var t=this.readUInt16();return t&32768?t-65536:t};W.prototype.readUInt24=function(){var t=this.readUInt8(),e=this.readUInt8(),n=this.readUInt8();return(t<<16)+(e<<8)+n};W.prototype.readInt24=function(){var t=this.readUInt24();return t&8388608?t-16777216:t};W.prototype.readUInt32=function(){var t=this.readUInt8(),e=this.readUInt8(),n=this.readUInt8(),i=this.readUInt8();return(t<<24)+(e<<16)+(n<<8)+i};W.prototype.readBytes=function(t){var e=this.buffer.slice(this.pos,this.pos+t);return this.pos+=t,e};W.prototype.readString=function(t){var e=this.readBytes(t);return String.fromCharCode.apply(null,e)};W.prototype.readVarInt=function(){for(var t=0;!this.eof();){var e=this.readUInt8();if(e&128)t+=e&127,t<<=7;else return t+e}return t};W.prototype.readChunk=function(){var t=this.readString(4),e=this.readUInt32(),n=this.readBytes(e);return{id:t,length:e,data:n}};var cs=as;function fs(t,e){if(typeof t!="object")throw"Invalid MIDI data";e=e||{};var n=t.header||{},i=t.tracks||[],s,c=i.length,r=new j;for(us(r,n,c),s=0;s<c;s++)ls(r,i[s],e);return r.buffer}function us(t,e,n){var i=e.format==null?1:e.format,s=128;e.timeDivision?s=e.timeDivision:e.ticksPerFrame&&e.framesPerSecond?s=-(e.framesPerSecond&255)<<8|e.ticksPerFrame&255:e.ticksPerBeat&&(s=e.ticksPerBeat&32767);var c=new j;c.writeUInt16(i),c.writeUInt16(n),c.writeUInt16(s),t.writeChunk("MThd",c.buffer)}function ls(t,e,n){var i=new j,s,c=e.length,r=null;for(s=0;s<c;s++)(n.running===!1||!n.running&&!e[s].running)&&(r=null),r=hs(i,e[s],r,n.useByte9ForNoteOff);t.writeChunk("MTrk",i.buffer)}function hs(t,e,n,i){var s=e.type,c=e.deltaTime,r=e.text||"",o=e.data||[],a=null;switch(t.writeVarInt(c),s){case"sequenceNumber":t.writeUInt8(255),t.writeUInt8(0),t.writeVarInt(2),t.writeUInt16(e.number);break;case"text":t.writeUInt8(255),t.writeUInt8(1),t.writeVarInt(r.length),t.writeString(r);break;case"copyrightNotice":t.writeUInt8(255),t.writeUInt8(2),t.writeVarInt(r.length),t.writeString(r);break;case"trackName":t.writeUInt8(255),t.writeUInt8(3),t.writeVarInt(r.length),t.writeString(r);break;case"instrumentName":t.writeUInt8(255),t.writeUInt8(4),t.writeVarInt(r.length),t.writeString(r);break;case"lyrics":t.writeUInt8(255),t.writeUInt8(5),t.writeVarInt(r.length),t.writeString(r);break;case"marker":t.writeUInt8(255),t.writeUInt8(6),t.writeVarInt(r.length),t.writeString(r);break;case"cuePoint":t.writeUInt8(255),t.writeUInt8(7),t.writeVarInt(r.length),t.writeString(r);break;case"channelPrefix":t.writeUInt8(255),t.writeUInt8(32),t.writeVarInt(1),t.writeUInt8(e.channel);break;case"portPrefix":t.writeUInt8(255),t.writeUInt8(33),t.writeVarInt(1),t.writeUInt8(e.port);break;case"endOfTrack":t.writeUInt8(255),t.writeUInt8(47),t.writeVarInt(0);break;case"setTempo":t.writeUInt8(255),t.writeUInt8(81),t.writeVarInt(3),t.writeUInt24(e.microsecondsPerBeat);break;case"smpteOffset":t.writeUInt8(255),t.writeUInt8(84),t.writeVarInt(5);var u={24:0,25:32,29:64,30:96},l=e.hour&31|u[e.frameRate];t.writeUInt8(l),t.writeUInt8(e.min),t.writeUInt8(e.sec),t.writeUInt8(e.frame),t.writeUInt8(e.subFrame);break;case"timeSignature":t.writeUInt8(255),t.writeUInt8(88),t.writeVarInt(4),t.writeUInt8(e.numerator);var h=Math.floor(Math.log(e.denominator)/Math.LN2)&255;t.writeUInt8(h),t.writeUInt8(e.metronome),t.writeUInt8(e.thirtyseconds||8);break;case"keySignature":t.writeUInt8(255),t.writeUInt8(89),t.writeVarInt(2),t.writeInt8(e.key),t.writeUInt8(e.scale);break;case"sequencerSpecific":t.writeUInt8(255),t.writeUInt8(127),t.writeVarInt(o.length),t.writeBytes(o);break;case"unknownMeta":e.metatypeByte!=null&&(t.writeUInt8(255),t.writeUInt8(e.metatypeByte),t.writeVarInt(o.length),t.writeBytes(o));break;case"sysEx":t.writeUInt8(240),t.writeVarInt(o.length),t.writeBytes(o);break;case"endSysEx":t.writeUInt8(247),t.writeVarInt(o.length),t.writeBytes(o);break;case"noteOff":var d=i!==!1&&e.byte9||i&&e.velocity==0?144:128;a=d|e.channel,a!==n&&t.writeUInt8(a),t.writeUInt8(e.noteNumber),t.writeUInt8(e.velocity);break;case"noteOn":a=144|e.channel,a!==n&&t.writeUInt8(a),t.writeUInt8(e.noteNumber),t.writeUInt8(e.velocity);break;case"noteAftertouch":a=160|e.channel,a!==n&&t.writeUInt8(a),t.writeUInt8(e.noteNumber),t.writeUInt8(e.amount);break;case"controller":a=176|e.channel,a!==n&&t.writeUInt8(a),t.writeUInt8(e.controllerType),t.writeUInt8(e.value);break;case"programChange":a=192|e.channel,a!==n&&t.writeUInt8(a),t.writeUInt8(e.programNumber);break;case"channelAftertouch":a=208|e.channel,a!==n&&t.writeUInt8(a),t.writeUInt8(e.amount);break;case"pitchBend":a=224|e.channel,a!==n&&t.writeUInt8(a);var p=8192+e.value,_=p&127,T=p>>7&127;t.writeUInt8(_),t.writeUInt8(T);break;default:throw"Unrecognized event type: "+s}return a}function j(){this.buffer=[]}j.prototype.writeUInt8=function(t){this.buffer.push(t&255)};j.prototype.writeInt8=j.prototype.writeUInt8;j.prototype.writeUInt16=function(t){var e=t>>8&255,n=t&255;this.writeUInt8(e),this.writeUInt8(n)};j.prototype.writeInt16=j.prototype.writeUInt16;j.prototype.writeUInt24=function(t){var e=t>>16&255,n=t>>8&255,i=t&255;this.writeUInt8(e),this.writeUInt8(n),this.writeUInt8(i)};j.prototype.writeInt24=j.prototype.writeUInt24;j.prototype.writeUInt32=function(t){var e=t>>24&255,n=t>>16&255,i=t>>8&255,s=t&255;this.writeUInt8(e),this.writeUInt8(n),this.writeUInt8(i),this.writeUInt8(s)};j.prototype.writeInt32=j.prototype.writeUInt32;j.prototype.writeBytes=function(t){this.buffer=this.buffer.concat(Array.prototype.slice.call(t,0))};j.prototype.writeString=function(t){var e,n=t.length,i=[];for(e=0;e<n;e++)i.push(t.codePointAt(e));this.writeBytes(i)};j.prototype.writeVarInt=function(t){if(t<0)throw"Cannot write negative variable-length integer";if(t<=127)this.writeUInt8(t);else{var e=t,n=[];for(n.push(e&127),e>>=7;e;){var i=e&127|128;n.push(i),e>>=7}this.writeBytes(n.reverse())}};j.prototype.writeChunk=function(t,e){this.writeString(t),this.writeUInt32(e.length),this.writeBytes(e)};var ms=fs,ds=cs,ps=ms,dn={parseMidi:ds,writeMidi:ps},Te=V(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});function n(s,c,r){r===void 0&&(r="ticks");var o=0,a=s.length,u=a;if(a>0&&s[a-1][r]<=c)return a-1;for(;o<u;){var l=Math.floor(o+(u-o)/2),h=s[l],d=s[l+1];if(h[r]===c){for(var p=l;p<s.length;p++){var _=s[p];_[r]===c&&(l=p)}return l}else{if(h[r]<c&&d[r]>c)return l;h[r]>c?u=l:h[r]<c&&(o=l+1)}}return-1}e.search=n;function i(s,c,r){if(r===void 0&&(r="ticks"),s.length){var o=n(s,c[r],r);s.splice(o+1,0,c)}else s.push(c)}e.insert=i}),wt=V(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=new WeakMap;e.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"];var i=function(){function s(c){var r=this;this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",n.set(this,480),c&&(n.set(this,c.header.ticksPerBeat),c.tracks.forEach(function(o){return o.forEach(function(a){a.meta&&(a.type==="timeSignature"?r.timeSignatures.push({ticks:a.absoluteTime,timeSignature:[a.numerator,a.denominator]}):a.type==="setTempo"?r.tempos.push({bpm:6e7/a.microsecondsPerBeat,ticks:a.absoluteTime}):a.type==="keySignature"&&r.keySignatures.push({key:e.keySignatureKeys[a.key+7],scale:a.scale===0?"major":"minor",ticks:a.absoluteTime}))})}),c.tracks[0].forEach(function(o){o.meta&&(o.type==="trackName"?r.name=o.text:(o.type==="text"||o.type==="cuePoint"||o.type==="marker"||o.type==="lyrics")&&r.meta.push({text:o.text,ticks:o.absoluteTime,type:o.type}))}),this.update())}return s.prototype.update=function(){var c=this,r=0,o=0;this.tempos.sort(function(a,u){return a.ticks-u.ticks}),this.tempos.forEach(function(a,u){var l=u>0?c.tempos[u-1].bpm:c.tempos[0].bpm,h=a.ticks/c.ppq-o,d=60/l*h;a.time=d+r,r=a.time,o+=h}),this.timeSignatures.sort(function(a,u){return a.ticks-u.ticks}),this.timeSignatures.forEach(function(a,u){var l=u>0?c.timeSignatures[u-1]:c.timeSignatures[0],h=(a.ticks-l.ticks)/c.ppq,d=h/l.timeSignature[0]/(l.timeSignature[1]/4);l.measures=l.measures||0,a.measures=d+l.measures})},s.prototype.ticksToSeconds=function(c){var r=Te.search(this.tempos,c);if(r!==-1){var o=this.tempos[r],a=o.time,u=(c-o.ticks)/this.ppq;return a+60/o.bpm*u}else{var l=c/this.ppq;return 60/120*l}},s.prototype.ticksToMeasures=function(c){var r=Te.search(this.timeSignatures,c);if(r!==-1){var o=this.timeSignatures[r],a=(c-o.ticks)/this.ppq;return o.measures+a/(o.timeSignature[0]/o.timeSignature[1])/4}else return c/this.ppq/4},Object.defineProperty(s.prototype,"ppq",{get:function(){return n.get(this)},enumerable:!0,configurable:!0}),s.prototype.secondsToTicks=function(c){var r=Te.search(this.tempos,c,"time");if(r!==-1){var o=this.tempos[r],a=o.time,u=c-a,l=u/(60/o.bpm);return Math.round(o.ticks+l*this.ppq)}else{var h=c/(60/120);return Math.round(h*this.ppq)}},s.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map(function(c){return{bpm:c.bpm,ticks:c.ticks}}),timeSignatures:this.timeSignatures}},s.prototype.fromJSON=function(c){this.name=c.name,this.tempos=c.tempos.map(function(r){return Object.assign({},r)}),this.timeSignatures=c.timeSignatures.map(function(r){return Object.assign({},r)}),this.keySignatures=c.keySignatures.map(function(r){return Object.assign({},r)}),this.meta=c.meta.map(function(r){return Object.assign({},r)}),n.set(this,c.ppq),this.update()},s.prototype.setTempo=function(c){this.tempos=[{bpm:c,ticks:0}],this.update()},s}();e.Header=i}),Mt=gs,ys=pn,_s=bs,vs=gn;function gs(t){if(!Array.isArray(t))throw new TypeError("Expected value to be an array");return pn(t)}function pn(t){return yn(t,[])}function bs(t,e){if(!Array.isArray(t))throw new TypeError("Expected value to be an array");return gn(t,e)}function gn(t,e){if(typeof e!="number")throw new TypeError("Expected the depth to be a number");return bn(t,[],e)}function yn(t,e){for(var n=0;n<t.length;n++){var i=t[n];Array.isArray(i)?yn(i,e):e.push(i)}return e}function bn(t,e,n){n--;for(var i=0;i<t.length;i++){var s=t[i];n>-1&&Array.isArray(s)?bn(s,e,n):e.push(s)}return e}Mt.from=ys;Mt.depth=_s;Mt.fromDepth=vs;var Es=V(function(t,e){var n=J&&J.__spreadArrays||function(){for(var y=0,w=0,M=arguments.length;w<M;w++)y+=arguments[w].length;for(var R=Array(y),P=0,w=0;w<M;w++)for(var ee=arguments[w],X=0,z=ee.length;X<z;X++,P++)R[P]=ee[X];return R},i=J&&J.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0});var s=i(Mt);function c(y,w){return[{absoluteTime:y.ticks,channel:w,deltaTime:0,noteNumber:y.midi,type:"noteOn",velocity:Math.floor(y.velocity*127)},{absoluteTime:y.ticks+y.durationTicks,channel:w,deltaTime:0,noteNumber:y.midi,type:"noteOff",velocity:Math.floor(y.noteOffVelocity*127)}]}function r(y){return s.default(y.notes.map(function(w){return c(w,y.channel)}))}function o(y,w){return{absoluteTime:y.ticks,channel:w,controllerType:y.number,deltaTime:0,type:"controller",value:Math.floor(y.value*127)}}function a(y){for(var w=[],M=0;M<127;M++)y.controlChanges.hasOwnProperty(M)&&y.controlChanges[M].forEach(function(R){w.push(o(R,y.channel))});return w}function u(y,w){return{absoluteTime:y.ticks,channel:w,deltaTime:0,type:"pitchBend",value:y.value}}function l(y){var w=[];return y.pitchBends.forEach(function(M){w.push(u(M,y.channel))}),w}function h(y){return{absoluteTime:0,channel:y.channel,deltaTime:0,programNumber:y.instrument.number,type:"programChange"}}function d(y){return{absoluteTime:0,deltaTime:0,meta:!0,text:y,type:"trackName"}}function p(y){return{absoluteTime:y.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/y.bpm),type:"setTempo"}}function _(y){return{absoluteTime:y.ticks,deltaTime:0,denominator:y.timeSignature[1],meta:!0,metronome:24,numerator:y.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}function T(y){var w=wt.keySignatureKeys.indexOf(y.key);return{absoluteTime:y.ticks,deltaTime:0,key:w+7,meta:!0,scale:y.scale==="major"?0:1,type:"keySignature"}}function S(y){return{absoluteTime:y.ticks,deltaTime:0,meta:!0,text:y.text,type:y.type}}function v(y){var w={header:{format:1,numTracks:y.tracks.length+1,ticksPerBeat:y.header.ppq},tracks:n([n([{absoluteTime:0,deltaTime:0,meta:!0,text:y.header.name,type:"trackName"}],y.header.keySignatures.map(function(M){return T(M)}),y.header.meta.map(function(M){return S(M)}),y.header.tempos.map(function(M){return p(M)}),y.header.timeSignatures.map(function(M){return _(M)}))],y.tracks.map(function(M){return n([d(M.name),h(M)],r(M),a(M),l(M))}))};return w.tracks=w.tracks.map(function(M){M=M.sort(function(P,ee){return P.absoluteTime-ee.absoluteTime});var R=0;return M.forEach(function(P){P.deltaTime=P.absoluteTime-R,R=P.absoluteTime,delete P.absoluteTime}),M.push({deltaTime:0,meta:!0,type:"endOfTrack"}),M}),new Uint8Array(dn.writeMidi(w))}e.encode=v}),He=V(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},e.controlChangeIds=Object.keys(e.controlChangeNames).reduce(function(c,r){return c[e.controlChangeNames[r]]=r,c},{});var n=new WeakMap,i=new WeakMap,s=function(){function c(r,o){n.set(this,o),i.set(this,r.controllerType),this.ticks=r.absoluteTime,this.value=r.value}return Object.defineProperty(c.prototype,"number",{get:function(){return i.get(this)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"name",{get:function(){return e.controlChangeNames[this.number]?e.controlChangeNames[this.number]:null},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"time",{get:function(){var r=n.get(this);return r.ticksToSeconds(this.ticks)},set:function(r){var o=n.get(this);this.ticks=o.secondsToTicks(r)},enumerable:!0,configurable:!0}),c.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},c}();e.ControlChange=s}),Ss=V(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});function n(){return new Proxy({},{get:function(i,s){if(i[s])return i[s];if(He.controlChangeIds.hasOwnProperty(s))return i[He.controlChangeIds[s]]},set:function(i,s,c){return He.controlChangeIds.hasOwnProperty(s)?i[He.controlChangeIds[s]]=c:i[s]=c,!0}})}e.createControlChanges=n}),Is=V(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=new WeakMap,i=function(){function s(c,r){n.set(this,r),this.ticks=c.absoluteTime,this.value=c.value}return Object.defineProperty(s.prototype,"time",{get:function(){var c=n.get(this);return c.ticksToSeconds(this.ticks)},set:function(c){var r=n.get(this);this.ticks=r.secondsToTicks(c)},enumerable:!0,configurable:!0}),s.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},s}();e.PitchBend=i}),Tt=V(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"],e.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"],e.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"}}),_n=V(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=new WeakMap,i=function(){function s(c,r){if(this.number=0,n.set(this,r),this.number=0,c){var o=c.find(function(a){return a.type==="programChange"});o&&(this.number=o.programNumber)}}return Object.defineProperty(s.prototype,"name",{get:function(){return this.percussion?Tt.DrumKitByPatchID[this.number]:Tt.instrumentByPatchID[this.number]},set:function(c){var r=Tt.instrumentByPatchID.indexOf(c);r!==-1&&(this.number=r)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"family",{get:function(){return this.percussion?"drums":Tt.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"percussion",{get:function(){var c=n.get(this);return c.channel===9},enumerable:!0,configurable:!0}),s.prototype.toJSON=function(){return{family:this.family,name:this.name,number:this.number}},s.prototype.fromJSON=function(c){this.number=c.number},s}();e.Instrument=i}),ws=V(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});function n(a){var u=Math.floor(a/12)-1;return i(a)+u.toString()}function i(a){var u=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],l=a%12;return u[l]}function s(a){var u=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return u.indexOf(a)}var c=function(){var a=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,u={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return function(l){var h=a.exec(l),d=h[1],p=h[2],_=u[d.toLowerCase()];return _+(parseInt(p,10)+1)*12}}(),r=new WeakMap,o=function(){function a(u,l,h){r.set(this,h),this.midi=u.midi,this.velocity=u.velocity,this.noteOffVelocity=l.velocity,this.ticks=u.ticks,this.durationTicks=l.ticks-u.ticks}return Object.defineProperty(a.prototype,"name",{get:function(){return n(this.midi)},set:function(u){this.midi=c(u)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(u){var l=u-this.octave;this.midi+=l*12},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pitch",{get:function(){return i(this.midi)},set:function(u){this.midi=12*(this.octave+1)+s(u)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"duration",{get:function(){var u=r.get(this);return u.ticksToSeconds(this.ticks+this.durationTicks)-u.ticksToSeconds(this.ticks)},set:function(u){var l=r.get(this),h=l.secondsToTicks(this.time+u);this.durationTicks=h-this.ticks},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"time",{get:function(){var u=r.get(this);return u.ticksToSeconds(this.ticks)},set:function(u){var l=r.get(this);this.ticks=l.secondsToTicks(u)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"bars",{get:function(){var u=r.get(this);return u.ticksToMeasures(this.ticks)},enumerable:!0,configurable:!0}),a.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},a}();e.Note=o}),At=V(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=new WeakMap,i=function(){function s(c,r){var o=this;if(this.name="",this.notes=[],this.controlChanges=Ss.createControlChanges(),this.pitchBends=[],n.set(this,r),c){var a=c.find(function(S){return S.type==="trackName"});this.name=a?a.text:""}if(this.instrument=new _n.Instrument(c,this),this.channel=0,c){for(var u=c.filter(function(S){return S.type==="noteOn"}),l=c.filter(function(S){return S.type==="noteOff"}),h=function(){var S=u.shift();d.channel=S.channel;var v=l.findIndex(function(w){return w.noteNumber===S.noteNumber&&w.absoluteTime>=S.absoluteTime});if(v!==-1){var y=l.splice(v,1)[0];d.addNote({durationTicks:y.absoluteTime-S.absoluteTime,midi:S.noteNumber,noteOffVelocity:y.velocity/127,ticks:S.absoluteTime,velocity:S.velocity/127})}},d=this;u.length;)h();var p=c.filter(function(S){return S.type==="controller"});p.forEach(function(S){o.addCC({number:S.controllerType,ticks:S.absoluteTime,value:S.value/127})});var _=c.filter(function(S){return S.type==="pitchBend"});_.forEach(function(S){o.addPitchBend({ticks:S.absoluteTime,value:S.value/Math.pow(2,13)})});var T=c.find(function(S){return S.type==="endOfTrack"});this.endOfTrackTicks=T!==void 0?T.absoluteTime:void 0}}return s.prototype.addNote=function(c){var r=n.get(this),o=new ws.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},r);return Object.assign(o,c),Te.insert(this.notes,o,"ticks"),this},s.prototype.addCC=function(c){var r=n.get(this),o=new He.ControlChange({controllerType:c.number},r);return delete c.number,Object.assign(o,c),Array.isArray(this.controlChanges[o.number])||(this.controlChanges[o.number]=[]),Te.insert(this.controlChanges[o.number],o,"ticks"),this},s.prototype.addPitchBend=function(c){var r=n.get(this),o=new Is.PitchBend({},r);return Object.assign(o,c),Te.insert(this.pitchBends,o,"ticks"),this},Object.defineProperty(s.prototype,"duration",{get:function(){if(!this.notes.length)return 0;for(var c=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,r=0;r<this.notes.length-1;r++){var o=this.notes[r].time+this.notes[r].duration;c<o&&(c=o)}return c},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"durationTicks",{get:function(){if(!this.notes.length)return 0;for(var c=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,r=0;r<this.notes.length-1;r++){var o=this.notes[r].ticks+this.notes[r].durationTicks;c<o&&(c=o)}return c},enumerable:!0,configurable:!0}),s.prototype.fromJSON=function(c){var r=this;this.name=c.name,this.channel=c.channel,this.instrument=new _n.Instrument(void 0,this),this.instrument.fromJSON(c.instrument),c.endOfTrackTicks!==void 0&&(this.endOfTrackTicks=c.endOfTrackTicks);for(var o in c.controlChanges)c.controlChanges[o]&&c.controlChanges[o].forEach(function(a){r.addCC({number:a.number,ticks:a.ticks,value:a.value})});c.notes.forEach(function(a){r.addNote({durationTicks:a.durationTicks,midi:a.midi,ticks:a.ticks,velocity:a.velocity})})},s.prototype.toJSON=function(){for(var c={},r=0;r<127;r++)this.controlChanges.hasOwnProperty(r)&&(c[r]=this.controlChanges[r].map(function(a){return a.toJSON()}));var o={channel:this.channel,controlChanges:c,pitchBends:this.pitchBends.map(function(a){return a.toJSON()}),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map(function(a){return a.toJSON()})};return this.endOfTrackTicks!==void 0&&(o.endOfTrackTicks=this.endOfTrackTicks),o},s}();e.Track=i}),Ms=V(function(t,e){var n=J&&J.__awaiter||function(a,u,l,h){function d(p){return p instanceof l?p:new l(function(_){_(p)})}return new(l||(l=Promise))(function(p,_){function T(y){try{v(h.next(y))}catch(w){_(w)}}function S(y){try{v(h.throw(y))}catch(w){_(w)}}function v(y){y.done?p(y.value):d(y.value).then(T,S)}v((h=h.apply(a,u||[])).next())})},i=J&&J.__generator||function(a,u){var l={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},h,d,p,_;return _={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function T(v){return function(y){return S([v,y])}}function S(v){if(h)throw new TypeError("Generator is already executing.");for(;l;)try{if(h=1,d&&(p=v[0]&2?d.return:v[0]?d.throw||((p=d.return)&&p.call(d),0):d.next)&&!(p=p.call(d,v[1])).done)return p;switch(d=0,p&&(v=[v[0]&2,p.value]),v[0]){case 0:case 1:p=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,d=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(p=l.trys,!(p=p.length>0&&p[p.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!p||v[1]>p[0]&&v[1]<p[3])){l.label=v[1];break}if(v[0]===6&&l.label<p[1]){l.label=p[1],p=v;break}if(p&&l.label<p[2]){l.label=p[2],l.ops.push(v);break}p[2]&&l.ops.pop(),l.trys.pop();continue}v=u.call(a,l)}catch(y){v=[6,y],d=0}finally{h=p=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function a(u){var l=this,h=null;u&&(u instanceof ArrayBuffer&&(u=new Uint8Array(u)),h=dn.parseMidi(u),h.tracks.forEach(function(d){var p=0;d.forEach(function(_){p+=_.deltaTime,_.absoluteTime=p})}),h.tracks=o(h.tracks)),this.header=new wt.Header(h),this.tracks=[],u&&(this.tracks=h.tracks.map(function(d){return new At.Track(d,l.header)}),h.header.format===1&&this.tracks[0].duration===0&&this.tracks.shift())}return a.fromUrl=function(u){return n(this,void 0,void 0,function(){var l,h;return i(this,function(d){switch(d.label){case 0:return[4,fetch(u)];case 1:return l=d.sent(),l.ok?[4,l.arrayBuffer()]:[3,3];case 2:return h=d.sent(),[2,new a(h)];case 3:throw new Error("could not load "+u)}})})},Object.defineProperty(a.prototype,"name",{get:function(){return this.header.name},set:function(u){this.header.name=u},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"duration",{get:function(){var u=this.tracks.map(function(l){return l.duration});return Math.max.apply(Math,u)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"durationTicks",{get:function(){var u=this.tracks.map(function(l){return l.durationTicks});return Math.max.apply(Math,u)},enumerable:!0,configurable:!0}),a.prototype.addTrack=function(){var u=new At.Track(void 0,this.header);return this.tracks.push(u),u},a.prototype.toArray=function(){return Es.encode(this)},a.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map(function(u){return u.toJSON()})}},a.prototype.fromJSON=function(u){var l=this;this.header=new wt.Header,this.header.fromJSON(u.header),this.tracks=u.tracks.map(function(h){var d=new At.Track(void 0,l.header);return d.fromJSON(h),d})},a.prototype.clone=function(){var u=new a;return u.fromJSON(this.toJSON()),u},a}();e.Midi=s;var c=At;e.Track=c.Track;var r=wt;e.Header=r.Header;function o(a){for(var u=[],l=0;l<a.length;l++)for(var h=u.length,d=new Map,p=Array(16).fill(0),_=0,T=a[l];_<T.length;_++){var S=T[_],v=h,y=S.channel;if(y!==void 0){S.type==="programChange"&&(p[y]=S.programNumber);var w=p[y],M=w+" "+y;d.has(M)?v=d.get(M):(v=h+d.size,d.set(M,v))}u[v]||u.push([]),u[v].push(S)}return u}}),vn=Ms.Midi;var Ts=V(function(t,e){(function(n,i){t.exports=i()})(J,function(){var n=Object.freeze({__proto__:null,blackman:function(f){let m=new Float32Array(f),g=2*Math.PI/(f-1),b=2*g;for(let E=0;E<f/2;E++)m[E]=.42-.5*Math.cos(E*g)+.08*Math.cos(E*b);for(let E=Math.ceil(f/2);E>0;E--)m[f-E]=m[E-1];return m},sine:function(f){let m=Math.PI/(f-1),g=new Float32Array(f);for(let b=0;b<f;b++)g[b]=Math.sin(m*b);return g},hanning:function(f){let m=new Float32Array(f);for(let g=0;g<f;g++)m[g]=.5-.5*Math.cos(2*Math.PI*g/(f-1));return m},hamming:function(f){let m=new Float32Array(f);for(let g=0;g<f;g++)m[g]=.54-.46*Math.cos(2*Math.PI*(g/f-1));return m}});let i={};function s(f){for(;f%2==0&&f>1;)f/=2;return f===1}function c(f,m){if(m!=="rect"){if(m!==""&&m||(m="hanning"),i[m]||(i[m]={}),!i[m][f.length])try{i[m][f.length]=n[m](f.length)}catch(g){throw new Error("Invalid windowing function")}f=function(g,b){let E=[];for(let I=0;I<Math.min(g.length,b.length);I++)E[I]=g[I]*b[I];return E}(f,i[m][f.length])}return f}function r(f,m,g){let b=new Float32Array(f);for(var E=0;E<b.length;E++)b[E]=E*m/g,b[E]=13*Math.atan(b[E]/1315.8)+3.5*Math.atan(Math.pow(b[E]/7518,2));return b}function o(f){return Float32Array.from(f)}function a(f){return 1125*Math.log(1+f/700)}function u(f,m,g){let b=new Float32Array(f+2),E=new Float32Array(f+2),I=m/2,k=a(0),C=(a(I)-k)/(f+1),A=Array(f+2);for(let O=0;O<b.length;O++)b[O]=O*C,E[O]=(G=b[O],700*(Math.exp(G/1125)-1)),A[O]=Math.floor((g+1)*E[O]/m);var G,D=Array(f);for(let O=0;O<D.length;O++){D[O]=Array.apply(null,new Array(g/2+1)).map(Number.prototype.valueOf,0);for(let H=A[O];H<A[O+1];H++)D[O][H]=(H-A[O])/(A[O+1]-A[O]);for(let H=A[O+1];H<A[O+2];H++)D[O][H]=(A[O+2]-H)/(A[O+2]-A[O+1])}return D}function l(f,m,g,b=5,E=2,I=!0,k=440){var C=Math.floor(g/2)+1,A=new Array(g).fill(0).map((F,q)=>f*function(Y,se){return Math.log2(16*Y/se)}(m*q/g,k));A[0]=A[1]-1.5*f;var G,D,O,H=A.slice(1).map((F,q)=>Math.max(F-A[q]),1).concat([1]),fe=Math.round(f/2),he=new Array(f).fill(0).map((F,q)=>A.map(Y=>(10*f+fe+Y-q)%f-fe)),te=he.map((F,q)=>F.map((Y,se)=>Math.exp(-.5*Math.pow(2*he[q][se]/H[se],2))));if(D=(G=te)[0].map(()=>0),O=G.reduce((F,q)=>(q.forEach((Y,se)=>{F[se]+=Math.pow(Y,2)}),F),D).map(Math.sqrt),te=G.map((F,q)=>F.map((Y,se)=>Y/(O[se]||1))),E){var Ct=A.map(F=>Math.exp(-.5*Math.pow((F/f-b)/E,2)));te=te.map(F=>F.map((q,Y)=>q*Ct[Y]))}return I&&(te=[...te.slice(3),...te.slice(0,3)]),te.map(F=>F.slice(0,C))}function h(f,m){for(var g=0,b=0,E=0;E<m.length;E++)g+=Math.pow(E,f)*Math.abs(m[E]),b+=m[E];return g/b}function d(f){if(typeof f.ampSpectrum!="object"||typeof f.barkScale!="object")throw new TypeError;var m=24,g=new Float32Array(m),b=0,E=f.ampSpectrum,I=new Int32Array(25);I[0]=0;var k=f.barkScale[E.length-1]/m,C=1;for(let A=0;A<E.length;A++)for(;f.barkScale[A]>k;)I[C++]=A,k=C*f.barkScale[E.length-1]/m;I[24]=E.length-1;for(let A=0;A<m;A++){let G=0;for(let D=I[A];D<I[A+1];D++)G+=E[D];g[A]=Math.pow(G,.23)}for(let A=0;A<g.length;A++)b+=g[A];return{specific:g,total:b}}function p(){if(typeof arguments[0].ampSpectrum!="object")throw new TypeError;for(var f=new Float32Array(arguments[0].ampSpectrum.length),m=0;m<f.length;m++)f[m]=Math.pow(arguments[0].ampSpectrum[m],2);return f}var _=null,T=function(f,m){var g=f.length;return m=m||2,_&&_[g]||function(b){(_=_||{})[b]=new Array(b*b);for(var E=Math.PI/b,I=0;I<b;I++)for(var k=0;k<b;k++)_[b][k+I*b]=Math.cos(E*(k+.5)*I)}(g),f.map(function(){return 0}).map(function(b,E){return m*f.reduce(function(I,k,C,A){return I+k*_[g][C+E*g]},0)})},S=Object.freeze({__proto__:null,buffer:function(f){return f.signal},rms:function(f){if(typeof f.signal!="object")throw new TypeError;for(var m=0,g=0;g<f.signal.length;g++)m+=Math.pow(f.signal[g],2);return m/=f.signal.length,m=Math.sqrt(m)},energy:function(){if(typeof arguments[0].signal!="object")throw new TypeError;for(var f=0,m=0;m<arguments[0].signal.length;m++)f+=Math.pow(Math.abs(arguments[0].signal[m]),2);return f},complexSpectrum:function(f){return f.complexSpectrum},spectralSlope:function(f){if(typeof f.ampSpectrum!="object")throw new TypeError;let m=0,g=0,b=new Float32Array(f.ampSpectrum.length),E=0,I=0;for(var k=0;k<f.ampSpectrum.length;k++){m+=f.ampSpectrum[k];let C=k*f.sampleRate/f.bufferSize;b[k]=C,E+=C*C,g+=C,I+=C*f.ampSpectrum[k]}return(f.ampSpectrum.length*I-g*m)/(m*(E-Math.pow(g,2)))},spectralCentroid:function(){if(typeof arguments[0].ampSpectrum!="object")throw new TypeError;return h(1,arguments[0].ampSpectrum)},spectralRolloff:function(){if(typeof arguments[0].ampSpectrum!="object")throw new TypeError;for(var f=arguments[0].ampSpectrum,m=arguments[0].sampleRate/(2*(f.length-1)),g=0,b=0;b<f.length;b++)g+=f[b];for(var E=.99*g,I=f.length-1;g>E&&I>=0;)g-=f[I],--I;return(I+1)*m},spectralFlatness:function(){if(typeof arguments[0].ampSpectrum!="object")throw new TypeError;for(var f=0,m=0,g=0;g<arguments[0].ampSpectrum.length;g++)f+=Math.log(arguments[0].ampSpectrum[g]),m+=arguments[0].ampSpectrum[g];return Math.exp(f/arguments[0].ampSpectrum.length)*arguments[0].ampSpectrum.length/m},spectralSpread:function(f){if(typeof f.ampSpectrum!="object")throw new TypeError;return Math.sqrt(h(2,f.ampSpectrum)-Math.pow(h(1,f.ampSpectrum),2))},spectralSkewness:function(f){if(typeof f.ampSpectrum!="object")throw new TypeError;var m=h(1,f.ampSpectrum),g=h(2,f.ampSpectrum),b=h(3,f.ampSpectrum);return(2*Math.pow(m,3)-3*m*g+b)/Math.pow(Math.sqrt(g-Math.pow(m,2)),3)},spectralKurtosis:function(){if(typeof arguments[0].ampSpectrum!="object")throw new TypeError;var f=arguments[0].ampSpectrum,m=h(1,f),g=h(2,f),b=h(3,f),E=h(4,f),I=-3*Math.pow(m,4)+6*m*g-4*m*b+E,k=Math.pow(Math.sqrt(g-Math.pow(m,2)),4);return I/k},amplitudeSpectrum:function(f){return f.ampSpectrum},zcr:function(){if(typeof arguments[0].signal!="object")throw new TypeError;for(var f=0,m=1;m<arguments[0].signal.length;m++)(arguments[0].signal[m-1]>=0&&arguments[0].signal[m]<0||arguments[0].signal[m-1]<0&&arguments[0].signal[m]>=0)&&f++;return f},loudness:d,perceptualSpread:function(){if(typeof arguments[0].signal!="object")throw new TypeError;for(var f=d(arguments[0]),m=0,g=0;g<f.specific.length;g++)f.specific[g]>m&&(m=f.specific[g]);var b=Math.pow((f.total-m)/f.total,2);return b},perceptualSharpness:function(){if(typeof arguments[0].signal!="object")throw new TypeError;for(var f=d(arguments[0]),m=f.specific,g=0,b=0;b<m.length;b++)g+=b<15?(b+1)*m[b+1]:.066*Math.exp(.171*(b+1));return g*=.11/f.total},powerSpectrum:p,mfcc:function(f){if(typeof f.ampSpectrum!="object")throw new TypeError("Valid ampSpectrum is required to generate MFCC");if(typeof f.melFilterBank!="object")throw new TypeError("Valid melFilterBank is required to generate MFCC");let m=Math.min(40,Math.max(1,f.numberOfMFCCCoefficients||13)),g=p(f),b=f.melFilterBank.length,E=Array(b);if(b<m)throw new Error("Insufficient filter bank for requested number of coefficients");let I=new Float32Array(b);for(let C=0;C<I.length;C++){E[C]=new Float32Array(f.bufferSize/2),I[C]=0;for(let A=0;A<f.bufferSize/2;A++)E[C][A]=f.melFilterBank[C][A]*g[A],I[C]+=E[C][A];I[C]=Math.log(I[C]+1)}let k=Array.prototype.slice.call(I);return T(k).slice(0,m)},chroma:function(f){if(typeof f.ampSpectrum!="object")throw new TypeError("Valid ampSpectrum is required to generate chroma");if(typeof f.chromaFilterBank!="object")throw new TypeError("Valid chromaFilterBank is required to generate chroma");var m=f.chromaFilterBank.map((b,E)=>f.ampSpectrum.reduce((I,k,C)=>I+k*b[C],0)),g=Math.max(...m);return g?m.map(b=>b/g):m},spectralFlux:function(f){if(typeof f.signal!="object"||typeof f.previousSignal!="object")throw new TypeError;let m=0;for(let g=-f.bufferSize/2;g<signal.length/2-1;g++)x=Math.abs(f.signal[g])-Math.abs(f.previousSignal[g]),m+=(x+Math.abs(x))/2;return m}});function v(f){if(Array.isArray(f)){for(var m=0,g=Array(f.length);m<f.length;m++)g[m]=f[m];return g}return Array.from(f)}var y={},w={},M={bitReverseArray:function(f){if(y[f]===void 0){for(var m=(f-1).toString(2).length,g="0".repeat(m),b={},E=0;E<f;E++){var I=E.toString(2);I=g.substr(I.length)+I,I=[].concat(v(I)).reverse().join(""),b[E]=parseInt(I,2)}y[f]=b}return y[f]},multiply:function(f,m){return{real:f.real*m.real-f.imag*m.imag,imag:f.real*m.imag+f.imag*m.real}},add:function(f,m){return{real:f.real+m.real,imag:f.imag+m.imag}},subtract:function(f,m){return{real:f.real-m.real,imag:f.imag-m.imag}},euler:function(f,m){var g=-2*Math.PI*f/m;return{real:Math.cos(g),imag:Math.sin(g)}},conj:function(f){return f.imag*=-1,f},constructComplexArray:function(f){var m={};m.real=f.real===void 0?f.slice():f.real.slice();var g=m.real.length;return w[g]===void 0&&(w[g]=Array.apply(null,Array(g)).map(Number.prototype.valueOf,0)),m.imag=w[g].slice(),m}},R=function(f){var m={};f.real===void 0||f.imag===void 0?m=M.constructComplexArray(f):(m.real=f.real.slice(),m.imag=f.imag.slice());var g=m.real.length,b=Math.log2(g);if(Math.round(b)!=b)throw new Error("Input size must be a power of 2.");if(m.real.length!=m.imag.length)throw new Error("Real and imaginary components must have the same length.");for(var E=M.bitReverseArray(g),I={real:[],imag:[]},k=0;k<g;k++)I.real[E[k]]=m.real[k],I.imag[E[k]]=m.imag[k];for(var C=0;C<g;C++)m.real[C]=I.real[C],m.imag[C]=I.imag[C];for(var A=1;A<=b;A++)for(var G=Math.pow(2,A),D=0;D<G/2;D++)for(var O=M.euler(D,G),H=0;H<g/G;H++){var fe=G*H+D,he=G*H+D+G/2,te={real:m.real[fe],imag:m.imag[fe]},Ct={real:m.real[he],imag:m.imag[he]},F=M.multiply(O,Ct),q=M.subtract(te,F);m.real[he]=q.real,m.imag[he]=q.imag;var Y=M.add(F,te);m.real[fe]=Y.real,m.imag[fe]=Y.imag}return m},P=R;class ee{constructor(m,g){if(this._m=g,!m.audioContext)throw this._m.errors.noAC;if(m.bufferSize&&!s(m.bufferSize))throw this._m._errors.notPow2;if(!m.source)throw this._m._errors.noSource;this._m.audioContext=m.audioContext,this._m.bufferSize=m.bufferSize||this._m.bufferSize||256,this._m.hopSize=m.hopSize||this._m.hopSize||this._m.bufferSize,this._m.sampleRate=m.sampleRate||this._m.audioContext.sampleRate||44100,this._m.callback=m.callback,this._m.windowingFunction=m.windowingFunction||"hanning",this._m.featureExtractors=S,this._m.EXTRACTION_STARTED=m.startImmediately||!1,this._m.channel=typeof m.channel=="number"?m.channel:0,this._m.inputs=m.inputs||1,this._m.outputs=m.outputs||1,this._m.numberOfMFCCCoefficients=m.numberOfMFCCCoefficients||this._m.numberOfMFCCCoefficients||13,this._m.spn=this._m.audioContext.createScriptProcessor(this._m.bufferSize,this._m.inputs,this._m.outputs),this._m.spn.connect(this._m.audioContext.destination),this._m._featuresToExtract=m.featureExtractors||[],this._m.barkScale=r(this._m.bufferSize,this._m.sampleRate,this._m.bufferSize),this._m.melFilterBank=u(Math.max(this._m.melBands,this._m.numberOfMFCCCoefficients),this._m.sampleRate,this._m.bufferSize),this._m.inputData=null,this._m.previousInputData=null,this._m.frame=null,this._m.previousFrame=null,this.setSource(m.source),this._m.spn.onaudioprocess=b=>{if(this._m.inputData!==null&&(this._m.previousInputData=this._m.inputData),this._m.inputData=b.inputBuffer.getChannelData(this._m.channel),this._m.previousInputData)(E=new Float32Array(this._m.previousInputData.length+this._m.inputData.length-this._m.hopSize)).set(this._m.previousInputData.slice(this._m.hopSize)),E.set(this._m.inputData,this._m.previousInputData.length-this._m.hopSize);else var E=this._m.inputData;(function(I,k,C){if(I.length<k)throw new Error("Buffer is too short for frame length");if(C<1)throw new Error("Hop length cannot be less that 1");if(k<1)throw new Error("Frame length cannot be less that 1");let A=1+Math.floor((I.length-k)/C);return new Array(A).fill(0).map((G,D)=>I.slice(D*C,D*C+k))})(E,this._m.bufferSize,this._m.hopSize).forEach(I=>{this._m.frame=I;var k=this._m.extract(this._m._featuresToExtract,this._m.frame,this._m.previousFrame);typeof this._m.callback=="function"&&this._m.EXTRACTION_STARTED&&this._m.callback(k),this._m.previousFrame=this._m.frame})}}start(m){this._m._featuresToExtract=m||this._m._featuresToExtract,this._m.EXTRACTION_STARTED=!0}stop(){this._m.EXTRACTION_STARTED=!1}setSource(m){this._m.source&&this._m.source.disconnect(this._m.spn),this._m.source=m,this._m.source.connect(this._m.spn)}setChannel(m){m<=this._m.inputs?this._m.channel=m:console.error(`Channel ${m} does not exist. Make sure you've provided a value for 'inputs' that is greater than ${m} when instantiating the MeydaAnalyzer`)}get(m){return this._m.inputData?this._m.extract(m||this._m._featuresToExtract,this._m.inputData,this._m.previousInputData):null}}var X={audioContext:null,spn:null,bufferSize:512,sampleRate:44100,melBands:26,chromaBands:12,callback:null,windowingFunction:"hanning",featureExtractors:S,EXTRACTION_STARTED:!1,numberOfMFCCCoefficients:13,_featuresToExtract:[],windowing:c,_errors:{notPow2:new Error("Meyda: Buffer size must be a power of 2, e.g. 64 or 512"),featureUndef:new Error("Meyda: No features defined."),invalidFeatureFmt:new Error("Meyda: Invalid feature format"),invalidInput:new Error("Meyda: Invalid input."),noAC:new Error("Meyda: No AudioContext specified."),noSource:new Error("Meyda: No source node specified.")},createMeydaAnalyzer:function(f){return new ee(f,Object.assign({},X))},listAvailableFeatureExtractors:function(){return Object.keys(this.featureExtractors)},extract:function(f,m,g){if(!m)throw this._errors.invalidInput;if(typeof m!="object")throw this._errors.invalidInput;if(!f)throw this._errors.featureUndef;if(!s(m.length))throw this._errors.notPow2;this.barkScale!==void 0&&this.barkScale.length==this.bufferSize||(this.barkScale=r(this.bufferSize,this.sampleRate,this.bufferSize)),this.melFilterBank!==void 0&&this.barkScale.length==this.bufferSize&&this.melFilterBank.length==this.melBands||(this.melFilterBank=u(Math.max(this.melBands,this.numberOfMFCCCoefficients),this.sampleRate,this.bufferSize)),this.chromaFilterBank!==void 0&&this.chromaFilterBank.length==this.chromaBands||(this.chromaFilterBank=l(this.chromaBands,this.sampleRate,this.bufferSize)),m.buffer===void 0?this.signal=o(m):this.signal=m;let b=z(m,this.windowingFunction,this.bufferSize);if(this.signal=b.windowedSignal,this.complexSpectrum=b.complexSpectrum,this.ampSpectrum=b.ampSpectrum,g){let I=z(g,this.windowingFunction,this.bufferSize);this.previousSignal=I.windowedSignal,this.previousComplexSpectrum=I.complexSpectrum,this.previousAmpSpectrum=I.ampSpectrum}let E=I=>this.featureExtractors[I]({ampSpectrum:this.ampSpectrum,chromaFilterBank:this.chromaFilterBank,complexSpectrum:this.complexSpectrum,signal:this.signal,bufferSize:this.bufferSize,sampleRate:this.sampleRate,barkScale:this.barkScale,melFilterBank:this.melFilterBank,previousSignal:this.previousSignal,previousAmpSpectrum:this.previousAmpSpectrum,previousComplexSpectrum:this.previousComplexSpectrum,numberOfMFCCCoefficients:this.numberOfMFCCCoefficients});if(typeof f=="object")return f.reduce((I,k)=>Object.assign({},I,{[k]:E(k)}),{});if(typeof f=="string")return E(f);throw this._errors.invalidFeatureFmt}},z=function(f,m,g){var b={};f.buffer===void 0?b.signal=o(f):b.signal=f,b.windowedSignal=c(b.signal,m),b.complexSpectrum=P(b.windowedSignal),b.ampSpectrum=new Float32Array(g/2);for(var E=0;E<g/2;E++)b.ampSpectrum[E]=Math.sqrt(Math.pow(b.complexSpectrum.real[E],2)+Math.pow(b.complexSpectrum.imag[E],2));return b};return typeof window!="undefined"&&(window.Meyda=X),X})}),En=Ts;var As=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],ks=L(N(t=>fn(t)),B(),As),Sn=L(st({raw:N(t=>t),tonicMidi:N(t=>It(t.tonic+"2")%12),majorKey:N(t=>t.tonic),minorKey:N(t=>mn(t.minorRelative).toLowerCase()),normalizedMidis:N(t=>L(N(e=>It(e+"2")%12),B(),t.scale))}),B(),ks),In=t=>{let e=L(Re(N(s=>t[s]?s:null),ot(s=>s!==null)),B(),$t(12)),n=L(Re(N(s=>Zt(new Set(s.normalizedMidis),new Set(e))),N(s=>Array.from(s))),B(),Sn),i=L(st({majorKey:N(s=>s[0].majorKey),minorKey:N(s=>s[0].minorKey),normalizedMidis:N(s=>s[0].normalizedMidis),common:N(s=>s[1]),similarity:N(s=>s[1].length/e.length+(e.includes(s[0].tonicMidi)?.1:0))}),B(),Pr(Sn,n));return i=i.sort((s,c)=>c.similarity-s.similarity),i},Ae=[...Vr(!1,12)],ou=[...we(12,at([!0,!1],[.5,.5]))],wn=t=>{let n=new vn(t).tracks;n.sort((c,r)=>r.notes.length-c.notes.length);let i=n[0],s=L(N(c=>c[0]%12),B(),we(7,Qt(i.notes.map(c=>c.midi))));return Array.from(new Set(s))},xs=()=>{try{return new AudioContext}catch{return new window.webkitAudioContext}},Cs=async(t,e)=>{try{return await t.decodeAudioData(e)}catch{return new Promise((n,i)=>{t.decodeAudioData(e,n,i)})}},Os=t=>Math.pow(2,Math.round(Math.log(t)/Math.log(2))),Mn=async t=>{let e=1,n=xs(),i=await Cs(n,t),s=i.getChannelData(0),c=Os(i.sampleRate/e),r=Math.floor(s.length/c),o=L(N(u=>En.extract("chroma",s.slice(u*c,(u+1)*c))),B(),$t(r)),a=L(N(u=>u.indexOf(1)),B(),o);return L(N(u=>u[0]),B(),L(N(u=>u),B(),Qt(a)).sort((u,l)=>l[1]-u[1])).slice(0,7)};var Ns=(t,e)=>{let i=t.views.viewConfig.deref();return["div.flex",["div",e.majorKey,i.showSmall?["small"," maj"]:[]],i.showMinor?["div",["span.text-red-600","  "],e.minorKey,i.showSmall?["small"," min"]:[]]:[]]},Ds=(t,e)=>{let i=t.views.size.deref(),s=Math.min(400*1.1,i[0]*.9),c=.1,r=35,o={width:s,height:s/r,rx:5,fill:"#e2e2e2"};return["div",["svg",{width:s*(1+c),height:s/r},["g",["rect",o],e.common.length>0?["rect",{...o,width:(e.similarity-c)*s,fill:"#000"}]:[]]]]},Tn=t=>{let e=t.views,n=t.ui,i=In(e.keyState.deref());return["div",n.keyGroup.root,...i.map((s,c)=>["div",{...n.keyGroup.block,onmouseover:r=>{r.preventDefault(),t.bus.dispatch([Pe,s.normalizedMidis])},onmouseleave:r=>{r.preventDefault(),t.bus.dispatch([ft])}},[Ns,s],[Ds,s]])]};var kt=t=>{t.preventDefault()},Fs=(t,e)=>{kt(e);let n=e.dataTransfer.files;if(n&&n.length>0){let i=new FileReader,s=n[0];i.onload=async c=>{if(s.type==="audio/midi"){t.dispatch([le,s.name]);let r=wn(c.target.result);t.dispatch([be,Ae.map((o,a)=>!!r.includes(a))])}else if(s.type==="audio/aac"||s.type==="audio/mpeg"||s.type==="audio/wav"){t.dispatch([le,s.name]);let r=await Mn(c.target.result);t.dispatch([be,Ae.map((o,a)=>!!r.includes(a))])}else t.dispatch([pt])},i.readAsArrayBuffer(s)}},An=t=>{let e=t.bus,n=t.views,i=t.ui.fileDropZone,s=n.midiFile.deref(),c=n.size.deref(),r=Math.min(400*1.1,c[0]*.9);return["div",{...i.root,ondrop:o=>{o.target.classList.remove("nm-inset-gray-200-sm"),Fs(e,o)},ondragenter:o=>{o.target.classList.add("nm-inset-gray-200-sm"),kt(o)},ondragleave:o=>{o.target.classList.remove("nm-inset-gray-200-sm"),kt(o)},ondragover:o=>kt(o),style:{width:`${r}px`}},s]};var js={w:16,h:8,pad:2,margin:0},Rs=Dr({...js,vertical:!1}),kn=t=>{let e=t.views,n=t.ui.viewConfigToggleGroup,i=e.viewConfig.deref();return["div",Object.entries(i).map(([s,c])=>["div",n.block,[Rs,{onclick:()=>t.bus.dispatch([mt,s])},c],["span",n.caption,s]])]};var Ps=Nr({element:"h2",attribs:{class:"text-2xl font-extrabold mb-4"}}),xn=t=>()=>["div",[Ps,"OP-Z KEY FINDER"],["div.pb-4",Yr],["div.pb-4",Xr],["div.mb-4",[Qr],[Tn]],[An],["div.block",["details",["summary","View Config"],[kn]]]];var xt={id:"home",match:["home"]};var Cn={router:{useFragment:!0,defaultRouteID:xt.id,routes:[xt]},events:{[ct]:xr("debug",t=>t^1),[ye]:[(t,[e,n])=>({[$]:[Fe,["keyState",n]]})],[be]:[(t,[e,n])=>({[$]:[ue,["keyState",n]]})],[ut]:[()=>({[$]:[be,Ae]})],[lt]:[()=>({[$]:[be,[...we(12,at([!0,!1],[.5,.5]))]]})],[Pe]:[(t,[e,n])=>({[$]:[ue,["highlights",n]]})],[ft]:[()=>({[$]:[Pe,[]]})],[ht]:[()=>({[$]:[ue,["size",[window.innerWidth,window.innerHeight]]]})],[mt]:[(t,[e,n])=>({[$]:[Fe,["viewConfig",n]]})],[dt]:[(t,[e,n])=>({[$]:[[Fe,"enabledMidi"],[ue,["midiDevices",n]]]})],[le]:[(t,[e,n])=>({[$]:[[ue,["midiFile",n]]]})],[pt]:[()=>({[$]:[le,"INVALID MIDI FILE..."],[Ut]:[Ht,[500,"DROP MIDI/AUDIO FILE HERE..."],le,le]})],[qr]:[(t,[e,n])=>({[$]:[[ue,["comparison",n]]]})]},effects:{},components:{[xt.id]:xn},domRoot:"app",initialState:{enabledMidi:!1,midiDevices:[],midiFile:"DROP MIDI/AUDIO FILE HERE...",keyState:Ae,highlights:[],size:[window.innerWidth,window.innerHeight],viewConfig:{showMinor:!0,showSmall:!0},route:{},debug:1},views:{enabledMidi:"enabledMidi",midiDevices:"midiDevices",midiFile:"midiFile",keyState:"keyState",highlights:"highlights",size:"size",viewConfig:"viewConfig",json:["",t=>JSON.stringify(t,null,2)],debug:"debug"},ui:{root:{class:"clearfix flex flex-row font-sans m-0"},midiDevicesStatus:{content:[{class:"gray-500 p-1 bg-red-200 rounded-full"},{class:"gray-500 p-1 bg-green-200 rounded-full"}],dropdown:{root:{class:"ml-2 rounded-full nm-flat-gray-200 p-2 font-medium uppercase"},selection:{class:"bg-transparent font-medium uppercase"}}},toolbar:{root:{class:"my-4"},button:{class:"cursor-pointer mr-3 px-8 py-2 text-md font-medium nm-flat-gray-200 hover:nm-flat-gray-200-lg active:nm-inset-gray-200-sm rounded-full uppercase transition duration-200 ease-in-out transform"}},toggleGroup:{root:{class:""},key:{major:{class:"inline-block cursor-pointer nm-flat-gray-200 hover:nm-flat-gray-200-lg active:nm-inset-gray-200-lg rounded-full"},e:{class:"inline-block cursor-pointer nm-flat-gray-200 hover:nm-flat-gray-200-lg active:nm-inset-gray-200-lg rounded-full mr-8"},minor:{class:"inline-block cursor-pointer nm-flat-gray-200 hover:nm-flat-gray-200-lg active:nm-inset-gray-200-lg rounded-full mb-8"}}},keyGroup:{root:{class:"inline-block"},block:{class:"my-2 mr-2"}},fileDropZone:{root:{class:"mt-2 mb-8 border-dotted border-2 inline-block p-8 text-center font-medium nm-flat-gray-200-lg"}},code:{class:"m-0 ml-8 p-2 text-xs bg-gray-100 font-mono overflow-x-hidden"},column:{content:[{class:"float-left w-full m-4"},{class:"float-left w-5/6 m-4"}],debug:[{class:"float-right m-4 close"},{class:"float-right m-4 open"}]},debugToggle:{class:"toggle cursor-pointer tracking-wider"},viewConfigToggleGroup:{block:{class:"cursor-pointer my-2 flex justify-start items-center"},caption:{class:"ml-2"}}}};new Kt(Cn).start();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
//# sourceMappingURL=index.js.map
