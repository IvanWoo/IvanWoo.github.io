{
  "version": 3,
  "sources": ["../../build/_snowpack/env.js", "../../build/_snowpack/pkg/common/mixin-ad130ceb.js", "../../build/_snowpack/pkg/common/deferror-480a42fb.js", "../../build/_snowpack/pkg/common/is-array-a7fa88fb.js", "../../build/_snowpack/pkg/common/is-string-40d6c094.js", "../../build/_snowpack/pkg/common/atom-584c94cc.js", "../../build/_snowpack/pkg/common/index-6d483b49.js", "../../build/_snowpack/pkg/@thi.ng/atom.js", "../../build/_snowpack/pkg/common/constants-8dfd1542.js", "../../build/_snowpack/pkg/common/is-function-b13d3e65.js", "../../build/_snowpack/pkg/common/illegal-arguments-f9331715.js", "../../build/_snowpack/pkg/common/implements-function-c507affc.js", "../../build/_snowpack/pkg/@thi.ng/hdom.js", "../../build/_snowpack/pkg/@thi.ng/interceptors.js", "../../build/_snowpack/pkg/common/illegal-arity-eb3b66c4.js", "../../build/_snowpack/pkg/@thi.ng/router.js", "../../build/_snowpack/pkg/@thi.ng/hdom-components.js", "../../build/_snowpack/pkg/@thi.ng/transducers.js", "../../build/_snowpack/pkg/common/_commonjsHelpers-eb5a497e.js", "../../build/_snowpack/pkg/webmidi.js", "../../build/dist/events.js", "../../build/dist/components/midi-devices-status.js", "../../build/dist/components/event-link.js", "../../build/dist/components/debug-container.js", "../../build/dist/effects.js", "../../build/dist/app.js", "../../build/dist/components/button.js", "../../build/dist/components/toolbar.js", "../../build/dist/components/click-toggle.js", "../../build/dist/components/toggle-group.js", "../../build/_snowpack/pkg/@thi.ng/iterators.js", "../../build/_snowpack/pkg/@thi.ng/associative.js", "../../build/_snowpack/pkg/common/index.es-11efdcdf.js", "../../build/_snowpack/pkg/@tonaljs/key.js", "../../build/_snowpack/pkg/common/index.es-4751a9e2.js", "../../build/_snowpack/pkg/@tonaljs/note.js", "../../build/_snowpack/pkg/@tonejs/midi.js", "../../build/_snowpack/pkg/meyda.js", "../../build/dist/utils.js", "../../build/dist/components/key-group.js", "../../build/dist/components/file-drop-zone.js", "../../build/dist/components/view-config-toggle-group.js", "../../build/dist/components/home.js", "../../build/dist/routes.js", "../../build/dist/config.js", "../../build/dist/index.js"],
  "sourcesContent": ["export const MODE = \"production\";\nexport const NODE_ENV = \"production\";\nexport const SSR = false;", "/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\n\n/**\n * Class behavior mixin based on:\n * {@link http://raganwald.com/2015/06/26/decorators-in-es7.html}\n *\n * Additionally only injects/overwrites properties in target, which are\n * NOT marked with `@nomixin` (i.e. haven't set their `configurable`\n * property descriptor flag to `false`)\n *\n * @param behaviour - to mixin\n * @param sharedBehaviour -\n * @returns decorator function\n */\nconst mixin = (behaviour, sharedBehaviour = {}) => {\n    const instanceKeys = Reflect.ownKeys(behaviour);\n    const sharedKeys = Reflect.ownKeys(sharedBehaviour);\n    const typeTag = Symbol(\"isa\");\n    function _mixin(clazz) {\n        for (let key of instanceKeys) {\n            const existing = Object.getOwnPropertyDescriptor(clazz.prototype, key);\n            if (!existing || existing.configurable) {\n                Object.defineProperty(clazz.prototype, key, {\n                    value: behaviour[key],\n                    writable: true,\n                });\n            }\n            else {\n                console.log(`not patching: ${clazz.name}.${key.toString()}`);\n            }\n        }\n        Object.defineProperty(clazz.prototype, typeTag, { value: true });\n        return clazz;\n    }\n    for (let key of sharedKeys) {\n        Object.defineProperty(_mixin, key, {\n            value: sharedBehaviour[key],\n            enumerable: sharedBehaviour.propertyIsEnumerable(key),\n        });\n    }\n    Object.defineProperty(_mixin, Symbol.hasInstance, {\n        value: (x) => !!x[typeTag],\n    });\n    return _mixin;\n};\n\nexport { __decorate as _, mixin as m };\n", "const defError = (prefix, suffix = (msg) => (msg !== undefined ? \": \" + msg : \"\")) => class extends Error {\n    constructor(msg) {\n        super(prefix(msg) + suffix(msg));\n    }\n};\n\nexport { defError as d };\n", "const isArray = Array.isArray;\n\nexport { isArray as i };\n", "const isString = (x) => typeof x === \"string\";\n\nexport { isString as i };\n", "import { m as mixin, _ as __decorate } from './mixin-ad130ceb.js';\nimport { d as defError } from './deferror-480a42fb.js';\nimport { i as isArray } from './is-array-a7fa88fb.js';\nimport { i as isString } from './is-string-40d6c094.js';\n\nconst IWatchMixin = mixin({\n    addWatch(id, fn) {\n        this._watches = this._watches || {};\n        if (this._watches[id]) {\n            return false;\n        }\n        this._watches[id] = fn;\n        return true;\n    },\n    removeWatch(id) {\n        if (!this._watches)\n            return;\n        if (this._watches[id]) {\n            delete this._watches[id];\n            return true;\n        }\n        return false;\n    },\n    notifyWatches(oldState, newState) {\n        if (!this._watches)\n            return;\n        const w = this._watches;\n        for (let id in w) {\n            w[id](id, oldState, newState);\n        }\n    },\n});\n\nconst isTypedArray = (x) => x &&\n    (x instanceof Float32Array ||\n        x instanceof Float64Array ||\n        x instanceof Uint32Array ||\n        x instanceof Int32Array ||\n        x instanceof Uint8Array ||\n        x instanceof Int8Array ||\n        x instanceof Uint16Array ||\n        x instanceof Int16Array ||\n        x instanceof Uint8ClampedArray);\n\nconst IllegalStateError = defError(() => \"illegal state\");\nconst illegalState = (msg) => {\n    throw new IllegalStateError(msg);\n};\n\n/**\n * Converts the given key path to canonical form (array).\n *\n * ```\n * toPath(\"a.b.c\");\n * // [\"a\", \"b\", \"c\"]\n *\n * toPath(0)\n * // [0]\n *\n * toPath([\"a\", \"b\", \"c\"])\n * // [\"a\", \"b\", \"c\"]\n * ```\n *\n * @param path -\n */\nconst toPath = (path) => isArray(path)\n    ? path\n    : isString(path)\n        ? path.length > 0\n            ? path.split(\".\")\n            : []\n        : path != null\n            ? [path]\n            : [];\n\n/**\n * Unchecked version of {@link defGetter}.\n *\n * @remarks\n * The type parameter `T` can be used to indicate the type of the nested\n * value to be retrieved (default: `any`).\n *\n * Also see: {@link getIn}, {@link getInUnsafe}\n *\n * @example\n * ```ts\n * const g = defGetterUnsafe(\"a.b.c\");\n *\n * g({ a: { b: { c: 23} } }) // 23\n * g({ x: 23 }) // undefined\n * g() // undefined\n * ```\n *\n * @param path -\n */\nconst defGetterUnsafe = (path) => defGetter(path);\nfunction defGetter(path) {\n    const ks = toPath(path);\n    const [a, b, c, d] = ks;\n    switch (ks.length) {\n        case 0:\n            return (s) => s;\n        case 1:\n            return (s) => (s != null ? s[a] : undefined);\n        case 2:\n            return (s) => s != null ? ((s = s[a]) != null ? s[b] : undefined) : undefined;\n        case 3:\n            return (s) => s != null\n                ? (s = s[a]) != null\n                    ? (s = s[b]) != null\n                        ? s[c]\n                        : undefined\n                    : undefined\n                : undefined;\n        case 4:\n            return (s) => s != null\n                ? (s = s[a]) != null\n                    ? (s = s[b]) != null\n                        ? (s = s[c]) != null\n                            ? s[d]\n                            : undefined\n                        : undefined\n                    : undefined\n                : undefined;\n        default:\n            return (s) => {\n                const n = ks.length - 1;\n                let res = s;\n                for (let i = 0; res != null && i <= n; i++) {\n                    res = res[ks[i]];\n                }\n                return res;\n            };\n    }\n}\n\n/**\n * Composes a setter function for given nested update path. Optimized\n * fast execution paths are provided for path lengths less up to 4.\n *\n * @remarks\n * Supports both arrays and objects and creates intermediate shallow\n * copies at each level of the path. Thus provides structural sharing\n * with the original data for any branches not being updated by the\n * setter.\n *\n * The type parameter `T` can be used to indicate the type of the nested\n * value to be updated (default: `any`).\n *\n * If `path` is given as string, it will be split using `.`. Returns\n * function which accepts single object and when called, **immutably**\n * updates value at given path, i.e. produces a partial deep copy of obj\n * up until given path.\n *\n * If any intermediate key is not present in the given obj, creates a\n * plain empty object for that key and descends further.\n *\n * If `path` is an empty string or array, the returned setter will\n * simply return the new value.\n *\n * Only keys in the path will be modified, all other keys present in the\n * given object retain their original values to provide efficient\n * structural sharing / re-use.\n *\n * @example\n * ```ts\n * s = defSetterUnsafe(\"a.b.c\");\n * // or\n * s = defSetterUnsafe([\"a\", \"b\", \"c\"]);\n *\n * s({ a: { b: { c: 23} } }, 24)\n * // { a: { b: { c: 24} } }\n *\n * s({ x: 23 }, 24)\n * // { x: 23, a: { b: { c: 24 } } }\n *\n * s(null, 24)\n * // { a: { b: { c: 24 } } }\n * ```\n *\n * @example\n * ```ts\n * s = defSetterUnsafe(\"a.b.c\");\n *\n * a = { x: { y: { z: 1 } } };\n * b = s(a, 2);\n * // { x: { y: { z: 1 } }, a: { b: { c: 2 } } }\n *\n * a.x === b.x // true\n * a.x.y === b.x.y // true\n * ```\n *\n * @param path -\n */\nconst defSetterUnsafe = (path) => defSetter(path);\nfunction defSetter(path) {\n    const ks = toPath(path);\n    const [a, b, c, d] = ks;\n    switch (ks.length) {\n        case 0:\n            return (_, v) => v;\n        case 1:\n            return (s, v) => ((s = copy(s)), (s[a] = v), s);\n        case 2:\n            return (s, v) => {\n                let x;\n                s = copy(s);\n                s[a] = x = copy(s[a]);\n                x[b] = v;\n                return s;\n            };\n        case 3:\n            return (s, v) => {\n                let x, y;\n                s = copy(s);\n                s[a] = x = copy(s[a]);\n                x[b] = y = copy(x[b]);\n                y[c] = v;\n                return s;\n            };\n        case 4:\n            return (s, v) => {\n                let x, y, z;\n                s = copy(s);\n                s[a] = x = copy(s[a]);\n                x[b] = y = copy(x[b]);\n                y[c] = z = copy(y[c]);\n                z[d] = v;\n                return s;\n            };\n        default:\n            let f;\n            for (let i = ks.length; --i >= 0;) {\n                f = compS(ks[i], f);\n            }\n            return f;\n    }\n}\n/**\n * Creates a shallow copy of given array, typed array or plain object.\n *\n * @param x\n */\nconst copy = (x) => isArray(x) || isTypedArray(x) ? x.slice() : Object.assign({}, x);\n/**\n * Helper for {@link defSetter}. Returns setter for a single step.\n *\n * @param k -\n * @param f -\n *\n * @internal\n */\nconst compS = (k, f) => (s, v) => ((s = copy(s)), (s[k] = f ? f(s[k], v) : v), s);\n\n/**\n * Similar to {@link setInUnsafe}, but applies given function to current\n * path value (incl. any additional/optional arguments passed to\n * `updateIn`) and uses result as new value. Does not modify original\n * state.\n *\n * @remarks\n * Unchecked version of {@link updateIn}. The type parameter `T` can be\n * used to indicate the type of the nested value to be updated (default:\n * `any`).\n *\n * @example\n * ```ts\n * add = (x: number, y: number) => x + y;\n * updateInUnsafe({ a: { b: { c: 23 } } }, \"a.b.c\", add, 10);\n * // { a: { b: { c: 33 } } }\n *\n * // type checked\n * updateIn({ a: { b: { c: 23 } } }, [\"a\",\"b\",\"c\"], add, 10);\n * // { a: { b: { c: 33 } } }\n *\n * // type error (value at \"a.b\" is not a number)\n * updateIn({ a: { b: { c: 23 } } }, [\"a\",\"b\"], add, 10);\n * ```\n *\n * @param state - state to update\n * @param path - update path\n * @param fn - update function\n * @param args - optional args for `fn`\n */\nconst updateInUnsafe = (state, path, fn, ...args) => \n// @ts-ignore\nupdateIn(state, path, fn, ...args);\nfunction updateIn(state, path, fn, ...args) {\n    return defSetter(path)(state, \n    // @ts-ignore\n    fn.apply(null, (args.unshift(defGetter(path)(state)), args)));\n}\n\n/**\n * Unchecked version of {@link setIn}.\n *\n * @remarks\n * The type parameter `T` can be used to indicate the type of the nested\n * value to be set (default: `any`).\n *\n * @example\n * ```ts\n * setInUnsafe({}, \"a.b.c\", 23);\n * // { a: { b: { c: 23} } }\n * ```\n *\n * @param state -\n * @param path -\n */\nconst setInUnsafe = (state, path, val) => defSetter(path)(state, val);\n\n/**\n * Mutable wrapper for an (usually) immutable value. Support for\n * watches.\n */\nlet Atom = class Atom {\n    constructor(val, valid) {\n        if (valid && !valid(val)) {\n            illegalState(\"initial state value did not validate\");\n        }\n        this._value = val;\n        this.valid = valid;\n    }\n    get value() {\n        return this._value;\n    }\n    set value(val) {\n        this.reset(val);\n    }\n    deref() {\n        return this._value;\n    }\n    equiv(o) {\n        return this === o;\n    }\n    reset(val) {\n        const old = this._value;\n        if (this.valid && !this.valid(val)) {\n            return old;\n        }\n        this._value = val;\n        this.notifyWatches(old, val);\n        return val;\n    }\n    resetIn(path, val) {\n        return this.reset(setInUnsafe(this._value, path, val));\n    }\n    resetInUnsafe(path, val) {\n        return this.reset(setInUnsafe(this._value, path, val));\n    }\n    swap(fn, ...args) {\n        return this.reset(fn.apply(null, [this._value, ...args]));\n    }\n    swapIn(path, fn, ...args) {\n        return this.reset(updateInUnsafe(this._value, path, fn, ...args));\n    }\n    swapInUnsafe(path, fn, ...args) {\n        return this.reset(updateInUnsafe(this._value, path, fn, ...args));\n    }\n    // @ts-ignore: mixin\n    addWatch(id, fn) { }\n    // @ts-ignore: mixin\n    removeWatch(id) { }\n    // @ts-ignore: mixin\n    notifyWatches(old, prev) { }\n    release() {\n        delete this._watches;\n        delete this._value;\n        return true;\n    }\n};\nAtom = __decorate([\n    IWatchMixin\n], Atom);\n\nexport { Atom as A, defGetter as a, defSetter as b, defSetterUnsafe as c, defGetterUnsafe as d, setInUnsafe as s, toPath as t, updateInUnsafe as u };\n", "const OBJP = Object.getPrototypeOf({});\nconst FN = \"function\";\nconst STR = \"string\";\nconst equiv = (a, b) => {\n    let proto;\n    if (a === b) {\n        return true;\n    }\n    if (a != null) {\n        if (typeof a.equiv === FN) {\n            return a.equiv(b);\n        }\n    }\n    else {\n        return a == b;\n    }\n    if (b != null) {\n        if (typeof b.equiv === FN) {\n            return b.equiv(a);\n        }\n    }\n    else {\n        return a == b;\n    }\n    if (typeof a === STR || typeof b === STR) {\n        return false;\n    }\n    if (((proto = Object.getPrototypeOf(a)), proto == null || proto === OBJP) &&\n        ((proto = Object.getPrototypeOf(b)), proto == null || proto === OBJP)) {\n        return equivObject(a, b);\n    }\n    if (typeof a !== FN &&\n        a.length !== undefined &&\n        typeof b !== FN &&\n        b.length !== undefined) {\n        return equivArrayLike(a, b);\n    }\n    if (a instanceof Set && b instanceof Set) {\n        return equivSet(a, b);\n    }\n    if (a instanceof Map && b instanceof Map) {\n        return equivMap(a, b);\n    }\n    if (a instanceof Date && b instanceof Date) {\n        return a.getTime() === b.getTime();\n    }\n    if (a instanceof RegExp && b instanceof RegExp) {\n        return a.toString() === b.toString();\n    }\n    // NaN\n    return a !== a && b !== b;\n};\nconst equivArrayLike = (a, b, _equiv = equiv) => {\n    let l = a.length;\n    if (l === b.length) {\n        while (--l >= 0 && _equiv(a[l], b[l]))\n            ;\n    }\n    return l < 0;\n};\nconst equivSet = (a, b, _equiv = equiv) => a.size === b.size && _equiv([...a.keys()].sort(), [...b.keys()].sort());\nconst equivMap = (a, b, _equiv = equiv) => a.size === b.size && _equiv([...a].sort(), [...b].sort());\nconst equivObject = (a, b, _equiv = equiv) => {\n    if (Object.keys(a).length !== Object.keys(b).length) {\n        return false;\n    }\n    for (let k in a) {\n        if (!b.hasOwnProperty(k) || !_equiv(a[k], b[k])) {\n            return false;\n        }\n    }\n    return true;\n};\n\nexport { equivObject as a, equivArrayLike as b, equivSet as c, equivMap as d, equiv as e };\n", "import { t as toPath, d as defGetterUnsafe } from '../common/atom-584c94cc.js';\nexport { A as Atom } from '../common/atom-584c94cc.js';\nimport { e as equiv } from '../common/index-6d483b49.js';\nimport '../common/mixin-ad130ceb.js';\nimport '../common/deferror-480a42fb.js';\nimport '../common/is-array-a7fa88fb.js';\nimport '../common/is-string-40d6c094.js';\n\nlet NEXT_ID = 0;\nconst nextID = () => NEXT_ID++;\n\nfunction defViewUnsafe(parent, path, tx, lazy, equiv) {\n    return new View(parent, path, tx, lazy, equiv);\n}\n/**\n * This class implements readonly access to a deeply nested value with\n * in an Atom/Cursor. An optional transformer function can be supplied\n * at creation time to produce a derived/materialized view of the actual\n * value held in the atom.\n *\n * @remarks\n * Views can be created directly or via the {@link IViewable.addView}\n * method of the parent state. Views can be\n * {@link @thi.ng/api#IDeref.deref}'d like atoms and polled for value\n * changes using {@link IView.changed}. The transformer is only applied\n * once per value change and its result cached until the next change.\n *\n * If the optional `lazy` is true (default), the transformer will only\n * be executed with the first {@link @thi.ng/api#IDeref.deref} after\n * each value change. If `lazy` is false, the transformer function will\n * be executed immediately after a value change occurred and so can be\n * used like a watch which only triggers if there was an actual value\n * change (in contrast to normal watches, which execute with each\n * update, regardless of value change).\n *\n * Related, the actual value change predicate can be customized. If not\n * given, the default {@link @thi.ng/equiv#equiv} will be used.\n *\n * @example\n * ```ts\n * a = defAtom({ a: { b: 1 } });\n * v = defView(a, [\"a\", \"b\"], (x) => x * 10);\n *\n * v.deref()\n * // 10\n *\n * // update atom state\n * a.resetIn([\"a\", \"b\"], 2);\n * // { a: { b: 2 } }\n *\n * v.changed()\n * // true\n * v.deref()\n * // 20\n *\n * // remove view from parent state\n * v.release()\n * ```\n */\nclass View {\n    constructor(parent, path, tx, lazy = true, equiv$1 = equiv) {\n        this.parent = parent;\n        this.id = `view-${nextID()}`;\n        this.tx = tx || ((x) => x);\n        this.path = toPath(path);\n        this.isDirty = true;\n        this.isLazy = lazy;\n        const lookup = defGetterUnsafe(this.path);\n        const state = this.parent.deref();\n        this.unprocessed = state ? lookup(state) : undefined;\n        if (!lazy) {\n            this.state = this.tx(this.unprocessed);\n            this.unprocessed = undefined;\n        }\n        parent.addWatch(this.id, (_, prev, curr) => {\n            const pval = prev ? lookup(prev) : prev;\n            const val = curr ? lookup(curr) : curr;\n            if (!equiv$1(val, pval)) {\n                if (lazy) {\n                    this.unprocessed = val;\n                }\n                else {\n                    this.state = this.tx(val);\n                }\n                this.isDirty = true;\n            }\n        });\n    }\n    get value() {\n        return this.deref();\n    }\n    /**\n     * Returns view's value. If the view has a transformer, the\n     * transformed value is returned. The transformer is only run once\n     * per value change.\n     *\n     * @remarks\n     * See class comments about difference between lazy/eager behaviors.\n     */\n    deref() {\n        if (this.isDirty) {\n            if (this.isLazy) {\n                this.state = this.tx(this.unprocessed);\n                this.unprocessed = undefined;\n            }\n            this.isDirty = false;\n        }\n        return this.state;\n    }\n    /**\n     * Returns true, if the view's value has changed since last\n     * {@link @thi.ng/api#IDeref.deref}.\n     */\n    changed() {\n        return this.isDirty;\n    }\n    /**\n     * Like {@link @thi.ng/api#IDeref.deref}, but doesn't update view's\n     * cached state and dirty flag if value has changed.\n     *\n     * @remarks\n     * If there's an unprocessed value change, returns result of this\n     * sub's transformer or else the cached value.\n     *\n     * **Important:** Use this function only if the view has none or or\n     * a stateless transformer. Else might cause undefined/inconsistent\n     * behavior when calling `view` or {@link @thi.ng/api#IDeref.deref}\n     * subsequently.\n     */\n    view() {\n        return this.isDirty && this.isLazy\n            ? this.tx(this.unprocessed)\n            : this.state;\n    }\n    /**\n     * Disconnects this view from parent state, marks itself\n     * dirty/changed and sets its unprocessed raw value to `undefined`.\n     */\n    release() {\n        this.unprocessed = undefined;\n        if (!this.isLazy) {\n            this.state = this.tx(undefined);\n        }\n        this.isDirty = true;\n        return this.parent.removeWatch(this.id);\n    }\n}\n\nexport { defViewUnsafe };\n", "/**\n * Internal use only. **Do NOT use in user land code!**\n *\n * @internal\n */\nconst SEMAPHORE = Symbol();\n/**\n * No-effect placeholder function.\n */\nconst NO_OP = () => { };\n/**\n * Catch-all event ID\n */\nconst EVENT_ALL = \"*\";\n\nexport { EVENT_ALL as E, NO_OP as N, SEMAPHORE as S };\n", "const isFunction = (x) => typeof x === \"function\";\n\nexport { isFunction as i };\n", "import { d as defError } from './deferror-480a42fb.js';\n\nconst IllegalArgumentError = defError(() => \"illegal argument(s)\");\nconst illegalArgs = (msg) => {\n    throw new IllegalArgumentError(msg);\n};\n\nexport { illegalArgs as i };\n", "const implementsFunction = (x, fn) => x != null && typeof x[fn] === \"function\";\n\nexport { implementsFunction as i };\n", "import { e as equiv$1, a as equivObject, b as equivArrayLike, c as equivSet, d as equivMap } from '../common/index-6d483b49.js';\nimport { S as SEMAPHORE } from '../common/constants-8dfd1542.js';\nimport { i as isFunction } from '../common/is-function-b13d3e65.js';\nimport { i as isArray$3 } from '../common/is-array-a7fa88fb.js';\nimport { i as isString$1 } from '../common/is-string-40d6c094.js';\nimport { i as illegalArgs } from '../common/illegal-arguments-f9331715.js';\nimport { i as implementsFunction } from '../common/implements-function-c507affc.js';\nimport '../common/deferror-480a42fb.js';\n\n/**\n * Returns true iff `x` implements {@link IDeref}.\n *\n * @param x\n */\nconst isDeref = (x) => x != null && typeof x[\"deref\"] === \"function\";\n/**\n * If `x` implements {@link IDeref}, returns its wrapped value, else\n * returns `x` itself.\n *\n * @param x -\n */\nconst deref = (x) => (isDeref(x) ? x.deref() : x);\n\nconst isNotStringAndIterable = (x) => x != null &&\n    typeof x !== \"string\" &&\n    typeof x[Symbol.iterator] === \"function\";\n\nconst OBJP = Object.getPrototypeOf;\n/**\n * Similar to {@link isObject}, but also checks if prototype is that of\n * `Object` (or `null`).\n *\n * @param x -\n */\nconst isPlainObject = (x) => {\n    let p;\n    return (x != null &&\n        typeof x === \"object\" &&\n        ((p = OBJP(x)) === null || OBJP(p) === null));\n};\n\nlet _cachedFP;\nlet _cachedPath;\nlet _cachedEPC = [];\nlet _cachedPathPos = [];\nconst cachedFP = (size) => _cachedFP && _cachedFP.length >= size\n    ? _cachedFP\n    : (_cachedFP = new Int32Array(size));\nconst cachedPath = (size) => _cachedPath && _cachedPath.length >= size\n    ? _cachedPath\n    : (_cachedPath = new Int32Array(size));\nconst simpleDiff = (state, src, key, logDir, mode) => {\n    const n = src.length;\n    const linear = state.linear;\n    state.distance = n;\n    if (mode !== \"only-distance\") {\n        for (let i = 0, j = 0; i < n; i++, j += 3) {\n            linear[j] = logDir;\n            linear[j + 1] = i;\n            linear[j + 2] = src[i];\n        }\n        if (mode === \"full\") {\n            const _state = state[key];\n            for (let i = 0; i < n; i++) {\n                _state[i] = src[i];\n            }\n        }\n    }\n    return state;\n};\n/**\n * Based on \"An O(NP) Sequence Comparison Algorithm\"\" by Wu, Manber,\n * Myers and Miller.\n *\n * @remarks\n * Various optimizations, fixes & refactorings. By default uses\n * {@link @thi.ng/equiv#equiv} for equality checks.\n *\n * - {@link https://publications.mpi-cbg.de/Wu_1990_6334.pdf}\n * - {@link http://www.itu.dk/stud/speciale/bepjea/xwebtex/litt/an-onp-sequence-comparison-algorithm.pdf}\n * - {@link https://github.com/cubicdaiya/onp}\n *\n * @param a - \"old\" array\n * @param b - \"new\" array\n * @param mode - result mode\n * @param equiv - equality predicate function\n */\nconst diffArray = (a, b, mode = \"full\", equiv = equiv$1) => {\n    const state = {\n        distance: 0,\n        adds: {},\n        dels: {},\n        const: {},\n        linear: [],\n    };\n    if (a === b || (a == null && b == null)) {\n        return state;\n    }\n    else if (a == null || a.length === 0) {\n        return simpleDiff(state, b, \"adds\", 1, mode);\n    }\n    else if (b == null || b.length === 0) {\n        return simpleDiff(state, a, \"dels\", -1, mode);\n    }\n    const reverse = a.length >= b.length;\n    let _a, _b, na, nb;\n    if (reverse) {\n        _a = b;\n        _b = a;\n    }\n    else {\n        _a = a;\n        _b = b;\n    }\n    na = _a.length;\n    nb = _b.length;\n    const offset = na + 1;\n    const delta = nb - na;\n    const doff = delta + offset;\n    const size = na + nb + 3;\n    const path = cachedPath(size).fill(-1, 0, size);\n    const fp = cachedFP(size).fill(-1, 0, size);\n    const epc = _cachedEPC;\n    const pathPos = _cachedPathPos;\n    const snake = (k, p, pp) => {\n        let r, y;\n        if (p > pp) {\n            r = path[k - 1];\n            y = p;\n        }\n        else {\n            r = path[k + 1];\n            y = pp;\n        }\n        let x = y - (k - offset);\n        while (x < na && y < nb && equiv(_a[x], _b[y])) {\n            x++;\n            y++;\n        }\n        path[k] = pathPos.length / 3;\n        pathPos.push(x, y, r);\n        fp[k] = y;\n    };\n    let p = -1;\n    let k;\n    do {\n        p++;\n        for (k = -p + offset; k < doff; k++) {\n            snake(k, fp[k - 1] + 1, fp[k + 1]);\n        }\n        for (k = doff + p; k > doff; k--) {\n            snake(k, fp[k - 1] + 1, fp[k + 1]);\n        }\n        snake(doff, fp[doff - 1] + 1, fp[doff + 1]);\n    } while (fp[doff] !== nb);\n    state.distance = delta + 2 * p;\n    if (mode !== \"only-distance\") {\n        p = path[doff] * 3;\n        while (p >= 0) {\n            epc.push(p);\n            p = pathPos[p + 2] * 3;\n        }\n        if (mode === \"full\") {\n            buildFullLog(epc, pathPos, state, _a, _b, reverse);\n        }\n        else {\n            buildLinearLog(epc, pathPos, state, _a, _b, reverse, mode === \"only-distance-linear\");\n        }\n    }\n    epc.length = 0;\n    pathPos.length = 0;\n    return state;\n};\nconst buildFullLog = (epc, pathPos, state, a, b, reverse) => {\n    const linear = state.linear;\n    const _const = state.const;\n    let i = epc.length;\n    let px = 0;\n    let py = 0;\n    let adds;\n    let dels;\n    let aID;\n    let dID;\n    if (reverse) {\n        adds = state.dels;\n        dels = state.adds;\n        aID = -1;\n        dID = 1;\n    }\n    else {\n        adds = state.adds;\n        dels = state.dels;\n        aID = 1;\n        dID = -1;\n    }\n    for (; --i >= 0;) {\n        const e = epc[i];\n        const ppx = pathPos[e];\n        const ppy = pathPos[e + 1];\n        const d = ppy - ppx;\n        while (px < ppx || py < ppy) {\n            const dp = py - px;\n            if (d > dp) {\n                linear.push(aID, py, (adds[py] = b[py]));\n                py++;\n            }\n            else if (d < dp) {\n                linear.push(dID, px, (dels[px] = a[px]));\n                px++;\n            }\n            else {\n                linear.push(0, px, (_const[px] = a[px]));\n                px++;\n                py++;\n            }\n        }\n    }\n};\nconst buildLinearLog = (epc, pathPos, state, a, b, reverse, inclConst) => {\n    const linear = state.linear;\n    const aID = reverse ? -1 : 1;\n    const dID = reverse ? 1 : -1;\n    let i = epc.length, px = 0, py = 0;\n    for (; --i >= 0;) {\n        const e = epc[i];\n        const ppx = pathPos[e];\n        const ppy = pathPos[e + 1];\n        const d = ppy - ppx;\n        while (px < ppx || py < ppy) {\n            const dp = py - px;\n            if (d > dp) {\n                linear.push(aID, py, b[py]);\n                py++;\n            }\n            else if (d < dp) {\n                linear.push(dID, px, a[px]);\n                px++;\n            }\n            else {\n                inclConst && linear.push(0, px, a[px]);\n                px++;\n                py++;\n            }\n        }\n    }\n};\n\nconst diffObject = (a, b, mode = \"full\", _equiv = equiv$1) => a === b\n    ? { distance: 0 }\n    : mode === \"only-distance\"\n        ? diffObjectDist(a, b, _equiv)\n        : diffObjectFull(a, b, _equiv);\nconst diffObjectDist = (a, b, _equiv) => {\n    if (!a)\n        a = {};\n    if (!b)\n        b = {};\n    let d = 0;\n    for (let k in a) {\n        const vb = b[k];\n        (vb === undefined || !_equiv(a[k], vb)) && d++;\n    }\n    for (let k in b) {\n        !(k in a) && d++;\n    }\n    return { distance: d };\n};\nconst diffObjectFull = (a, b, _equiv) => {\n    if (!a)\n        a = {};\n    if (!b)\n        b = {};\n    let d = 0;\n    const adds = [];\n    const dels = [];\n    const edits = [];\n    for (let k in a) {\n        const vb = b[k];\n        if (vb === undefined) {\n            dels.push(k);\n            d++;\n        }\n        else if (!_equiv(a[k], vb)) {\n            edits.push(k, vb);\n            d++;\n        }\n    }\n    for (let k in b) {\n        if (!(k in a)) {\n            adds.push(k);\n            d++;\n        }\n    }\n    return { distance: d, adds, dels, edits };\n};\n\nconst isArray = Array.isArray;\nconst max = Math.max;\nconst OBJP$1 = Object.getPrototypeOf({});\nconst FN = \"function\";\nconst STR = \"string\";\n// child index tracking template buffer\nconst INDEX = (() => {\n    const res = new Array(2048);\n    for (let i = 2, n = res.length; i < n; i++) {\n        res[i] = i - 2;\n    }\n    return res;\n})();\nconst buildIndex = (n) => {\n    if (n <= INDEX.length) {\n        return INDEX.slice(0, n);\n    }\n    const res = new Array(n);\n    while (--n >= 2) {\n        res[n] = n - 2;\n    }\n    return res;\n};\n/**\n * See {@link HDOMImplementation} interface for further details.\n *\n * @param opts - hdom config options\n * @param impl - hdom implementation\n * @param parent - parent element (DOM node)\n * @param prev - previous tree\n * @param curr - current tree\n * @param child - child index\n */\nconst diffTree = (opts, impl, parent, prev, curr, child = 0) => {\n    const attribs = curr[1];\n    if (attribs.__skip) {\n        return;\n    }\n    // always replace element if __diff = false\n    if (attribs.__diff === false) {\n        releaseTree(prev);\n        impl.replaceChild(opts, parent, child, curr);\n        return;\n    }\n    const pattribs = prev[1];\n    if (pattribs && pattribs.__skip) {\n        impl.replaceChild(opts, parent, child, curr, false);\n        return;\n    }\n    // delegate to branch-local implementation\n    let _impl = attribs.__impl;\n    if (_impl && _impl !== impl) {\n        return _impl.diffTree(opts, _impl, parent, prev, curr, child);\n    }\n    const delta = diffArray(prev, curr, \"only-distance-linear\", equiv);\n    if (delta.distance === 0) {\n        return;\n    }\n    const edits = delta.linear;\n    const el = impl.getChild(parent, child);\n    let ii;\n    let status;\n    let val;\n    if (edits[0] !== 0 || prev[1].key !== attribs.key) {\n        // LOGGER.fine(\"replace:\", prev, curr);\n        releaseTree(prev);\n        impl.replaceChild(opts, parent, child, curr);\n        return;\n    }\n    if ((val = prev.__release) && val !== curr.__release) {\n        releaseTree(prev);\n    }\n    if (edits[3] !== 0) {\n        diffAttributes(impl, el, prev[1], curr[1]);\n        // if attribs changed & distance == 2 then we're done here...\n        if (delta.distance === 2) {\n            return;\n        }\n    }\n    const numEdits = edits.length;\n    const prevLength = prev.length - 1;\n    const equivKeys = extractEquivElements(edits);\n    const offsets = buildIndex(prevLength + 1);\n    for (ii = 6; ii < numEdits; ii += 3) {\n        status = edits[ii];\n        if (!status)\n            continue;\n        if (status === -1) {\n            diffDeleted(opts, impl, el, prev, curr, edits, ii, equivKeys, offsets, prevLength);\n        }\n        else {\n            diffAdded(opts, impl, el, edits, ii, equivKeys, offsets, prevLength);\n        }\n    }\n    // call __init after all children have been added/updated\n    if ((val = curr.__init) && val != prev.__init) {\n        val.apply(curr, [el, ...curr.__args]);\n    }\n};\nconst diffDeleted = (opts, impl, el, prev, curr, edits, ii, equivKeys, offsets, prevLength) => {\n    const val = edits[ii + 2];\n    if (isArray(val)) {\n        let k = val[1].key;\n        if (k !== undefined && equivKeys[k][2] !== undefined) {\n            const eq = equivKeys[k];\n            k = eq[0];\n            // LOGGER.fine(`diff equiv key @ ${k}:`, prev[k], curr[eq[2]]);\n            diffTree(opts, impl, el, prev[k], curr[eq[2]], offsets[k]);\n        }\n        else {\n            const idx = edits[ii + 1];\n            // LOGGER.fine(\"remove @\", offsets[idx], val);\n            releaseTree(val);\n            impl.removeChild(el, offsets[idx]);\n            incOffsets(offsets, prevLength, idx);\n        }\n    }\n    else if (typeof val === STR) {\n        impl.setContent(el, \"\");\n    }\n};\nconst diffAdded = (opts, impl, el, edits, ii, equivKeys, offsets, prevLength) => {\n    const val = edits[ii + 2];\n    if (typeof val === STR) {\n        impl.setContent(el, val);\n    }\n    else if (isArray(val)) {\n        const k = val[1].key;\n        if (k === undefined || equivKeys[k][0] === undefined) {\n            const idx = edits[ii + 1];\n            // LOGGER.fine(\"insert @\", offsets[idx], val);\n            impl.createTree(opts, el, val, offsets[idx]);\n            decOffsets(offsets, prevLength, idx);\n        }\n    }\n};\nconst incOffsets = (offsets, j, idx) => {\n    for (; j > idx; j--) {\n        offsets[j] = max(offsets[j] - 1, 0);\n    }\n};\nconst decOffsets = (offsets, j, idx) => {\n    for (; j >= idx; j--) {\n        offsets[j]++;\n    }\n};\n/**\n * Helper function for {@link diffTree} to compute & apply the difference\n * between a node's `prev` and `curr` attributes.\n *\n * @param impl - hdom implementation\n * @param el - DOM element\n * @param prev - previous attributes\n * @param curr - current attributes\n *\n * @internal\n */\nconst diffAttributes = (impl, el, prev, curr) => {\n    const delta = diffObject(prev, curr, \"full\", equiv$1);\n    impl.removeAttribs(el, delta.dels, prev);\n    let val = SEMAPHORE;\n    let i, e, edits;\n    for (edits = delta.edits, i = edits.length; (i -= 2) >= 0;) {\n        e = edits[i];\n        e[0] === \"o\" && e[1] === \"n\" && impl.removeAttribs(el, [e], prev);\n        e !== \"value\"\n            ? impl.setAttrib(el, e, edits[i + 1], curr)\n            : (val = edits[i + 1]);\n    }\n    for (edits = delta.adds, i = edits.length; --i >= 0;) {\n        e = edits[i];\n        e !== \"value\" ? impl.setAttrib(el, e, curr[e], curr) : (val = curr[e]);\n    }\n    val !== SEMAPHORE && impl.setAttrib(el, \"value\", val, curr);\n};\n/**\n * Recursively attempts to call the {@link ILifecycle.release} lifecycle\n * method on every element in given tree (branch), using depth-first\n * descent. Each element is checked for the presence of the `__release`\n * control attribute. If (and only if) it is set to `false`, further\n * descent into that element's branch is skipped.\n *\n * @param tree - hdom sub-tree\n *\n * @internal\n */\nconst releaseTree = (tree) => {\n    if (isArray(tree)) {\n        let x;\n        if ((x = tree[1]) && x.__release === false) {\n            return;\n        }\n        if (tree.__release) {\n            // LOGGER.fine(\"call __release\", tag);\n            tree.__release.apply(tree.__this, tree.__args);\n            delete tree.__release;\n        }\n        for (x = tree.length; --x >= 2;) {\n            releaseTree(tree[x]);\n        }\n    }\n};\nconst extractEquivElements = (edits) => {\n    let k;\n    let val;\n    let ek;\n    const equiv = {};\n    for (let i = edits.length; (i -= 3) >= 0;) {\n        val = edits[i + 2];\n        if (isArray(val) && (k = val[1].key) !== undefined) {\n            ek = equiv[k];\n            !ek && (equiv[k] = ek = [, ,]);\n            ek[edits[i] + 1] = edits[i + 1];\n        }\n    }\n    return equiv;\n};\n/**\n * Customized version {@link @thi.ng/equiv#equiv} which takes `__diff`\n * attributes into account (at any nesting level). If an hdom element's\n * attribute object contains `__diff: false`, the object will ALWAYS be\n * considered unequal, even if all other attributes in the object are\n * equivalent.\n *\n * @param a -\n * @param b -\n *\n * @internal\n */\nconst equiv = (a, b) => {\n    let proto;\n    if (a === b) {\n        return true;\n    }\n    if (a != null) {\n        if (typeof a.equiv === FN) {\n            return a.equiv(b);\n        }\n    }\n    else {\n        return a == b;\n    }\n    if (b != null) {\n        if (typeof b.equiv === FN) {\n            return b.equiv(a);\n        }\n    }\n    else {\n        return a == b;\n    }\n    if (typeof a === STR || typeof b === STR) {\n        return false;\n    }\n    if (((proto = Object.getPrototypeOf(a)), proto == null || proto === OBJP$1) &&\n        ((proto = Object.getPrototypeOf(b)), proto == null || proto === OBJP$1)) {\n        return (!(a.__diff === false || b.__diff === false) &&\n            equivObject(a, b, equiv));\n    }\n    if (typeof a !== FN &&\n        a.length !== undefined &&\n        typeof b !== FN &&\n        b.length !== undefined) {\n        return equivArrayLike(a, b, equiv);\n    }\n    if (a instanceof Set && b instanceof Set) {\n        return equivSet(a, b, equiv);\n    }\n    if (a instanceof Map && b instanceof Map) {\n        return equivMap(a, b, equiv);\n    }\n    if (a instanceof Date && b instanceof Date) {\n        return a.getTime() === b.getTime();\n    }\n    if (a instanceof RegExp && b instanceof RegExp) {\n        return a.toString() === b.toString();\n    }\n    // NaN\n    return a !== a && b !== b;\n};\n\n/** @internal */\n/** @internal */\nconst ENTITIES = {\n    \"&\": \"&amp;\",\n    \"<\": \"&lt;\",\n    \">\": \"&gt;\",\n    '\"': \"&quot;\",\n    \"'\": \"&apos;\",\n};\n/** @internal */\nconst RE_TAG = /^([^\\s\\.#]+)(?:#([^\\s\\.#]+))?(?:\\.([^\\s#]+))?$/;\n/** @internal */\nconst RE_ENTITY = new RegExp(`[${Object.keys(ENTITIES).join(\"\")}]`, \"g\");\n/** @internal */\nconst NO_SPANS = {\n    button: 1,\n    option: 1,\n    script: 1,\n    style: 1,\n    text: 1,\n    textarea: 1,\n    title: 1,\n};\nconst tagMap = (tags) => tags.split(\" \").reduce((acc, x) => ((acc[x] = true), acc), {});\n/** @internal */\n// tslint:disable-next-line\nconst SVG_TAGS = tagMap(\"animate animateColor animateMotion animateTransform circle clipPath color-profile defs desc discard ellipse feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feDropShadow feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence filter font foreignObject g image line linearGradient marker mask metadata mpath path pattern polygon polyline radialGradient rect set stop style svg switch symbol text textPath title tref tspan use view\");\n/** @internal */\n// tslint:disable-next-line\nconst VOID_TAGS = tagMap(\"area base br col command embed hr img input keygen link meta param source stop track use wbr ?xml\");\n/** @internal */\n// tslint:disable-next-line\nconst NO_CLOSE_EMPTY = tagMap(\"animate circle ellipse line path polygon polyline rect\");\n\n/**\n * Takes a space separated string of existing CSS class names and merges\n * it with `val`, which is either another string of class names, an\n * object of booleans or an `IDeref` evaluating to either. Returns\n * updated class string.\n *\n * @remarks\n * If `val` evaluates to a string, it will be appended to `existing`.\n *\n * If `val` is an object, its keys are used as class names and their\n * values indicate if the class should be added or removed from the\n * existing set.\n *\n * @example\n * ```ts\n * mergeClasses(\"foo bar\", { foo: false, baz: true })\n * // \"bar baz\"\n *\n * mergeClasses(\"foo bar\", \"baz\");\n * // \"baz\"\n * ```\n *\n * @param existing\n * @param val\n */\nconst mergeClasses = (existing, val) => {\n    val = deref(val);\n    if (val == null)\n        return existing;\n    if (isString$1(val))\n        return existing + \" \" + val;\n    const classes = new Set(existing.split(\" \"));\n    for (let id in val) {\n        deref(val[id]) ? classes.add(id) : classes.delete(id);\n    }\n    return [...classes].join(\" \");\n};\n/**\n * Takes an attrib object and optional element ID and CSS class names from Emmet-style\n * hiccup tag, then transforms and merges definitions, returns attribs.\n *\n * @param attribs\n * @param id\n * @param classes\n */\nconst mergeEmmetAttribs = (attribs, id, classes) => {\n    id && (attribs.id = id);\n    let aclass = deref(attribs.class);\n    if (classes) {\n        classes = classes.replace(/\\./g, \" \");\n        attribs.class = aclass ? mergeClasses(classes, aclass) : classes;\n    }\n    else if (aclass) {\n        attribs.class = isString$1(aclass) ? aclass : mergeClasses(\"\", aclass);\n    }\n    return attribs;\n};\n\nconst css = (rules) => {\n    let css = \"\";\n    let v;\n    for (let r in rules) {\n        v = deref(rules[r]);\n        isFunction(v) && (v = v(rules));\n        v != null && (css += `${r}:${v};`);\n    }\n    return css;\n};\n\n/**\n * Takes an arbitrary `ctx` object and array of `keys`. Attempts to call\n * `.deref()` on all given keys' values and stores result values instead\n * of original. Returns updated copy of `ctx` or original if `ctx` is\n * `null` or no keys were given.\n *\n * @param ctx - user context object\n * @param keys - keys to deref\n *\n * @internal\n */\nconst derefContext = (ctx, keys) => {\n    if (ctx == null || !keys || !keys.length)\n        return ctx;\n    const res = Object.assign({}, ctx);\n    for (let k of keys) {\n        const v = res[k];\n        implementsFunction(v, \"deref\") && (res[k] = v.deref());\n    }\n    return res;\n};\n\n/**\n * Takes an object of RDF/XML prefixes and returns formatted string for\n * the RDFa `prefix` attribute.\n *\n * @example\n * ```ts\n * import { foaf, xsd } from \"@thi.ng/prefixes\";\n *\n * formatPrefixes({ foaf, xsd })\n * // \"foaf: http://xmlns.com/foaf/0.1/ rdf: http://www.w3.org/2001/XMLSchema#\"\n * ```\n *\n * @param prefixes -\n */\nconst formatPrefixes = (prefixes) => Object.keys(prefixes)\n    .reduce((acc, k) => (acc.push(`${k}: ${prefixes[k]}`), acc), [])\n    .join(\" \");\n\nconst XML_SVG = \"http://www.w3.org/2000/svg\";\n\nconst isArray$1 = isArray$3;\nconst isNotStringAndIterable$1 = isNotStringAndIterable;\nconst isString = isString$1;\nconst maybeInitElement = (el, tree) => tree.__init && tree.__init.apply(tree.__this, [el, ...tree.__args]);\n/**\n * See {@link HDOMImplementation} interface for further details.\n *\n * @param opts - hdom config options\n * @param parent - DOM element\n * @param tree - component tree\n * @param insert - child index\n */\nconst createTree = (opts, impl, parent, tree, insert, init = true) => {\n    if (isArray$1(tree)) {\n        const tag = tree[0];\n        if (typeof tag === \"function\") {\n            return createTree(opts, impl, parent, tag.apply(null, [opts.ctx, ...tree.slice(1)]), insert);\n        }\n        const attribs = tree[1];\n        if (attribs.__impl) {\n            return attribs.__impl.createTree(opts, parent, tree, insert, init);\n        }\n        const el = impl.createElement(parent, tag, attribs, insert);\n        if (tree.length > 2) {\n            const n = tree.length;\n            for (let i = 2; i < n; i++) {\n                createTree(opts, impl, el, tree[i], undefined, init);\n            }\n        }\n        init && maybeInitElement(el, tree);\n        return el;\n    }\n    if (isNotStringAndIterable$1(tree)) {\n        const res = [];\n        for (let t of tree) {\n            res.push(createTree(opts, impl, parent, t, insert, init));\n        }\n        return res;\n    }\n    if (tree == null) {\n        return parent;\n    }\n    return impl.createTextElement(parent, tree);\n};\n/**\n * See {@link HDOMImplementation} interface for further details.\n *\n * @param opts - hdom config options\n * @param parent - DOM element\n * @param tree - component tree\n * @param index - child index\n */\nconst hydrateTree = (opts, impl, parent, tree, index = 0) => {\n    if (isArray$1(tree)) {\n        const el = impl.getChild(parent, index);\n        if (typeof tree[0] === \"function\") {\n            hydrateTree(opts, impl, parent, tree[0].apply(null, [opts.ctx, ...tree.slice(1)]), index);\n        }\n        const attribs = tree[1];\n        if (attribs.__impl) {\n            return attribs.__impl.hydrateTree(opts, parent, tree, index);\n        }\n        maybeInitElement(el, tree);\n        for (let a in attribs) {\n            a[0] === \"o\" && a[1] === \"n\" && impl.setAttrib(el, a, attribs[a]);\n        }\n        for (let n = tree.length, i = 2; i < n; i++) {\n            hydrateTree(opts, impl, el, tree[i], i - 2);\n        }\n    }\n    else if (isNotStringAndIterable$1(tree)) {\n        for (let t of tree) {\n            hydrateTree(opts, impl, parent, t, index);\n            index++;\n        }\n    }\n};\n/**\n * Creates a new DOM element of type `tag` with optional `attribs`. If\n * `parent` is not `null`, the new element will be inserted as child at\n * given `insert` index. If `insert` is missing, the element will be\n * appended to the `parent`'s list of children. Returns new DOM node.\n *\n * If `tag` is a known SVG element name, the new element will be created\n * with the proper SVG XML namespace.\n *\n * @param parent - DOM element\n * @param tag - component tree\n * @param attribs - attributes\n * @param insert - child index\n */\nconst createElement = (parent, tag, attribs, insert) => {\n    const el = SVG_TAGS[tag]\n        ? document.createElementNS(XML_SVG, tag)\n        : document.createElement(tag);\n    attribs && setAttribs(el, attribs);\n    return addChild(parent, el, insert);\n};\nconst createTextElement = (parent, content, insert) => addChild(parent, document.createTextNode(content), insert);\nconst addChild = (parent, child, insert) => parent\n    ? insert === undefined\n        ? parent.appendChild(child)\n        : parent.insertBefore(child, parent.children[insert])\n    : child;\nconst getChild = (parent, child) => parent.children[child];\nconst replaceChild = (opts, impl, parent, child, tree, init = true) => (impl.removeChild(parent, child),\n    impl.createTree(opts, parent, tree, child, init));\nconst setContent = (el, body) => (el.textContent = body);\nconst setAttribs = (el, attribs) => {\n    for (let k in attribs) {\n        setAttrib(el, k, attribs[k], attribs);\n    }\n    return el;\n};\n/**\n * Sets a single attribute on given element. If attrib name is NOT an\n * event name (prefix: \"on\") and its value is a function, it is called\n * with given `attribs` object (usually the full attrib object passed to\n * {@link setAttribs}) and the function's return value is used as the actual\n * attrib value.\n *\n * Special rules apply for certain attributes:\n *\n * - \"style\": delegated to {@link setStyle}\n * - \"value\": delegated to {@link updateValueAttrib}\n * - attrib IDs starting with \"on\" are treated as event listeners\n *\n * If the given (or computed) attrib value is `false` or `undefined` the\n * attrib is removed from the element.\n *\n * @param el - DOM element\n * @param id - attribute name\n * @param val - attribute value\n * @param attribs - object of all attribs\n */\nconst setAttrib = (el, id, val, attribs) => {\n    if (id.startsWith(\"__\"))\n        return;\n    const isListener = id[0] === \"o\" && id[1] === \"n\";\n    if (!isListener && typeof val === \"function\") {\n        val = val(attribs);\n    }\n    if (val !== undefined && val !== false) {\n        switch (id) {\n            case \"style\":\n                setStyle(el, val);\n                break;\n            case \"value\":\n                updateValueAttrib(el, val);\n                break;\n            case \"prefix\":\n                el.setAttribute(id, isString(val) ? val : formatPrefixes(val));\n                break;\n            case \"accesskey\":\n                el.accessKey = val;\n                break;\n            case \"contenteditable\":\n                el.contentEditable = val;\n                break;\n            case \"tabindex\":\n                el.tabIndex = val;\n                break;\n            case \"align\":\n            case \"autocapitalize\":\n            case \"checked\":\n            case \"dir\":\n            case \"draggable\":\n            case \"hidden\":\n            case \"id\":\n            case \"lang\":\n            case \"namespaceURI\":\n            case \"scrollTop\":\n            case \"scrollLeft\":\n            case \"title\":\n                // TODO add more properties / enumerated attribs?\n                el[id] = val;\n                break;\n            default:\n                isListener\n                    ? setListener(el, id.substr(2), val)\n                    : el.setAttribute(id, val === true ? \"\" : val);\n        }\n    }\n    else {\n        el[id] != null ? (el[id] = null) : el.removeAttribute(id);\n    }\n    return el;\n};\n/**\n * Updates an element's `value` property. For form elements it too\n * ensures the edit cursor retains its position.\n *\n * @param el - DOM element\n * @param value - value\n */\nconst updateValueAttrib = (el, value) => {\n    let ev;\n    switch (el.type) {\n        case \"text\":\n        case \"textarea\":\n        case \"password\":\n        case \"search\":\n        case \"number\":\n        case \"email\":\n        case \"url\":\n        case \"tel\":\n        case \"date\":\n        case \"datetime-local\":\n        case \"time\":\n        case \"week\":\n        case \"month\":\n            if ((ev = el.value) !== undefined && typeof value === \"string\") {\n                const off = value.length - (ev.length - (el.selectionStart || 0));\n                el.value = value;\n                el.selectionStart = el.selectionEnd = off;\n                break;\n            }\n        default:\n            el.value = value;\n    }\n};\nconst removeAttribs = (el, attribs, prev) => {\n    for (let i = attribs.length; --i >= 0;) {\n        const a = attribs[i];\n        if (a[0] === \"o\" && a[1] === \"n\") {\n            removeListener(el, a.substr(2), prev[a]);\n        }\n        else {\n            el.hasAttribute(a) ? el.removeAttribute(a) : (el[a] = null);\n        }\n    }\n};\nconst setStyle = (el, styles) => (el.setAttribute(\"style\", css(styles)), el);\n/**\n * Adds event listener (possibly with options).\n *\n * @param el - DOM element\n * @param id - event name (w/o `on` prefix)\n * @param listener -\n */\nconst setListener = (el, id, listener) => isString(listener)\n    ? el.setAttribute(\"on\" + id, listener)\n    : isArray$1(listener)\n        ? el.addEventListener(id, ...listener)\n        : el.addEventListener(id, listener);\n/**\n * Removes event listener (possibly with options).\n *\n * @param el - DOM element\n * @param id - event name (w/o `on` prefix)\n * @param listener -\n */\nconst removeListener = (el, id, listener) => isArray$1(listener)\n    ? el.removeEventListener(id, ...listener)\n    : el.removeEventListener(id, listener);\nconst removeChild = (parent, childIdx) => {\n    const n = parent.children[childIdx];\n    n !== undefined && parent.removeChild(n);\n};\n\nconst isArray$2 = isArray$3;\nconst isNotStringAndIterable$2 = isNotStringAndIterable;\nconst isPlainObject$1 = isPlainObject;\n/**\n * Expands single hiccup element/component into its canonical form:\n *\n * ```\n * [tagname, {attribs}, ...children]\n * ```\n *\n * Emmet-style ID and class names in the original tagname are moved into\n * the attribs object, e.g.:\n *\n * ```\n * [\"div#foo.bar.baz\"] => [\"div\", {id: \"foo\", class: \"bar baz\"}]\n * ```\n *\n * If both Emmet-style classes AND a `class` attrib exists, the former\n * are appended to the latter:\n *\n * ```\n * [\"div.bar.baz\", {class: \"foo\"}] => [\"div\", {class: \"foo bar baz\"}]\n * ```\n *\n * Elements with `__skip` attrib enabled and no children, will have an\n * empty text child element injected.\n *\n * @param spec - single hdom component\n * @param keys -\n *\n * @internal\n */\nconst normalizeElement = (spec, keys) => {\n    let tag = spec[0];\n    let hasAttribs = isPlainObject$1(spec[1]);\n    let match;\n    let name;\n    let attribs;\n    if (typeof tag !== \"string\" || !(match = RE_TAG.exec(tag))) {\n        illegalArgs(`${tag} is not a valid tag name`);\n    }\n    name = match[1];\n    // return orig if already normalized and satisfies key requirement\n    if (tag === name && hasAttribs && (!keys || spec[1].key)) {\n        return spec;\n    }\n    attribs = mergeEmmetAttribs(hasAttribs ? Object.assign({}, spec[1]) : {}, match[2], match[3]);\n    return attribs.__skip && spec.length < 3\n        ? [name, attribs]\n        : [name, attribs, ...spec.slice(hasAttribs ? 2 : 1)];\n};\n/**\n * See {@link HDOMImplementation} interface for further details.\n *\n * @param opts - hdom config options\n * @param tree - component tree\n */\nconst normalizeTree = (opts, tree) => _normalizeTree(tree, opts, opts.ctx, [0], opts.keys !== false, opts.span !== false);\nconst _normalizeTree = (tree, opts, ctx, path, keys, span) => {\n    if (tree == null) {\n        return;\n    }\n    if (isArray$2(tree)) {\n        if (tree.length === 0) {\n            return;\n        }\n        let norm, nattribs = tree[1], impl;\n        // if available, use branch-local normalize implementation\n        if (nattribs &&\n            (impl = nattribs.__impl) &&\n            (impl = impl.normalizeTree)) {\n            return impl(opts, tree);\n        }\n        const tag = tree[0];\n        // use result of function call\n        // pass ctx as first arg and remaining array elements as rest args\n        if (typeof tag === \"function\") {\n            return _normalizeTree(tag.apply(null, [ctx, ...tree.slice(1)]), opts, ctx, path, keys, span);\n        }\n        // component object w/ life cycle methods\n        // (render() is the only required hook)\n        if (typeof tag.render === \"function\") {\n            const args = [ctx, ...tree.slice(1)];\n            norm = _normalizeTree(tag.render.apply(tag, args), opts, ctx, path, keys, span);\n            if (isArray$2(norm)) {\n                norm.__this = tag;\n                norm.__init = tag.init;\n                norm.__release = tag.release;\n                norm.__args = args;\n            }\n            return norm;\n        }\n        norm = normalizeElement(tree, keys);\n        nattribs = norm[1];\n        if (nattribs.__normalize === false) {\n            return norm;\n        }\n        if (keys && nattribs.key === undefined) {\n            nattribs.key = path.join(\"-\");\n        }\n        return norm.length > 2\n            ? normalizeChildren(norm, nattribs, opts, ctx, path, keys, span)\n            : norm;\n    }\n    return typeof tree === \"function\"\n        ? _normalizeTree(tree(ctx), opts, ctx, path, keys, span)\n        : typeof tree.toHiccup === \"function\"\n            ? _normalizeTree(tree.toHiccup(opts.ctx), opts, ctx, path, keys, span)\n            : typeof tree.deref === \"function\"\n                ? _normalizeTree(tree.deref(), opts, ctx, path, keys, span)\n                : span\n                    ? [\"span\", keys ? { key: path.join(\"-\") } : {}, tree.toString()]\n                    : tree.toString();\n};\nconst normalizeChildren = (norm, nattribs, opts, ctx, path, keys, span) => {\n    const tag = norm[0];\n    const res = [tag, nattribs];\n    span = span && !NO_SPANS[tag];\n    for (let i = 2, j = 2, k = 0, n = norm.length; i < n; i++) {\n        let el = norm[i];\n        if (el != null) {\n            const isarray = isArray$2(el);\n            if ((isarray && isArray$2(el[0])) ||\n                (!isarray && isNotStringAndIterable$2(el))) {\n                for (let c of el) {\n                    c = _normalizeTree(c, opts, ctx, path.concat(k), keys, span);\n                    if (c !== undefined) {\n                        res[j++] = c;\n                    }\n                    k++;\n                }\n            }\n            else {\n                el = _normalizeTree(el, opts, ctx, path.concat(k), keys, span);\n                if (el !== undefined) {\n                    res[j++] = el;\n                }\n                k++;\n            }\n        }\n    }\n    return res;\n};\n\n/**\n * Default target implementation to manipulate browser DOM.\n */\nconst DEFAULT_IMPL = {\n    createTree(opts, parent, tree, child, init) {\n        return createTree(opts, this, parent, tree, child, init);\n    },\n    hydrateTree(opts, parent, tree, child) {\n        return hydrateTree(opts, this, parent, tree, child);\n    },\n    diffTree(opts, parent, prev, curr, child) {\n        diffTree(opts, this, parent, prev, curr, child);\n    },\n    normalizeTree,\n    getElementById(id) {\n        return document.getElementById(id);\n    },\n    getChild,\n    createElement,\n    createTextElement,\n    replaceChild(opts, parent, child, tree, init) {\n        replaceChild(opts, this, parent, child, tree, init);\n    },\n    removeChild,\n    setContent,\n    removeAttribs,\n    setAttrib,\n};\n\nconst resolveRoot = (root, impl) => isString$1(root) ? impl.getElementById(root) : root;\n\n/**\n * Takes an hiccup tree (array, function or component object w/ life\n * cycle methods) and an optional object of DOM update options. Starts\n * RAF update loop, in each iteration first normalizing given tree, then\n * computing diff to previous frame's tree and applying any changes to\n * the real DOM. The `ctx` option can be used for passing arbitrary\n * config data or state down into the hiccup component tree. Any\n * embedded component function in the tree will receive this context\n * object (shallow copy) as first argument, as will life cycle methods\n * in component objects. If the `autoDerefKeys` option is given,\n * attempts to auto-expand/deref the given keys in the user supplied\n * context object (`ctx` option) prior to *each* tree normalization. All\n * of these values should implement the {@link @thi.ng/api#IDeref}\n * interface (e.g. atoms, cursors, views, rstreams etc.). This feature\n * can be used to define dynamic contexts linked to the main app state,\n * e.g. using derived views provided by {@link @thi.ng/atom# | @thi.ng/atom}.\n *\n * **Selective updates**: No updates will be applied if the given hiccup\n * tree is `undefined` or `null` or a root component function returns no\n * value. This way a given root function can do some state handling of\n * its own and implement fail-fast checks to determine no DOM updates\n * are necessary, save effort re-creating a new hiccup tree and request\n * skipping DOM updates via this function. In this case, the previous\n * DOM tree is kept around until the root function returns a tree again,\n * which then is diffed and applied against the previous tree kept as\n * usual. Any number of frames may be skipped this way.\n *\n * **Important:** Unless the `hydrate` option is enabled, the parent\n * element given is assumed to have NO children at the time when\n * `start()` is called. Since hdom does NOT track the real DOM, the\n * resulting changes will result in potentially undefined behavior if\n * the parent element wasn't empty. Likewise, if `hydrate` is enabled,\n * it is assumed that an equivalent DOM (minus listeners) already exists\n * (i.e. generated via SSR) when `start()` is called. Any other\n * discrepancies between the pre-existing DOM and the hdom trees will\n * cause undefined behavior.\n *\n * Returns a function, which when called, immediately cancels the update\n * loop.\n *\n * @param tree - hiccup DOM tree\n * @param opts - options\n * @param impl - hdom target implementation\n */\nconst start = (tree, opts = {}, impl = DEFAULT_IMPL) => {\n    const _opts = Object.assign({ root: \"app\" }, opts);\n    let prev = [];\n    let isActive = true;\n    const root = resolveRoot(_opts.root, impl);\n    const update = () => {\n        if (isActive) {\n            _opts.ctx = derefContext(opts.ctx, _opts.autoDerefKeys);\n            const curr = impl.normalizeTree(_opts, tree);\n            if (curr != null) {\n                if (_opts.hydrate) {\n                    impl.hydrateTree(_opts, root, curr);\n                    _opts.hydrate = false;\n                }\n                else {\n                    impl.diffTree(_opts, root, prev, curr);\n                }\n                prev = curr;\n            }\n            // check again in case one of the components called cancel\n            isActive && requestAnimationFrame(update);\n        }\n    };\n    requestAnimationFrame(update);\n    return () => (isActive = false);\n};\n\nexport { start };\n", "import { a as defGetter, b as defSetter, A as Atom, s as setInUnsafe, u as updateInUnsafe, c as defSetterUnsafe } from '../common/atom-584c94cc.js';\nimport { i as implementsFunction } from '../common/implements-function-c507affc.js';\nimport { i as illegalArgs } from '../common/illegal-arguments-f9331715.js';\nimport { i as isArray } from '../common/is-array-a7fa88fb.js';\nimport { i as isFunction } from '../common/is-function-b13d3e65.js';\nimport '../common/mixin-ad130ceb.js';\nimport '../common/deferror-480a42fb.js';\nimport '../common/is-string-40d6c094.js';\n\nvar LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"FINE\"] = 0] = \"FINE\";\n    LogLevel[LogLevel[\"DEBUG\"] = 1] = \"DEBUG\";\n    LogLevel[LogLevel[\"INFO\"] = 2] = \"INFO\";\n    LogLevel[LogLevel[\"WARN\"] = 3] = \"WARN\";\n    LogLevel[LogLevel[\"SEVERE\"] = 4] = \"SEVERE\";\n    LogLevel[LogLevel[\"NONE\"] = 5] = \"NONE\";\n})(LogLevel || (LogLevel = {}));\n\nconst NULL_LOGGER = Object.freeze({\n    level: LogLevel.NONE,\n    fine() { },\n    debug() { },\n    info() { },\n    warn() { },\n    severe() { },\n});\n\nconst isPromise = (x) => x instanceof Promise;\n\n/**\n * Similar to {@link defSetterUnsafe}, returns a function to update\n * values at given `path` using provided update `fn`. Paths and the\n * arguments given to the returned function are NOT type checked.\n *\n * @remarks\n * The returned function accepts a single object / array and applies\n * `fn` to given path value (incl. any additional / optional arguments\n * passed) and uses result as new value. Does not modify original state.\n *\n * The type parameter `T` can be used to indicate the type of the nested\n * value to be updated (default: `any`).\n *\n * @example\n * ```ts\n * const incB = defUpdaterUnsafe(\"a.b\", (x, n) => x + n);\n * // or\n * const incB = defUpdaterUnsafe([\"a\", \"b\"], (x, n) => x + n);\n *\n * incB({ a: { b: 10 } }, 13);\n * // { a: { b: 23 } }\n * ```\n *\n * @param path -\n * @param fn -\n */\nconst defUpdaterUnsafe = (path, fn) => defUpdater(path, fn);\nfunction defUpdater(path, fn) {\n    const g = defGetter(path);\n    const s = defSetter(path);\n    return (state, ...args) => s(state, fn.apply(null, (args.unshift(g(state)), args)));\n}\n\n// Built-in event ID constants\nconst EV_SET_VALUE = \"--set-value\";\nconst EV_UPDATE_VALUE = \"--update-value\";\nconst EV_TOGGLE_VALUE = \"--toggle-value\";\n// Built-in side effect ID constants\nconst FX_CANCEL = \"--cancel\";\nconst FX_DISPATCH = \"--dispatch\";\nconst FX_DISPATCH_ASYNC = \"--dispatch-async\";\nconst FX_DISPATCH_NOW = \"--dispatch-now\";\nconst FX_DELAY = \"--delay\";\nconst FX_FETCH = \"--fetch\";\nconst FX_STATE = \"--state\";\n/**\n * Event ID to trigger redo action.\n * See `EventBus.addBuiltIns()` for further details.\n * Also see {@link snapshot} interceptor docs.\n */\nconst EV_REDO = \"--redo\";\n/**\n * Event ID to trigger undo action.\n * See `EventBus.addBuiltIns()` for further details.\n * Also see {@link snapshot} interceptor docs.\n */\nconst EV_UNDO = \"--undo\";\nlet LOGGER = NULL_LOGGER;\n\n/**\n * Batched event processor for using composable interceptors for event\n * handling and side effects to execute the result of handled events.\n *\n * @remarks\n * Events processed by this class are simple 2-element tuples/arrays of\n * this form: `[\"event-id\", payload?]`, where the `payload` is optional\n * and can be of any type.\n *\n * Events are processed by registered handlers which transform each\n * event into a number of side effect descriptions to be executed later.\n * This separation ensures event handlers themselves are pure functions\n * and leads to more efficient reuse of side effecting operations. The\n * pure data nature until the last stage of processing (the application\n * side effects) too means that event flow can be much easier inspected\n * and debugged.\n *\n * In this model a single event handler itself is an array of objects\n * with `pre` and/or `post` keys and functions attached to each key.\n * These functions are called interceptors, since each intercepts the\n * processing of an event and can contribute their own side effects.\n * Each event's interceptor chain is processed bi-directionally (`pre`\n * in forward, `post` in reverse order) and the effects returned from\n * each interceptor are merged/collected. The outcome of this setup is a\n * more aspect-oriented, composable approach to event handling and\n * allows to inject common, re-usable behaviors for multiple event types\n * (logging, validation, undo/redo triggers etc.).\n *\n * Side effects are only processed after all event handlers have run.\n * Furthermore, their order of execution can be configured with optional\n * priorities.\n *\n * See for further details:\n *\n * - {@link StatelessEventBus.processQueue}\n * - {@link StatelessEventBus.processEvent}\n * - {@link StatelessEventBus.processEffects}\n * - {@link StatelessEventBus.mergeEffects}\n *\n * The overall approach of this type of event processing is heavily\n * based on the pattern initially pioneered by @Day8/re-frame, with the\n * following differences:\n *\n * - stateless (see {@link EventBus} for the more common stateful\n *   alternative)\n * - standalone implementation (no assumptions about surrounding\n *   context/framework)\n * - manual control over event queue processing\n * - supports event cancellation (via FX_CANCEL side effect)\n * - side effect collection (multiple side effects for same effect type\n *   per frame)\n * - side effect priorities (to control execution order)\n * - dynamic addition/removal of handlers & effects\n */\nclass StatelessEventBus {\n    /**\n     * Creates a new event bus instance with given handler and effect\n     * definitions (all optional).\n     *\n     * @remarks\n     * In addition to the user provided handlers & effects, a number of\n     * built-ins are added automatically. See\n     * {@link StatelessEventBus.addBuiltIns}. User handlers can override\n     * built-ins.\n     *\n     * @param handlers -\n     * @param effects -\n     */\n    constructor(handlers, effects) {\n        this.handlers = {};\n        this.effects = {};\n        this.eventQueue = [];\n        this.priorities = [];\n        this.addBuiltIns();\n        if (handlers) {\n            this.addHandlers(handlers);\n        }\n        if (effects) {\n            this.addEffects(effects);\n        }\n    }\n    /**\n     * Adds built-in event & side effect handlers.\n     *\n     * @remarks\n     * Also see additional built-ins defined by the stateful\n     * {@link EventBus} extension of this class, as well as comments for\n     * these class methods:\n     *\n     * - {@link StatelessEventBus.mergeEffects}\n     * - {@link StatelessEventBus.processEvent}\n     *\n     * ### Handlers\n     *\n     * currently none...\n     *\n     * ### Side effects\n     *\n     * #### `FX_CANCEL`\n     *\n     * If assigned `true`, cancels processing of current event, though\n     * still applies any side effects already accumulated.\n     *\n     * #### `FX_DISPATCH`\n     *\n     * Dispatches assigned events to be processed in next frame.\n     *\n     * #### `FX_DISPATCH_ASYNC`\n     *\n     * Async wrapper for promise based side effects.\n     *\n     * #### `FX_DISPATCH_NOW`\n     *\n     * Dispatches assigned events as part of currently processed event\n     * queue (no delay).\n     *\n     * #### `FX_DELAY`\n     *\n     * Async side effect. Only to be used in conjunction with\n     * `FX_DISPATCH_ASYNC`. Triggers given event after `x` milliseconds.\n     *\n     * ```\n     * // this triggers `[EV_SUCCESS, \"ok\"]` event after 1000 ms\n     * { [FX_DISPATCH_ASYNC]: [FX_DELAY, [1000, \"ok\"], EV_SUCCESS, EV_ERROR] }\n     * ```\n     *\n     * #### `FX_FETCH`\n     *\n     * Async side effect. Only to be used in conjunction with\n     * `FX_DISPATCH_ASYNC`. Performs `fetch()` HTTP request and triggers\n     * success with received response, or if there was an error with\n     * response's `statusText`. The error event is only triggered if the\n     * fetched response's `ok` field is non-truthy.\n     *\n     * - {@link https://developer.mozilla.org/en-US/docs/Web/API/Response/ok}\n     * - {@link https://developer.mozilla.org/en-US/docs/Web/API/Response/statusText}\n     *\n     * ```\n     * // fetches \"foo.json\" and then dispatches EV_SUCCESS or EV_ERROR event\n     * { [FX_DISPATCH_ASYNC]: [FX_FETCH, \"foo.json\", EV_SUCCESS, EV_ERROR] }\n     * ```\n     */\n    addBuiltIns() {\n        this.addEffects({\n            [FX_DISPATCH]: [(e) => this.dispatch(e), -999],\n            [FX_DISPATCH_ASYNC]: [\n                ([id, arg, success, err], bus, ctx) => {\n                    const fx = this.effects[id];\n                    if (fx) {\n                        const p = fx(arg, bus, ctx);\n                        if (isPromise(p)) {\n                            p.then((res) => this.dispatch([success, res])).catch((e) => this.dispatch([err, e]));\n                        }\n                        else {\n                            LOGGER.warn(\"async effect did not return Promise\");\n                        }\n                    }\n                    else {\n                        LOGGER.warn(`skipping invalid async effect: ${id}`);\n                    }\n                },\n                -999,\n            ],\n            [FX_DELAY]: [\n                ([x, body]) => new Promise((res) => setTimeout(() => res(body), x)),\n                1000,\n            ],\n            [FX_FETCH]: [\n                (req) => fetch(req).then((resp) => {\n                    if (!resp.ok) {\n                        throw new Error(resp.statusText);\n                    }\n                    return resp;\n                }),\n                1000,\n            ],\n        });\n    }\n    addHandler(id, spec) {\n        const iceps = this.interceptorsFromSpec(spec);\n        if (iceps.length > 0) {\n            if (this.handlers[id]) {\n                this.removeHandler(id);\n                LOGGER.warn(`overriding handler for ID: ${id}`);\n            }\n            this.handlers[id] = iceps;\n        }\n        else {\n            illegalArgs(`no handlers in spec for ID: ${id}`);\n        }\n    }\n    addHandlers(specs) {\n        for (let id in specs) {\n            this.addHandler(id, specs[id]);\n        }\n    }\n    addEffect(id, fx, priority = 1) {\n        if (this.effects[id]) {\n            this.removeEffect(id);\n            LOGGER.warn(`overriding effect for ID: ${id}`);\n        }\n        this.effects[id] = fx;\n        const p = [id, priority];\n        const priors = this.priorities;\n        for (let i = 0; i < priors.length; i++) {\n            if (p[1] < priors[i][1]) {\n                priors.splice(i, 0, p);\n                return;\n            }\n        }\n        priors.push(p);\n    }\n    addEffects(specs) {\n        for (let id in specs) {\n            const fx = specs[id];\n            if (isArray(fx)) {\n                this.addEffect(id, fx[0], fx[1]);\n            }\n            else {\n                this.addEffect(id, fx);\n            }\n        }\n    }\n    /**\n     * Prepends given interceptors (or interceptor functions) to\n     * selected handlers. If no handler IDs are given, applies\n     * instrumentation to all currently registered handlers.\n     *\n     * @param inject -\n     * @param ids -\n     */\n    instrumentWith(inject, ids) {\n        const iceps = inject.map(asInterceptor);\n        const handlers = this.handlers;\n        for (let id of ids || Object.keys(handlers)) {\n            const h = handlers[id];\n            if (h) {\n                handlers[id] = iceps.concat(h);\n            }\n        }\n    }\n    removeHandler(id) {\n        delete this.handlers[id];\n    }\n    removeHandlers(ids) {\n        for (let id of ids) {\n            this.removeHandler(id);\n        }\n    }\n    removeEffect(id) {\n        delete this.effects[id];\n        const p = this.priorities;\n        for (let i = p.length - 1; i >= 0; i--) {\n            if (id === p[i][0]) {\n                p.splice(i, 1);\n                return;\n            }\n        }\n    }\n    removeEffects(ids) {\n        for (let id of ids) {\n            this.removeEffect(id);\n        }\n    }\n    /**\n     * If called during event processing, returns current side effect\n     * accumulator / interceptor context. Otherwise returns nothing.\n     */\n    context() {\n        return this.currCtx;\n    }\n    /**\n     * Adds given events to event queue to be processed by\n     * {@link StatelessEventBus.processQueue} later on.\n     *\n     * @remarks\n     * It's the user's responsibility to call that latter function\n     * repeatedly in a timely manner, preferably via\n     * `requestAnimationFrame()` or similar.\n     *\n     * @param e -\n     */\n    dispatch(...e) {\n        this.eventQueue.push(...e);\n    }\n    /**\n     * Adds given events to whatever is the current event queue. If\n     * triggered via the `FX_DISPATCH_NOW` side effect from an event\n     * handler / interceptor, the event will still be executed in the\n     * currently active batch / frame. If called from elsewhere, the\n     * result is the same as calling {@link dispatch}.\n     *\n     * @param e -\n     */\n    dispatchNow(...e) {\n        (this.currQueue || this.eventQueue).push(...e);\n    }\n    /**\n     * Dispatches given event after `delay` milliseconds (by default\n     * 17).\n     *\n     * @remarks\n     * Since events are only processed by calling\n     * {@link StatelessEventBus.processQueue}, it's the user's\n     * responsibility to call that latter function repeatedly in a\n     * timely manner, preferably via `requestAnimationFrame()` or\n     * similar.\n     *\n     * @param e -\n     * @param delay -\n     */\n    dispatchLater(e, delay = 17) {\n        setTimeout(() => this.dispatch(e), delay);\n    }\n    /**\n     * Triggers processing of current event queue and returns `true` if\n     * any events have been processed.\n     *\n     * @remarks\n     * If an event handler triggers the `FX_DISPATCH_NOW` side effect,\n     * the new event will be added to the currently processed batch and\n     * therefore executed in the same frame. Also see {@link dispatchNow}.\n     *\n     * An optional `ctx` (context) object can be provided, which is used\n     * to collect any side effect definitions during processing. This\n     * can be useful for debugging, inspection or post-processing\n     * purposes.\n     *\n     * @param ctx -\n     */\n    processQueue(ctx) {\n        if (this.eventQueue.length > 0) {\n            this.currQueue = [...this.eventQueue];\n            this.eventQueue.length = 0;\n            ctx = this.currCtx = ctx || {};\n            for (let e of this.currQueue) {\n                this.processEvent(ctx, e);\n            }\n            this.currQueue = this.currCtx = undefined;\n            this.processEffects(ctx);\n            return true;\n        }\n        return false;\n    }\n    /**\n     * Processes a single event using its configured handler/interceptor\n     * chain. Logs warning message and skips processing if no handler is\n     * available for the event type.\n     *\n     * @remarks\n     * The array of interceptors is processed in bi-directional order.\n     * First any `pre` interceptors are processed in forward order. Then\n     * `post` interceptors are processed in reverse.\n     *\n     * Each interceptor can return a result object of side effects,\n     * which are being merged and collected for\n     * {@link StatelessEventBus.processEffects}.\n     *\n     * Any interceptor can trigger zero or more known side effects, each\n     * (side effect) will be collected in an array to support multiple\n     * invocations of the same effect type per frame. If no side effects\n     * are requested, an interceptor can return `undefined`.\n     *\n     * Processing of the current event stops immediately, if an\n     * interceptor sets the `FX_CANCEL` side effect key to `true`.\n     * However, the results of any previous interceptors (incl. the one\n     * which cancelled) are kept and processed further as usual.\n     *\n     * @param ctx -\n     * @param e -\n     */\n    processEvent(ctx, e) {\n        const iceps = this.handlers[e[0]];\n        if (!iceps) {\n            LOGGER.warn(`missing handler for event type: ${e[0].toString()}`);\n            return;\n        }\n        if (!this.processForward(ctx, iceps, e)) {\n            return;\n        }\n        this.processReverse(ctx, iceps, e);\n    }\n    processForward(ctx, iceps, e) {\n        let hasPost = false;\n        for (let i = 0, n = iceps.length; i < n && !ctx[FX_CANCEL]; i++) {\n            const icep = iceps[i];\n            if (icep.pre) {\n                this.mergeEffects(ctx, icep.pre(ctx[FX_STATE], e, this, ctx));\n            }\n            hasPost = hasPost || !!icep.post;\n        }\n        return hasPost;\n    }\n    processReverse(ctx, iceps, e) {\n        for (let i = iceps.length; --i >= 0 && !ctx[FX_CANCEL];) {\n            const icep = iceps[i];\n            if (icep.post) {\n                this.mergeEffects(ctx, icep.post(ctx[FX_STATE], e, this, ctx));\n            }\n        }\n    }\n    /**\n     * Takes a collection of side effects generated during event\n     * processing and applies them in order of configured priorities.\n     *\n     * @param ctx -\n     */\n    processEffects(ctx) {\n        const effects = this.effects;\n        for (let p of this.priorities) {\n            const id = p[0];\n            const val = ctx[id];\n            val !== undefined && this.processEffect(ctx, effects, id, val);\n        }\n    }\n    processEffect(ctx, effects, id, val) {\n        const fn = effects[id];\n        if (id !== FX_STATE) {\n            for (let v of val) {\n                fn(v, this, ctx);\n            }\n        }\n        else {\n            fn(val, this, ctx);\n        }\n    }\n    /**\n     * Merges the new side effects returned from an interceptor into the\n     * internal effect accumulator.\n     *\n     * @remarks\n     * Any events assigned to the `FX_DISPATCH_NOW` effect key are\n     * immediately added to the currently active event batch.\n     *\n     * If an interceptor wishes to cause multiple invocations of a\n     * single side effect type (e.g. dispatch multiple other events), it\n     * MUST return an array of these values. The only exceptions to this\n     * are the following effects, which for obvious reasons can only\n     * accept a single value.\n     *\n     * **Note:** the `FX_STATE` effect is not actually defined by this\n     * class here, but is supported to avoid code duplication in\n     * {@link EventBus}.\n     *\n     * - `FX_CANCEL`\n     * - `FX_STATE`\n     *\n     * Because of this support (multiple values), the value of a single\n     * side effect MUST NOT be a nested array itself, or rather its\n     * first item can't be an array.\n     *\n     * For example:\n     *\n     * ```\n     * // interceptor result map to dispatch a single event\n     * { [FX_DISPATCH]: [\"foo\", \"bar\"]}\n     *\n     * // result map format to dispatch multiple events\n     * { [FX_DISPATCH]: [ [\"foo\", \"bar\"], [\"baz\", \"beep\"] ]}\n     * ```\n     *\n     * Any `null` / `undefined` values directly assigned to a side\n     * effect are ignored and will not trigger the effect.\n     *\n     * @param fx -\n     * @param ret -\n     */\n    mergeEffects(ctx, ret) {\n        if (!ret) {\n            return;\n        }\n        for (let k in ret) {\n            const v = ret[k];\n            if (v == null) {\n                continue;\n            }\n            if (k === FX_STATE || k === FX_CANCEL) {\n                ctx[k] = v;\n            }\n            else if (k === FX_DISPATCH_NOW) {\n                if (isArray(v[0])) {\n                    for (let e of v) {\n                        e && this.dispatchNow(e);\n                    }\n                }\n                else {\n                    this.dispatchNow(v);\n                }\n            }\n            else {\n                ctx[k] || (ctx[k] = []);\n                if (isArray(v[0])) {\n                    for (let e of v) {\n                        e !== undefined && ctx[k].push(e);\n                    }\n                }\n                else {\n                    ctx[k].push(v);\n                }\n            }\n        }\n    }\n    interceptorsFromSpec(spec) {\n        return isArray(spec)\n            ? spec.map(asInterceptor)\n            : isFunction(spec)\n                ? [{ pre: spec }]\n                : [spec];\n    }\n}\n/**\n * Stateful version of {@link StatelessEventBus}.\n *\n * @remarks\n * Wraps an {@link @thi.ng/atom#IAtom} state container (i.e.\n * `Atom`/`Cursor`/`History`) and provides additional pre-defined event\n * handlers and side effects to manipulate wrapped state. Prefer this as\n * the default implementation for most use cases.\n */\nclass EventBus extends StatelessEventBus {\n    /**\n     * Creates a new event bus instance with given parent state, handler\n     * and effect definitions (all optional).\n     *\n     * @remarks\n     * If no state is given, automatically creates an\n     * {@link @thi.ng/atom#Atom} with empty state object.\n     *\n     * In addition to the user provided handlers & effects, a number of\n     * built-ins are added automatically. See\n     * {@link EventBus.addBuiltIns}. User handlers can override\n     * built-ins.\n     *\n     * @param state -\n     * @param handlers -\n     * @param effects -\n     */\n    constructor(state, handlers, effects) {\n        super(handlers, effects);\n        this.state = state || new Atom({});\n    }\n    /**\n     * Returns value of internal state. Shorthand for:\n     * `bus.state.deref()`\n     */\n    deref() {\n        return this.state.deref();\n    }\n    /**\n     * Adds same built-in event & side effect handlers as in\n     * `StatelessEventBus.addBuiltIns()` and the following additions:\n     *\n     * ### Handlers\n     *\n     * #### `EV_SET_VALUE`\n     *\n     * Resets state path to provided value. See\n     * {@link @thi.ng/paths#setIn}.\n     *\n     * Example event definition:\n     * ```\n     * [EV_SET_VALUE, [\"path.to.value\", val]]\n     * ```\n     *\n     * #### `EV_UPDATE_VALUE`\n     *\n     * Updates a state path's value with provided function and optional\n     * extra arguments. See {@link @thi.ng/paths#updateIn}.\n     *\n     * Example event definition:\n     * ```\n     * [EV_UPDATE_VALUE, [\"path.to.value\", (x, y) => x + y, 1]]\n     * ```\n     *\n     * #### `EV_TOGGLE_VALUE`\n     *\n     * Negates a boolean state value at given path.\n     *\n     * Example event definition:\n     * ```\n     * [EV_TOGGLE_VALUE, \"path.to.value\"]\n     * ```\n     *\n     * #### `EV_UNDO`\n     *\n     * Calls `ctx[id].undo()` and uses return value as new state.\n     * Assumes `ctx[id]` is a {@link @thi.ng/atom#History} instance,\n     * provided via e.g. `processQueue({ history })`. The event can be\n     * triggered with or without ID. By default `\"history\"` is used as\n     * default key to lookup the `History` instance. Furthermore, an\n     * additional event can be triggered based on if a previous state\n     * has been restored or not (basically, if the undo was successful).\n     * This is useful for resetting/re-initializing stateful resources\n     * after a successful undo action or to notify the user that no more\n     * undo's are possible. The new event will be processed in the same\n     * frame and has access to the (possibly) restored state. The event\n     * structure for these options is shown below:\n     *\n     * ```\n     * // using default ID\n     * bus.dispatch([EV_UNDO]);\n     *\n     * // using custom history ID\n     * bus.dispatch([EV_UNDO, [\"custom\"]]);\n     *\n     * // using custom ID and dispatch another event after undo\n     * bus.dispatch([EV_UNDO, [\"custom\", [\"ev-undo-success\"], [\"ev-undo-fail\"]]]);\n     * ```\n     *\n     * #### `EV_REDO`\n     *\n     * Similar to `EV_UNDO`, but for redo actions.\n     *\n     * ### Side effects\n     *\n     * #### `FX_STATE`\n     *\n     * Resets state atom to provided value (only a single update per\n     * processing frame).\n     */\n    addBuiltIns() {\n        super.addBuiltIns();\n        // handlers\n        this.addHandlers({\n            [EV_SET_VALUE]: (state, [_, [path, val]]) => ({\n                [FX_STATE]: setInUnsafe(state, path, val),\n            }),\n            [EV_UPDATE_VALUE]: (state, [_, [path, fn, ...args]]) => ({\n                [FX_STATE]: updateInUnsafe(state, path, fn, ...args),\n            }),\n            [EV_TOGGLE_VALUE]: (state, [_, path]) => ({\n                [FX_STATE]: updateInUnsafe(state, path, (x) => !x),\n            }),\n            [EV_UNDO]: undoHandler(\"undo\"),\n            [EV_REDO]: undoHandler(\"redo\"),\n        });\n        // effects\n        this.addEffects({\n            [FX_STATE]: [(state) => this.state.reset(state), -1000],\n        });\n    }\n    /**\n     * Triggers processing of current event queue and returns `true` if\n     * the any of the processed events caused a state change.\n     *\n     * If an event handler triggers the `FX_DISPATCH_NOW` side effect,\n     * the new event will be added to the currently processed batch and\n     * therefore executed in the same frame. Also see {@link dispatchNow}.\n     *\n     * If the optional `ctx` arg is provided it will be merged into the\n     * {@link InterceptorContext} object passed to each interceptor. Since the\n     * merged object is also used to collect triggered side effects,\n     * care must be taken that there're no key name clashes.\n     *\n     * In order to use the built-in `EV_UNDO`, `EV_REDO` events, users\n     * MUST provide a {@link @thi.ng/atom#History} (or compatible undo\n     * history instance) via the `ctx` arg, e.g.\n     *\n     * ```\n     * bus.processQueue({ history });\n     * ```\n     */\n    processQueue(ctx) {\n        if (this.eventQueue.length > 0) {\n            const prev = this.state.deref();\n            this.currQueue = [...this.eventQueue];\n            this.eventQueue.length = 0;\n            ctx = this.currCtx = Object.assign(Object.assign({}, ctx), { [FX_STATE]: prev });\n            for (let e of this.currQueue) {\n                this.processEvent(ctx, e);\n            }\n            this.currQueue = this.currCtx = undefined;\n            this.processEffects(ctx);\n            return this.state.deref() !== prev;\n        }\n        return false;\n    }\n}\nconst asInterceptor = (i) => isFunction(i) ? { pre: i } : i;\nconst undoHandler = (action) => (_, [__, ev], bus, ctx) => {\n    const id = ev ? ev[0] : \"history\";\n    if (implementsFunction(ctx[id], action)) {\n        const ok = ctx[id][action]();\n        return {\n            [FX_STATE]: bus.state.deref(),\n            [FX_DISPATCH_NOW]: ev\n                ? ok !== undefined\n                    ? ev[1]\n                    : ev[2]\n                : undefined,\n        };\n    }\n    else {\n        LOGGER.warn(\"no history in context\");\n    }\n};\n\n/**\n * Debug interceptor to log the current event to the console.\n */\nconst trace = (_, e) => console.log(\"event:\", e);\n/**\n * Higher-order interceptor. Returns new interceptor to set state value\n * at provided path. This allows for dedicated events to set state\n * values more concisely, e.g. given this event definition:\n *\n * @example\n * ```ts\n * setFoo: valueSetter(\"foo.bar\")\n * ```\n *\n * ...the `setFoo` event then can be triggered like so to update the\n * state value at `foo.bar`:\n *\n * @example\n * ```ts\n * bus.dispatch([\"setFoo\", 23])\n * ```\n *\n * @param path -\n * @param tx -\n */\nconst valueSetter = (path, tx) => {\n    const $ = defSetterUnsafe(path);\n    return (state, [_, val]) => ({ [FX_STATE]: $(state, tx ? tx(val) : val) });\n};\n/**\n * Higher-order interceptor. Returns new interceptor to update state\n * value at provided path with given function. This allows for dedicated\n * events to update state values more concisely, e.g. given this event\n * definition:\n *\n * @example\n * ```ts\n * incFoo: valueUpdater(\"foo.bar\", (x, y) => x + y)\n * ```\n *\n * ...the `incFoo` event then can be triggered like so to update the\n * state value at `foo.bar` (where `1` is the extra arg provided to the\n * update fn:\n *\n * @example\n * ```ts\n * bus.dispatch([\"incFoo\", 1]) // results in value = value + 1\n * ```\n *\n * @param path -\n * @param fn -\n */\nconst valueUpdater = (path, fn) => {\n    const $ = defUpdaterUnsafe(path, fn);\n    return (state, [_, ...args]) => ({ [FX_STATE]: $(state, ...args) });\n};\n\nexport { EV_SET_VALUE, EV_TOGGLE_VALUE, EventBus, FX_DELAY, FX_DISPATCH_ASYNC, FX_DISPATCH_NOW, trace, valueSetter, valueUpdater };\n", "import { N as NO_OP } from './constants-8dfd1542.js';\nimport { d as defError } from './deferror-480a42fb.js';\n\nvar process = {};\n\n/**\n * Takes a `test` result or predicate function without args and throws\n * error with given `msg` if test failed (i.e. is falsy).\n *\n * @remarks\n * The function is only enabled if `\"production\" != \"production\"`\n * or if the `UMBRELLA_ASSERTS` env var is set to 1.\n */\nconst assert = (() => {\n    try {\n        return (\"production\" !== \"production\" ||\n            process.env.UMBRELLA_ASSERTS === \"1\");\n    }\n    catch (e) { }\n    return false;\n})()\n    ? (test, msg = \"assertion failed\") => {\n        if ((typeof test === \"function\" && !test()) || !test) {\n            throw new Error(typeof msg === \"function\" ? msg() : msg);\n        }\n    }\n    : NO_OP;\n\nconst IllegalArityError = defError(() => \"illegal arity\");\nconst illegalArity = (n) => {\n    throw new IllegalArityError(n);\n};\n\nexport { assert as a, illegalArity as i };\n", "import { e as equiv } from '../common/index-6d483b49.js';\nimport { m as mixin, _ as __decorate } from '../common/mixin-ad130ceb.js';\nimport { a as assert, i as illegalArity } from '../common/illegal-arity-eb3b66c4.js';\nimport { i as illegalArgs } from '../common/illegal-arguments-f9331715.js';\nimport { E as EVENT_ALL } from '../common/constants-8dfd1542.js';\nimport { i as isString } from '../common/is-string-40d6c094.js';\nimport '../common/deferror-480a42fb.js';\n\nconst inotify_dispatch = (listeners, e) => {\n    if (!listeners)\n        return;\n    for (let i = 0, n = listeners.length, l; i < n; i++) {\n        l = listeners[i];\n        l[0].call(l[1], e);\n        if (e.canceled) {\n            return;\n        }\n    }\n};\n/**\n * Mixin class decorator, injects INotify default implementation, incl.\n * a lazily instantiated `_listeners` property object, storing\n * registered listeners.\n */\nconst INotifyMixin = mixin({\n    addListener(id, fn, scope) {\n        let l = (this._listeners = this._listeners || {})[id];\n        !l && (l = this._listeners[id] = []);\n        if (this.__listener(l, fn, scope) === -1) {\n            l.push([fn, scope]);\n            return true;\n        }\n        return false;\n    },\n    removeListener(id, fn, scope) {\n        let listeners;\n        if (!(listeners = this._listeners))\n            return false;\n        const l = listeners[id];\n        if (l) {\n            const idx = this.__listener(l, fn, scope);\n            if (idx !== -1) {\n                l.splice(idx, 1);\n                !l.length && delete listeners[id];\n                return true;\n            }\n        }\n        return false;\n    },\n    notify(e) {\n        let listeners;\n        if (!(listeners = this._listeners))\n            return false;\n        e.target === undefined && (e.target = this);\n        inotify_dispatch(listeners[e.id], e);\n        inotify_dispatch(listeners[EVENT_ALL], e);\n    },\n    __listener(listeners, f, scope) {\n        let i = listeners.length;\n        while (--i >= 0) {\n            const l = listeners[i];\n            if (l[0] === f && l[1] === scope) {\n                break;\n            }\n        }\n        return i;\n    },\n});\n\n/**\n * ID of success event being triggered by `router.match()`\n */\nconst EVENT_ROUTE_CHANGED = \"route-changed\";\n\nlet BasicRouter = class BasicRouter {\n    constructor(config) {\n        config.authenticator =\n            config.authenticator ||\n                ((route, _, params) => ({\n                    id: route.id,\n                    title: route.title,\n                    params,\n                }));\n        config.prefix = config.prefix === undefined ? \"/\" : config.prefix;\n        config.separator = config.separator || \"/\";\n        this.config = config;\n        assert(this.routeForID(this.config.defaultRouteID) !== undefined, `missing config for default route: '${this.config.defaultRouteID}'`);\n        if (config.initialRouteID) {\n            const route = this.routeForID(config.initialRouteID);\n            assert(route !== undefined, `missing config for initial route: ${this.config.initialRouteID}`);\n            assert(!isParametricRoute(route), \"initial route MUST not be parametric\");\n        }\n    }\n    /** {@inheritDoc @thi.ng/api#INotify.addListener} */\n    // @ts-ignore: arguments\n    addListener(id, fn, scope) { }\n    /** {@inheritDoc @thi.ng/api#INotify.removeListener} */\n    // @ts-ignore: arguments\n    removeListener(id, fn, scope) { }\n    /** {@inheritDoc @thi.ng/api#INotify.notify} */\n    // @ts-ignore: arguments\n    notify(event) { }\n    start() {\n        if (this.config.initialRouteID) {\n            const route = this.routeForID(this.config.initialRouteID);\n            this.current = { id: route.id, title: route.title, params: {} };\n            this.notify({ id: EVENT_ROUTE_CHANGED, value: this.current });\n        }\n    }\n    /**\n     * Main router function. Attempts to match given input string\n     * against all configured routes. If none matches, falls back\n     * to default route. Before returning, triggers event with\n     * return value as well.\n     *\n     * @param raw - route path to match\n     */\n    route(src) {\n        if (src.charAt(0) === \"#\") {\n            src = src.substr(1);\n        }\n        src = src.substr(this.config.prefix.length);\n        let match = this.matchRoutes(src);\n        if (!match) {\n            if (!this.handleRouteFailure()) {\n                return;\n            }\n            const route = this.routeForID(this.config.defaultRouteID);\n            match = { id: route.id, title: route.title, params: {} };\n        }\n        if (!equiv(match, this.current)) {\n            this.current = match;\n            this.notify({ id: EVENT_ROUTE_CHANGED, value: match });\n        }\n        return match;\n    }\n    format(...args) {\n        let [id, params, hash] = args;\n        let match;\n        switch (args.length) {\n            case 3:\n                match = { id, params };\n                break;\n            case 2:\n                if (isString(id)) {\n                    match = { id, params };\n                }\n                else {\n                    hash = params;\n                    match = id;\n                }\n                break;\n            case 1:\n                match = isString(id) ? { id } : id;\n                break;\n            default:\n                illegalArity(args.length);\n        }\n        const route = this.routeForID(match.id);\n        if (route) {\n            const params = match.params || {};\n            return ((hash ? \"#\" : \"\") +\n                this.config.prefix +\n                route.match\n                    .map((x) => x.charAt(0) === \"?\"\n                    ? (x = params[x.substr(1)]) != null\n                        ? x\n                        : \"NULL\"\n                    : x)\n                    .join(this.config.separator));\n        }\n        else {\n            illegalArgs(`invalid route ID: ${match.id}`);\n        }\n    }\n    routeForID(id) {\n        return this.config.routes.find((route) => route.id === id);\n    }\n    matchRoutes(src) {\n        const routes = this.config.routes;\n        const curr = src.split(this.config.separator);\n        for (let i = 0, n = routes.length; i < n; i++) {\n            const match = this.matchRoute(curr, routes[i]);\n            if (match) {\n                return match;\n            }\n        }\n    }\n    matchRoute(curr, route) {\n        const match = route.match, n = match.length;\n        if (curr.length === n) {\n            const params = {};\n            for (let i = 0; i < n; i++) {\n                const m = match[i];\n                if (m.charAt(0) === \"?\") {\n                    params[m.substr(1)] = curr[i];\n                }\n                else if (curr[i] !== m) {\n                    return;\n                }\n            }\n            if (route.validate &&\n                !this.validateRouteParams(params, route.validate)) {\n                return;\n            }\n            return route.auth\n                ? this.config.authenticator(route, curr, params)\n                : { id: route.id, title: route.title, params };\n        }\n    }\n    validateRouteParams(params, validators) {\n        for (let id in validators) {\n            if (params[id] !== undefined) {\n                const val = validators[id];\n                if (val.coerce) {\n                    params[id] = val.coerce(params[id]);\n                }\n                if (val.check && !val.check(params[id])) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n    handleRouteFailure() {\n        return true;\n    }\n};\nBasicRouter = __decorate([\n    INotifyMixin\n], BasicRouter);\nconst isParametricRoute = (route) => route.match.some((p) => p.charAt(0) === \"?\");\n\nclass HTMLRouter extends BasicRouter {\n    constructor(config) {\n        super(config);\n        this.useFragment = config.useFragment !== false;\n        this.ignoreHashChange = false;\n    }\n    start() {\n        window.addEventListener(\"popstate\", this.handlePopChange());\n        if (this.useFragment) {\n            window.addEventListener(\"hashchange\", this.handleHashChange());\n        }\n        if (this.config.initialRouteID) {\n            const route = this.routeForID(this.config.initialRouteID);\n            this.route(this.format({\n                id: route.id,\n                title: route.title,\n            }));\n        }\n        else {\n            this.route(this.useFragment ? location.hash : location.pathname);\n        }\n    }\n    release() {\n        window.removeEventListener(\"popstate\", this.popHandler);\n        if (this.useFragment) {\n            window.removeEventListener(\"hashchange\", this.hashHandler);\n        }\n    }\n    /**\n     * Like `BasicRouter.route()`, but takes additional arg to control\n     * if this routing operation should manipulate the browser's `history`.\n     * If called from userland, this normally is true. However, we want\n     * to avoid this if called from this router's own event handlers.\n     *\n     * @param raw -\n     * @param pushState -\n     */\n    route(src, pushState = true) {\n        const old = this.current;\n        const route = super.route(src);\n        if (route && !equiv(route, old)) {\n            this.currentPath = this.format(route);\n            if (pushState) {\n                history.pushState(this.currentPath, route.title || window.document.title || \"\", this.currentPath);\n            }\n        }\n        return route;\n    }\n    routeTo(route) {\n        if (this.useFragment) {\n            location.hash = route;\n        }\n        this.route(route);\n    }\n    format(...args) {\n        let match;\n        switch (args.length) {\n            case 2:\n                match = { id: args[0], params: args[1] };\n                break;\n            case 1:\n                match = isString(args[0]) ? { id: args[0] } : args[0];\n                break;\n            default:\n                illegalArity(args.length);\n        }\n        return super.format(match, this.useFragment);\n    }\n    handlePopChange() {\n        return (this.popHandler =\n            this.popHandler ||\n                ((e) => {\n                    this.route(e.state ||\n                        (this.useFragment ? location.hash : location.pathname), false);\n                }).bind(this));\n    }\n    handleHashChange() {\n        return (this.hashHandler =\n            this.hashHandler ||\n                ((e) => {\n                    if (!this.ignoreHashChange) {\n                        const hash = e.newURL.substr(e.newURL.indexOf(\"#\"));\n                        if (hash !== this.currentPath) {\n                            this.route(hash, false);\n                        }\n                    }\n                }).bind(this));\n    }\n    handleRouteFailure() {\n        this.ignoreHashChange = true;\n        location.hash = this.format({\n            id: this.routeForID(this.config.defaultRouteID).id,\n        });\n        this.ignoreHashChange = false;\n        return true;\n    }\n}\n\nexport { EVENT_ROUTE_CHANGED, HTMLRouter };\n", "const option = ([value, label, disabled], sel) => [\n    \"option\",\n    { value, disabled: !!disabled, selected: value === sel },\n    label,\n];\nconst dropdown = (_, attribs, options, sel) => [\"select\", attribs, ...options.map((o) => option(o, sel))];\n\n/**\n * Configurable Higher order title with optional subtitle component. The\n * returned component function takes two args: title, subtitle.\n *\n * @example\n * ```ts\n * const h1 = title();\n * const h2 = title({ element: \"h2\", attribs: { class: \"blue\" }});\n *\n * [h1, \"Hello world\", \"Once upon a time...\"]\n *\n * [h2, \"Chapter 1\", \"Once upon a time...\"]\n * ```\n *\n * @param opts -\n */\nconst title = (_opts) => {\n    const opts = Object.assign({ element: \"h1\", attribs: {}, subElement: \"small\", subAttribs: {} }, _opts);\n    return (_, title, subtitle) => [\n        opts.element,\n        opts.attribs,\n        title,\n        subtitle ? [opts.subElement, opts.subAttribs, subtitle] : undefined,\n    ];\n};\n\nconst DEFAULT_OPTS = {\n    anim: 100,\n    pad: 1,\n    margin: 0,\n    vertical: false,\n    bgOn: { fill: \"#000\" },\n    bgOff: { fill: \"#999\" },\n    fgOn: { fill: \"#fff\" },\n    fgOff: { fill: \"#fff\" },\n};\nconst slideToggleRect = (opts = {}) => {\n    const _opts = Object.assign(Object.assign({ w: 10, h: 10 }, DEFAULT_OPTS), opts);\n    const { w, h, pad, margin, vertical } = _opts;\n    const m2 = margin * 2;\n    const pm = pad + margin;\n    const width = vertical ? w + pad * 2 : (w + pad) * 2;\n    const height = vertical ? (h + pad) * 2 : h + pad * 2;\n    const svgSize = { width: width + m2, height: height + m2 };\n    const style = { transition: `all ${_opts.anim}ms ease-out` };\n    const bgOn = Object.assign(Object.assign({}, _opts.bgOn), { width,\n        height, x: margin, y: margin });\n    const bgOff = Object.assign(Object.assign({}, bgOn), _opts.bgOff);\n    const shapeOn = Object.assign(Object.assign(Object.assign({}, (vertical\n        ? { x: pm, y: pm }\n        : { x: width + margin - pad - w, y: pm })), _opts.fgOn), { style, width: w, height: h });\n    const shapeOff = Object.assign(Object.assign(Object.assign({}, shapeOn), (vertical ? { y: height + margin - pad - h } : { x: pm })), _opts.fgOff);\n    return (_, attribs, state) => [\n        \"svg\",\n        Object.assign(Object.assign({}, svgSize), attribs),\n        [\"rect\", state ? bgOn : bgOff],\n        [\"rect\", state ? shapeOn : shapeOff],\n    ];\n};\n\nexport { dropdown, slideToggleRect, title };\n", "import { i as implementsFunction } from '../common/implements-function-c507affc.js';\nimport { i as illegalArity, a as assert } from '../common/illegal-arity-eb3b66c4.js';\nimport { N as NO_OP, S as SEMAPHORE } from '../common/constants-8dfd1542.js';\nimport { i as illegalArgs } from '../common/illegal-arguments-f9331715.js';\nimport { i as isArray } from '../common/is-array-a7fa88fb.js';\nimport '../common/deferror-480a42fb.js';\n\nconst isArrayLike = (x) => x != null && typeof x !== \"function\" && x.length !== undefined;\n\nconst isIterable = (x) => x != null && typeof x[Symbol.iterator] === \"function\";\n\nconst ensureTransducer = (x) => implementsFunction(x, \"xform\") ? x.xform() : x;\n\nclass Reduced {\n    constructor(val) {\n        this.value = val;\n    }\n    deref() {\n        return this.value;\n    }\n}\nconst reduced = (x) => new Reduced(x);\nconst isReduced = (x) => x instanceof Reduced;\nconst ensureReduced = (x) => x instanceof Reduced ? x : new Reduced(x);\nconst unreduced = (x) => (x instanceof Reduced ? x.deref() : x);\n\nconst parseArgs = (args) => args.length === 2\n    ? [undefined, args[1]]\n    : args.length === 3\n        ? [args[1], args[2]]\n        : illegalArity(args.length);\nfunction reduce(...args) {\n    const rfn = args[0];\n    const init = rfn[0];\n    const complete = rfn[1];\n    const reduce = rfn[2];\n    args = parseArgs(args);\n    const acc = args[0] == null ? init() : args[0];\n    const xs = args[1];\n    return unreduced(complete(implementsFunction(xs, \"$reduce\")\n        ? xs.$reduce(reduce, acc)\n        : isArrayLike(xs)\n            ? reduceArray(reduce, acc, xs)\n            : reduceIterable(reduce, acc, xs)));\n}\nconst reduceArray = (rfn, acc, xs) => {\n    for (let i = 0, n = xs.length; i < n; i++) {\n        acc = rfn(acc, xs[i]);\n        if (isReduced(acc)) {\n            acc = acc.deref();\n            break;\n        }\n    }\n    return acc;\n};\nconst reduceIterable = (rfn, acc, xs) => {\n    for (let x of xs) {\n        acc = rfn(acc, x);\n        if (isReduced(acc)) {\n            acc = acc.deref();\n            break;\n        }\n    }\n    return acc;\n};\n/**\n * Convenience helper for building a full {@link Reducer} using the identity\n * function (i.e. `(x) => x`) as completion step (true for 90% of all\n * bundled transducers).\n *\n * @param init - init step of reducer\n * @param rfn - reduction step of reducer\n */\nconst reducer = (init, rfn) => [init, (acc) => acc, rfn];\n\nfunction push(xs) {\n    return xs\n        ? [...xs]\n        : reducer(() => [], (acc, x) => (acc.push(x), acc));\n}\n\n/**\n * Takes a transducer and input iterable. Returns iterator of\n * transformed results.\n *\n * @param xform -\n * @param xs -\n */\nfunction* iterator(xform, xs) {\n    const rfn = ensureTransducer(xform)(push());\n    const complete = rfn[1];\n    const reduce = rfn[2];\n    for (let x of xs) {\n        const y = reduce([], x);\n        if (isReduced(y)) {\n            yield* unreduced(complete(y.deref()));\n            return;\n        }\n        if (y.length) {\n            yield* y;\n        }\n    }\n    yield* unreduced(complete([]));\n}\n/**\n * Optimized version of {@link iterator} for transducers which are\n * guaranteed to:\n *\n * 1) Only produce none or a single result per input\n * 2) Do not require a `completion` reduction step\n *\n * @param xform -\n * @param xs -\n */\nfunction* iterator1(xform, xs) {\n    const reduce = (ensureTransducer(xform)([NO_OP, NO_OP, (_, x) => x]))[2];\n    for (let x of xs) {\n        let y = reduce(SEMAPHORE, x);\n        if (isReduced(y)) {\n            y = unreduced(y.deref());\n            if (y !== SEMAPHORE) {\n                yield y;\n            }\n            return;\n        }\n        if (y !== SEMAPHORE) {\n            yield y;\n        }\n    }\n}\n/**\n * Helper function used by various transducers to wrap themselves as\n * transforming iterators. Delegates to {@link iterator1} by default.\n *\n * @param xform -\n * @param args -\n * @param impl -\n *\n * @internal\n */\nconst $iter = (xform, args, impl = iterator1) => {\n    const n = args.length - 1;\n    return isIterable(args[n])\n        ? args.length > 1\n            ? impl(xform.apply(null, args.slice(0, n)), args[n])\n            : impl(xform(), args[0])\n        : undefined;\n};\n\n/**\n * Reducer composition helper, internally used by various transducers\n * during initialization. Takes existing reducer `rfn` (a 3-tuple) and a\n * reducing function `fn`. Returns a new reducer tuple.\n *\n * @remarks\n * `rfn[2]` reduces values of type `B` into an accumulator of type `A`.\n * `fn` accepts values of type `C` and produces interim results of type\n * `B`, which are then (possibly) passed to the \"inner\" `rfn[2]`\n * function. Therefore the resulting reducer takes inputs of `C` and an\n * accumulator of type `A`.\n *\n * It is assumed that `fn` internally calls `rfn[2]` to pass its own\n * results for further processing by the nested reducer `rfn`.\n *\n * @example\n * ```ts\n * compR(rfn, fn)\n * // [rfn[0], rfn[1], fn]\n * ```\n *\n * @param rfn -\n * @param fn -\n */\nconst compR = (rfn, fn) => [rfn[0], rfn[1], fn];\n\nfunction map(fn, src) {\n    return isIterable(src)\n        ? iterator1(map(fn), src)\n        : (rfn) => {\n            const r = rfn[2];\n            return compR(rfn, (acc, x) => r(acc, fn(x)));\n        };\n}\n\nfunction transduce(...args) {\n    return $transduce(transduce, reduce, args);\n}\nconst $transduce = (tfn, rfn, args) => {\n    let acc, xs;\n    switch (args.length) {\n        case 4:\n            xs = args[3];\n            acc = args[2];\n            break;\n        case 3:\n            xs = args[2];\n            break;\n        case 2:\n            return map((x) => tfn(args[0], args[1], x));\n        default:\n            illegalArity(args.length);\n    }\n    return rfn(ensureTransducer(args[0])(args[1]), acc, xs);\n};\n\n/**\n * Single-step transducer execution wrapper.\n * Returns array if transducer produces multiple results\n * and undefined if there was no output. Else returns single\n * result value.\n *\n * @remarks\n * Likewise, once a transducer has produced a final / reduced\n * value, all further invocations of the stepper function will\n * return undefined.\n *\n * @example\n * ```ts\n * // single result\n * step(map(x => x * 10))(1);\n * // 10\n *\n * // multiple results\n * step(mapcat(x => [x, x + 1, x + 2]))(1)\n * // [ 1, 2, 3 ]\n *\n * // no result\n * f = step(filter((x) => !(x & 1)))\n * f(1); // undefined\n * f(2); // 2\n *\n * // reduced value termination\n * f = step(take(2));\n * f(1); // 1\n * f(1); // 1\n * f(1); // undefined\n * f(1); // undefined\n * ```\n *\n * @param tx -\n */\nconst step = (tx) => {\n    const { 1: complete, 2: reduce } = ensureTransducer(tx)(push());\n    let done = false;\n    return (x) => {\n        if (!done) {\n            let acc = reduce([], x);\n            done = isReduced(acc);\n            if (done) {\n                acc = complete(acc.deref());\n            }\n            return acc.length === 1 ? acc[0] : acc.length > 0 ? acc : undefined;\n        }\n    };\n};\n\nfunction comp(...fns) {\n    let [a, b, c, d, e, f, g, h, i, j] = fns;\n    switch (fns.length) {\n        case 0:\n            illegalArity(0);\n        case 1:\n            return a;\n        case 2:\n            return (...xs) => a(b(...xs));\n        case 3:\n            return (...xs) => a(b(c(...xs)));\n        case 4:\n            return (...xs) => a(b(c(d(...xs))));\n        case 5:\n            return (...xs) => a(b(c(d(e(...xs)))));\n        case 6:\n            return (...xs) => a(b(c(d(e(f(...xs))))));\n        case 7:\n            return (...xs) => a(b(c(d(e(f(g(...xs)))))));\n        case 8:\n            return (...xs) => a(b(c(d(e(f(g(h(...xs))))))));\n        case 9:\n            return (...xs) => a(b(c(d(e(f(g(h(i(...xs)))))))));\n        case 10:\n        default:\n            const fn = (...xs) => a(b(c(d(e(f(g(h(i(j(...xs))))))))));\n            return fns.length === 10 ? fn : comp(fn, ...fns.slice(10));\n    }\n}\n\nfunction juxt(...fns) {\n    const [a, b, c, d, e, f, g, h] = fns;\n    switch (fns.length) {\n        case 1:\n            return (x) => [a(x)];\n        case 2:\n            return (x) => [a(x), b(x)];\n        case 3:\n            return (x) => [a(x), b(x), c(x)];\n        case 4:\n            return (x) => [a(x), b(x), c(x), d(x)];\n        case 5:\n            return (x) => [a(x), b(x), c(x), d(x), e(x)];\n        case 6:\n            return (x) => [a(x), b(x), c(x), d(x), e(x), f(x)];\n        case 7:\n            return (x) => [a(x), b(x), c(x), d(x), e(x), f(x), g(x)];\n        case 8:\n            return (x) => [a(x), b(x), c(x), d(x), e(x), f(x), g(x), h(x)];\n        default:\n            return (x) => {\n                let res = new Array(fns.length);\n                for (let i = fns.length; --i >= 0;) {\n                    res[i] = fns[i](x);\n                }\n                return res;\n            };\n    }\n}\n\nfunction range(from, to, step) {\n    return new Range(from, to, step);\n}\n/**\n * Simple class wrapper around given range interval and implementing\n * `Iterable` and {@link IReducible} interfaces, the latter is used to\n * accelerate use with {@link (reduce:1)}.\n */\nclass Range {\n    constructor(from, to, step) {\n        if (from === undefined) {\n            from = 0;\n            to = Infinity;\n        }\n        else if (to === undefined) {\n            to = from;\n            from = 0;\n        }\n        step = step === undefined ? (from < to ? 1 : -1) : step;\n        this.from = from;\n        this.to = to;\n        this.step = step;\n    }\n    *[Symbol.iterator]() {\n        let { from, to, step } = this;\n        if (step > 0) {\n            while (from < to) {\n                yield from;\n                from += step;\n            }\n        }\n        else if (step < 0) {\n            while (from > to) {\n                yield from;\n                from += step;\n            }\n        }\n    }\n    $reduce(rfn, acc) {\n        const step = this.step;\n        if (step > 0) {\n            for (let i = this.from, n = this.to; i < n && !isReduced(acc); i += step) {\n                acc = rfn(acc, i);\n            }\n        }\n        else {\n            for (let i = this.from, n = this.to; i > n && !isReduced(acc); i += step) {\n                acc = rfn(acc, i);\n            }\n        }\n        return acc;\n    }\n}\n\nfunction* zip(...src) {\n    const iters = src.map((s) => s[Symbol.iterator]());\n    while (true) {\n        const tuple = [];\n        for (let i of iters) {\n            let v = i.next();\n            if (v.done) {\n                return;\n            }\n            tuple.push(v.value);\n        }\n        yield tuple;\n    }\n}\n\nfunction filter(pred, src) {\n    return isIterable(src)\n        ? iterator1(filter(pred), src)\n        : (rfn) => {\n            const r = rfn[2];\n            return compR(rfn, (acc, x) => (pred(x) ? r(acc, x) : acc));\n        };\n}\n\n/**\n * Attempts to obtain an iterator from `x` and throws error if `x` is\n * not iterable.\n *\n * @param x -\n */\nconst ensureIterable = (x) => {\n    (x == null || !x[Symbol.iterator]) &&\n        illegalArgs(`value is not iterable: ${x}`);\n    return x;\n};\n\n/**\n * Helper function to avoid unnecessary copying if `x` is already an\n * array.\n *\n * @remarks\n * First checks if `x` is an array and if so returns it. Else attempts\n * to obtain an iterator from `x` and if successful collects it as array\n * and returns it. Throws error if `x` isn't iterable.\n *\n * @param x -\n */\nconst ensureArray = (x) => isArray(x) ? x : [...ensureIterable(x)];\n\nconst INV_MAX = 1 / 0xffffffff;\nclass ARandom {\n    float(norm = 1) {\n        return this.int() * INV_MAX * norm;\n    }\n    norm(norm = 1) {\n        return (this.int() * INV_MAX - 0.5) * 2 * norm;\n    }\n    minmax(min, max) {\n        return this.float() * (max - min) + min;\n    }\n}\n\nconst random = Math.random;\n/**\n * A `Math.random()` based {@link IRandom} implementation. Also @see\n * {@link SYSTEM}.\n */\nclass SystemRandom extends ARandom {\n    int() {\n        return (random() * 4294967296) /* 2**32 */ >>> 0;\n    }\n    float(norm = 1) {\n        return random() * norm;\n    }\n    norm(norm = 1) {\n        return (random() - 0.5) * 2 * norm;\n    }\n}\n/**\n * Used as default PRNG throughout most other thi.ng projects, though usually is\n * configurable.\n */\nconst SYSTEM = new SystemRandom();\n\n/**\n * Returns a no-arg function which produces a random choice of given weighted\n * `choices` and using given {@link IRandom} instance (default {@link SYSTEM}.\n * If `weights` are given, it must be the same size as `choices`. If omitted,\n * each choice will have same probability.\n *\n * @remarks\n * Throws an error if the `choices` array is empty (requires at least 1 item).\n * If the total sum of `weights` is <= 0 a warning is printed to the console and\n * the resulting function will only ever return the first `choice`.\n *\n * Based on:\n * {@link https://www.electricmonk.nl/log/2009/12/23/weighted-random-distribution/}\n *\n * @param choices -\n * @param weights - optional weights\n */\nconst weightedRandom = (choices, weights, rnd = SYSTEM) => {\n    const n = choices.length;\n    assert(n > 0, \"no choices given\");\n    const opts = weights\n        ? choices\n            .map((x, i) => [weights[i], x])\n            .sort((a, b) => b[0] - a[0])\n        : choices.map((x) => [1, x]);\n    const total = opts.reduce((acc, o) => acc + o[0], 0);\n    total <= 0 && console.warn(\"total weights <= 0\");\n    return () => {\n        const r = rnd.float(total);\n        let sum = total;\n        for (let i = 0; i < n; i++) {\n            sum -= opts[i][0];\n            if (sum <= r) {\n                return opts[i][1];\n            }\n        }\n        return undefined;\n    };\n};\n\nfunction comp$1(...fns) {\n    fns = fns.map(ensureTransducer);\n    return comp.apply(null, fns);\n}\n\nfunction take(n, src) {\n    return isIterable(src)\n        ? iterator(take(n), src)\n        : (rfn) => {\n            const r = rfn[2];\n            let m = n;\n            return compR(rfn, (acc, x) => --m > 0\n                ? r(acc, x)\n                : m === 0\n                    ? ensureReduced(r(acc, x))\n                    : reduced(acc));\n        };\n}\n\nfunction multiplex(...args) {\n    return map(juxt.apply(null, args.map(step)));\n}\n\nconst renamer = (kmap) => {\n    const ks = Object.keys(kmap);\n    const [a2, b2, c2] = ks;\n    const [a1, b1, c1] = ks.map((k) => kmap[k]);\n    switch (ks.length) {\n        case 3:\n            return (x) => {\n                const res = {};\n                let v;\n                (v = x[c1]), v !== undefined && (res[c2] = v);\n                (v = x[b1]), v !== undefined && (res[b2] = v);\n                (v = x[a1]), v !== undefined && (res[a2] = v);\n                return res;\n            };\n        case 2:\n            return (x) => {\n                const res = {};\n                let v;\n                (v = x[b1]), v !== undefined && (res[b2] = v);\n                (v = x[a1]), v !== undefined && (res[a2] = v);\n                return res;\n            };\n        case 1:\n            return (x) => {\n                const res = {};\n                let v = x[a1];\n                v !== undefined && (res[a2] = v);\n                return res;\n            };\n        default:\n            return (x) => {\n                let k, v;\n                const res = {};\n                for (let i = ks.length - 1; i >= 0; i--) {\n                    (k = ks[i]),\n                        (v = x[kmap[k]]),\n                        v !== undefined && (res[k] = v);\n                }\n                return res;\n            };\n    }\n};\n\nfunction rename(...args) {\n    const iter = args.length > 2 && $iter(rename, args);\n    if (iter) {\n        return iter;\n    }\n    let kmap = args[0];\n    if (isArray(kmap)) {\n        kmap = kmap.reduce((acc, k, i) => ((acc[k] = i), acc), {});\n    }\n    if (args[1]) {\n        const ks = Object.keys(kmap);\n        return map((y) => transduce(comp$1(map((k) => [k, y[kmap[k]]]), filter((x) => x[1] !== undefined)), args[1], ks));\n    }\n    else {\n        return map(renamer(kmap));\n    }\n}\n\nfunction multiplexObj(...args) {\n    const iter = $iter(multiplexObj, args);\n    if (iter) {\n        return iter;\n    }\n    const [xforms, rfn] = args;\n    const ks = Object.keys(xforms);\n    return comp$1(multiplex.apply(null, ks.map((k) => xforms[k])), rename(ks, rfn));\n}\n\n/**\n * Iterator yielding return values of given no-arg function `fn`. If `n`\n * is given, only that many values will be produced, else the iterator\n * is infinite.\n *\n * @example\n * ```ts\n * [...repeatedly(() => Math.floor(Math.random() * 10), 5)]\n * // [7, 0, 9, 3, 1]\n * ```\n *\n * @param fn - value producer\n * @param n - num values (default: )\n */\nfunction* repeatedly(fn, n = Infinity) {\n    while (n-- > 0) {\n        yield fn();\n    }\n}\n\n/**\n * Returns an infinite iterator of random choices and their (optional)\n * weights. If `weights` is given, it must have at least the same size\n * as `choices`. If omitted, each choice will have same probability.\n *\n * @example\n * ```ts\n * transduce(take(1000), frequencies(), choices(\"abcd\", [1, 0.5, 0.25, 0.125]))\n * // Map { 'c' => 132, 'a' => 545, 'b' => 251, 'd' => 72 }\n * ```\n *\n * {@link @thi.ng/random#weightedRandom}\n *\n * @param choices -\n * @param weights -\n */\nconst choices = (choices, weights, rnd = SYSTEM) => repeatedly(weights\n    ? weightedRandom(ensureArray(choices), weights, rnd)\n    : () => choices[rnd.float(choices.length) | 0]);\n\n/**\n * Iterator yielding an infinite (by default) repetition of given value\n * `x`. If `n` is given, only produces that many values.\n *\n * See also: {@link repeatedly}\n *\n * @example\n * ```ts\n * [...repeat(42, 5)]\n * // [42, 42, 42, 42, 42]\n * ```\n *\n * @param x - value to repeat\n * @param n - num values (default: )\n */\nfunction* repeat(x, n = Infinity) {\n    while (n-- > 0) {\n        yield x;\n    }\n}\n\nexport { choices, comp$1 as comp, filter, map, multiplexObj, push, range, repeat, take, transduce, zip };\n", "var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction createCommonjsModule(fn, basedir, module) {\n\treturn module = {\n\t\tpath: basedir,\n\t\texports: {},\n\t\trequire: function (path, base) {\n\t\t\treturn commonjsRequire(path, (base === undefined || base === null) ? module.path : base);\n\t\t}\n\t}, fn(module, module.exports), module.exports;\n}\n\nfunction commonjsRequire () {\n\tthrow new Error('Dynamic requires are not currently supported by @rollup/plugin-commonjs');\n}\n\nexport { commonjsGlobal as a, createCommonjsModule as c };\n", "import { c as createCommonjsModule, a as commonjsGlobal } from './common/_commonjsHelpers-eb5a497e.js';\n\nvar webmidi_min = createCommonjsModule(function (module) {\n/*\n\nWebMidi v2.5.2\n\nWebMidi.js helps you tame the Web MIDI API. Send and receive MIDI messages with ease. Control instruments with user-friendly functions (playNote, sendPitchBend, etc.). React to MIDI input with simple event listeners (noteon, pitchbend, controlchange, etc.).\nhttps://github.com/djipco/webmidi\n\n\nThe MIT License (MIT)\n\nCopyright (c) 2015-2019, Jean-Philippe Ct\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and\nassociated documentation files (the \"Software\"), to deal in the Software without restriction,\nincluding without limitation the rights to use, copy, modify, merge, publish, distribute,\nsublicense, and/or sell copies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial\nportions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT\nNOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES\nOR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\nCONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n*/\n\n\n!function(scope){function WebMidi(){if(WebMidi.prototype._singleton)throw new Error(\"WebMidi is a singleton, it cannot be instantiated directly.\");(WebMidi.prototype._singleton=this)._inputs=[],this._outputs=[],this._userHandlers={},this._stateChangeQueue=[],this._processingStateChange=!1,this._midiInterfaceEvents=[\"connected\",\"disconnected\"],this._nrpnBuffer=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]],this._nrpnEventsEnabled=!0,this._nrpnTypes=[\"entry\",\"increment\",\"decrement\"],this._notes=[\"C\",\"C#\",\"D\",\"D#\",\"E\",\"F\",\"F#\",\"G\",\"G#\",\"A\",\"A#\",\"B\"],this._semitones={C:0,D:2,E:4,F:5,G:7,A:9,B:11},Object.defineProperties(this,{MIDI_SYSTEM_MESSAGES:{value:{sysex:240,timecode:241,songposition:242,songselect:243,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1},writable:!1,enumerable:!0,configurable:!1},MIDI_CHANNEL_MESSAGES:{value:{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,channelmode:11,nrpn:11,programchange:12,channelaftertouch:13,pitchbend:14},writable:!1,enumerable:!0,configurable:!1},MIDI_REGISTERED_PARAMETER:{value:{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]},writable:!1,enumerable:!0,configurable:!1},MIDI_CONTROL_CHANGE_MESSAGES:{value:{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101},writable:!1,enumerable:!0,configurable:!1},MIDI_NRPN_MESSAGES:{value:{entrymsb:6,entrylsb:38,increment:96,decrement:97,paramlsb:98,parammsb:99,nullactiveparameter:127},writable:!1,enumerable:!0,configurable:!1},MIDI_CHANNEL_MODE_MESSAGES:{value:{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127},writable:!1,enumerable:!0,configurable:!1},octaveOffset:{value:0,writable:!0,enumerable:!0,configurable:!1}}),Object.defineProperties(this,{supported:{enumerable:!0,get:function(){return \"requestMIDIAccess\"in navigator}},enabled:{enumerable:!0,get:function(){return void 0!==this.interface}.bind(this)},inputs:{enumerable:!0,get:function(){return this._inputs}.bind(this)},outputs:{enumerable:!0,get:function(){return this._outputs}.bind(this)},sysexEnabled:{enumerable:!0,get:function(){return !(!this.interface||!this.interface.sysexEnabled)}.bind(this)},nrpnEventsEnabled:{enumerable:!0,get:function(){return !!this._nrpnEventsEnabled}.bind(this),set:function(enabled){return this._nrpnEventsEnabled=enabled,this._nrpnEventsEnabled}},nrpnTypes:{enumerable:!0,get:function(){return this._nrpnTypes}.bind(this)},time:{enumerable:!0,get:function(){return performance.now()}}});}var wm=new WebMidi;function Input(midiInput){var that=this;this._userHandlers={channel:{},system:{}},this._midiInput=midiInput,Object.defineProperties(this,{connection:{enumerable:!0,get:function(){return that._midiInput.connection}},id:{enumerable:!0,get:function(){return that._midiInput.id}},manufacturer:{enumerable:!0,get:function(){return that._midiInput.manufacturer}},name:{enumerable:!0,get:function(){return that._midiInput.name}},state:{enumerable:!0,get:function(){return that._midiInput.state}},type:{enumerable:!0,get:function(){return that._midiInput.type}}}),this._initializeUserHandlers(),this._midiInput.onmidimessage=this._onMidiMessage.bind(this);}function Output(midiOutput){var that=this;this._midiOutput=midiOutput,Object.defineProperties(this,{connection:{enumerable:!0,get:function(){return that._midiOutput.connection}},id:{enumerable:!0,get:function(){return that._midiOutput.id}},manufacturer:{enumerable:!0,get:function(){return that._midiOutput.manufacturer}},name:{enumerable:!0,get:function(){return that._midiOutput.name}},state:{enumerable:!0,get:function(){return that._midiOutput.state}},type:{enumerable:!0,get:function(){return that._midiOutput.type}}});}WebMidi.prototype.enable=function(callback,sysex){this.enabled||(this.supported?navigator.requestMIDIAccess({sysex:sysex}).then(function(midiAccess){var promiseTimeout,events=[],promises=[];this.interface=midiAccess,this._resetInterfaceUserHandlers(),this.interface.onstatechange=function(e){events.push(e);};for(var inputs=midiAccess.inputs.values(),input=inputs.next();input&&!input.done;input=inputs.next())promises.push(input.value.open());for(var outputs=midiAccess.outputs.values(),output=outputs.next();output&&!output.done;output=outputs.next())promises.push(output.value.open());function onPortsOpen(){clearTimeout(promiseTimeout),this._updateInputsAndOutputs(),this.interface.onstatechange=this._onInterfaceStateChange.bind(this),\"function\"==typeof callback&&callback.call(this),events.forEach(function(event){this._onInterfaceStateChange(event);}.bind(this));}promiseTimeout=setTimeout(onPortsOpen.bind(this),200),Promise&&Promise.all(promises).catch(function(err){}).then(onPortsOpen.bind(this));}.bind(this),function(err){\"function\"==typeof callback&&callback.call(this,err);}.bind(this)):\"function\"==typeof callback&&callback(new Error(\"The Web MIDI API is not supported by your browser.\")));},WebMidi.prototype.disable=function(){if(!this.supported)throw new Error(\"The Web MIDI API is not supported by your browser.\");this.enabled&&(this.removeListener(),this.inputs.forEach(function(input){input.removeListener();})),this.interface&&(this.interface.onstatechange=void 0),this.interface=void 0,this._inputs=[],this._outputs=[],this._nrpnEventsEnabled=!0,this._resetInterfaceUserHandlers();},WebMidi.prototype.addListener=function(type,listener){if(!this.enabled)throw new Error(\"WebMidi must be enabled before adding event listeners.\");if(\"function\"!=typeof listener)throw new TypeError(\"The 'listener' parameter must be a function.\");if(!(0<=this._midiInterfaceEvents.indexOf(type)))throw new TypeError(\"The specified event type is not supported.\");return this._userHandlers[type].push(listener),this},WebMidi.prototype.hasListener=function(type,listener){if(!this.enabled)throw new Error(\"WebMidi must be enabled before checking event listeners.\");if(\"function\"!=typeof listener)throw new TypeError(\"The 'listener' parameter must be a function.\");if(!(0<=this._midiInterfaceEvents.indexOf(type)))throw new TypeError(\"The specified event type is not supported.\");for(var o=0;o<this._userHandlers[type].length;o++)if(this._userHandlers[type][o]===listener)return !0;return !1},WebMidi.prototype.removeListener=function(type,listener){if(!this.enabled)throw new Error(\"WebMidi must be enabled before removing event listeners.\");if(void 0!==listener&&\"function\"!=typeof listener)throw new TypeError(\"The 'listener' parameter must be a function.\");if(0<=this._midiInterfaceEvents.indexOf(type))if(listener)for(var o=0;o<this._userHandlers[type].length;o++)this._userHandlers[type][o]===listener&&this._userHandlers[type].splice(o,1);else this._userHandlers[type]=[];else {if(void 0!==type)throw new TypeError(\"The specified event type is not supported.\");this._resetInterfaceUserHandlers();}return this},WebMidi.prototype.toMIDIChannels=function(channel){var channels;if(\"all\"===channel||void 0===channel)channels=[\"all\"];else {if(\"none\"===channel)return channels=[];channels=Array.isArray(channel)?channel:[channel];}return -1<channels.indexOf(\"all\")&&(channels=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),channels.map(function(ch){return parseInt(ch)}).filter(function(ch){return 1<=ch&&ch<=16})},WebMidi.prototype.getInputById=function(id){if(!this.enabled)throw new Error(\"WebMidi is not enabled.\");id=String(id);for(var i=0;i<this.inputs.length;i++)if(this.inputs[i].id===id)return this.inputs[i];return !1},WebMidi.prototype.getOutputById=function(id){if(!this.enabled)throw new Error(\"WebMidi is not enabled.\");id=String(id);for(var i=0;i<this.outputs.length;i++)if(this.outputs[i].id===id)return this.outputs[i];return !1},WebMidi.prototype.getInputByName=function(name){if(!this.enabled)throw new Error(\"WebMidi is not enabled.\");for(var i=0;i<this.inputs.length;i++)if(~this.inputs[i].name.indexOf(name))return this.inputs[i];return !1},WebMidi.prototype.getOctave=function(number){if(null!=number&&0<=number&&number<=127)return Math.floor(Math.floor(number)/12-1)+Math.floor(wm.octaveOffset)},WebMidi.prototype.getOutputByName=function(name){if(!this.enabled)throw new Error(\"WebMidi is not enabled.\");for(var i=0;i<this.outputs.length;i++)if(~this.outputs[i].name.indexOf(name))return this.outputs[i];return !1},WebMidi.prototype.guessNoteNumber=function(input){var output=!1;if(input&&input.toFixed&&0<=input&&input<=127?output=Math.round(input):0<=parseInt(input)&&parseInt(input)<=127?output=parseInt(input):(\"string\"==typeof input||input instanceof String)&&(output=this.noteNameToNumber(input)),!1===output)throw new Error(\"Invalid input value (\"+input+\").\");return output},WebMidi.prototype.noteNameToNumber=function(name){\"string\"!=typeof name&&(name=\"\");var matches=name.match(/([CDEFGAB])(#{0,2}|b{0,2})(-?\\d+)/i);if(!matches)throw new RangeError(\"Invalid note name.\");var semitones=wm._semitones[matches[1].toUpperCase()],result=12*(parseInt(matches[3])+1-Math.floor(wm.octaveOffset))+semitones;if(-1<matches[2].toLowerCase().indexOf(\"b\")?result-=matches[2].length:-1<matches[2].toLowerCase().indexOf(\"#\")&&(result+=matches[2].length),result<0||127<result)throw new RangeError(\"Invalid note name or note outside valid range.\");return result},WebMidi.prototype._updateInputsAndOutputs=function(){this._updateInputs(),this._updateOutputs();},WebMidi.prototype._updateInputs=function(){for(var i=0;i<this._inputs.length;i++){for(var remove=!0,updated=this.interface.inputs.values(),input=updated.next();input&&!input.done;input=updated.next())if(this._inputs[i]._midiInput===input.value){remove=!1;break}remove&&this._inputs.splice(i,1);}this.interface&&this.interface.inputs.forEach(function(nInput){for(var add=!0,j=0;j<this._inputs.length;j++)this._inputs[j]._midiInput===nInput&&(add=!1);add&&this._inputs.push(new Input(nInput));}.bind(this));},WebMidi.prototype._updateOutputs=function(){for(var i=0;i<this._outputs.length;i++){for(var remove=!0,updated=this.interface.outputs.values(),output=updated.next();output&&!output.done;output=updated.next())if(this._outputs[i]._midiOutput===output.value){remove=!1;break}remove&&this._outputs.splice(i,1);}this.interface&&this.interface.outputs.forEach(function(nOutput){for(var add=!0,j=0;j<this._outputs.length;j++)this._outputs[j]._midiOutput===nOutput&&(add=!1);add&&this._outputs.push(new Output(nOutput));}.bind(this));},WebMidi.prototype._onInterfaceStateChange=function(e){this._updateInputsAndOutputs();var event={timestamp:e.timeStamp,type:e.port.state};this.interface&&\"connected\"===e.port.state?\"output\"===e.port.type?event.port=this.getOutputById(e.port.id):\"input\"===e.port.type&&(event.port=this.getInputById(e.port.id)):event.port={connection:\"closed\",id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this._userHandlers[e.port.state].forEach(function(handler){handler(event);});},WebMidi.prototype._resetInterfaceUserHandlers=function(){for(var i=0;i<this._midiInterfaceEvents.length;i++)this._userHandlers[this._midiInterfaceEvents[i]]=[];},Input.prototype.on=Input.prototype.addListener=function(type,channel,listener){var that=this;if(void 0===channel&&(channel=\"all\"),Array.isArray(channel)||(channel=[channel]),channel.forEach(function(item){if(\"all\"!==item&&!(1<=item&&item<=16))throw new RangeError(\"The 'channel' parameter is invalid.\")}),\"function\"!=typeof listener)throw new TypeError(\"The 'listener' parameter must be a function.\");if(void 0!==wm.MIDI_SYSTEM_MESSAGES[type])this._userHandlers.system[type]||(this._userHandlers.system[type]=[]),this._userHandlers.system[type].push(listener);else {if(void 0===wm.MIDI_CHANNEL_MESSAGES[type])throw new TypeError(\"The specified event type is not supported.\");if(-1<channel.indexOf(\"all\")){channel=[];for(var j=1;j<=16;j++)channel.push(j);}this._userHandlers.channel[type]||(this._userHandlers.channel[type]=[]),channel.forEach(function(ch){that._userHandlers.channel[type][ch]||(that._userHandlers.channel[type][ch]=[]),that._userHandlers.channel[type][ch].push(listener);});}return this},Input.prototype.hasListener=function(type,channel,listener){var that=this;if(\"function\"!=typeof listener)throw new TypeError(\"The 'listener' parameter must be a function.\");if(void 0===channel&&(channel=\"all\"),channel.constructor!==Array&&(channel=[channel]),void 0!==wm.MIDI_SYSTEM_MESSAGES[type]){for(var o=0;o<this._userHandlers.system[type].length;o++)if(this._userHandlers.system[type][o]===listener)return !0}else if(void 0!==wm.MIDI_CHANNEL_MESSAGES[type]){if(-1<channel.indexOf(\"all\")){channel=[];for(var j=1;j<=16;j++)channel.push(j);}return !!this._userHandlers.channel[type]&&channel.every(function(chNum){var listeners=that._userHandlers.channel[type][chNum];return listeners&&-1<listeners.indexOf(listener)})}return !1},Input.prototype.removeListener=function(type,channel,listener){var that=this;if(void 0!==listener&&\"function\"!=typeof listener)throw new TypeError(\"The 'listener' parameter must be a function.\");if(void 0===channel&&(channel=\"all\"),channel.constructor!==Array&&(channel=[channel]),void 0!==wm.MIDI_SYSTEM_MESSAGES[type])if(void 0===listener)this._userHandlers.system[type]=[];else for(var o=0;o<this._userHandlers.system[type].length;o++)this._userHandlers.system[type][o]===listener&&this._userHandlers.system[type].splice(o,1);else if(void 0!==wm.MIDI_CHANNEL_MESSAGES[type]){if(-1<channel.indexOf(\"all\")){channel=[];for(var j=1;j<=16;j++)channel.push(j);}if(!this._userHandlers.channel[type])return this;channel.forEach(function(chNum){var listeners=that._userHandlers.channel[type][chNum];if(listeners)if(void 0===listener)that._userHandlers.channel[type][chNum]=[];else for(var l=0;l<listeners.length;l++)listeners[l]===listener&&listeners.splice(l,1);});}else {if(void 0!==type)throw new TypeError(\"The specified event type is not supported.\");this._initializeUserHandlers();}return this},Input.prototype._initializeUserHandlers=function(){for(var prop1 in wm.MIDI_CHANNEL_MESSAGES)Object.prototype.hasOwnProperty.call(wm.MIDI_CHANNEL_MESSAGES,prop1)&&(this._userHandlers.channel[prop1]={});for(var prop2 in wm.MIDI_SYSTEM_MESSAGES)Object.prototype.hasOwnProperty.call(wm.MIDI_SYSTEM_MESSAGES,prop2)&&(this._userHandlers.system[prop2]=[]);},Input.prototype._onMidiMessage=function(e){if(0<this._userHandlers.system.midimessage.length){var event={target:this,data:e.data,timestamp:e.timeStamp,type:\"midimessage\"};this._userHandlers.system.midimessage.forEach(function(callback){callback(event);});}e.data[0]<240?(this._parseChannelEvent(e),this._parseNrpnEvent(e)):e.data[0]<=255&&this._parseSystemEvent(e);},Input.prototype._parseNrpnEvent=function(e){var data1,data2,command=e.data[0]>>4,channelBufferIndex=15&e.data[0],channel=1+channelBufferIndex;if(1<e.data.length&&(data1=e.data[1],data2=2<e.data.length?e.data[2]:void 0),wm.nrpnEventsEnabled&&command===wm.MIDI_CHANNEL_MESSAGES.controlchange&&(data1>=wm.MIDI_NRPN_MESSAGES.increment&&data1<=wm.MIDI_NRPN_MESSAGES.parammsb||data1===wm.MIDI_NRPN_MESSAGES.entrymsb||data1===wm.MIDI_NRPN_MESSAGES.entrylsb)){var ccEvent={target:this,type:\"controlchange\",data:e.data,timestamp:e.timeStamp,channel:channel,controller:{number:data1,name:this.getCcNameByNumber(data1)},value:data2};if(ccEvent.controller.number===wm.MIDI_NRPN_MESSAGES.parammsb&&ccEvent.value!=wm.MIDI_NRPN_MESSAGES.nullactiveparameter)wm._nrpnBuffer[channelBufferIndex]=[],wm._nrpnBuffer[channelBufferIndex][0]=ccEvent;else if(1===wm._nrpnBuffer[channelBufferIndex].length&&ccEvent.controller.number===wm.MIDI_NRPN_MESSAGES.paramlsb)wm._nrpnBuffer[channelBufferIndex].push(ccEvent);else if(2!==wm._nrpnBuffer[channelBufferIndex].length||ccEvent.controller.number!==wm.MIDI_NRPN_MESSAGES.increment&&ccEvent.controller.number!==wm.MIDI_NRPN_MESSAGES.decrement&&ccEvent.controller.number!==wm.MIDI_NRPN_MESSAGES.entrymsb)if(3===wm._nrpnBuffer[channelBufferIndex].length&&wm._nrpnBuffer[channelBufferIndex][2].number===wm.MIDI_NRPN_MESSAGES.entrymsb&&ccEvent.controller.number===wm.MIDI_NRPN_MESSAGES.entrylsb)wm._nrpnBuffer[channelBufferIndex].push(ccEvent);else if(3<=wm._nrpnBuffer[channelBufferIndex].length&&wm._nrpnBuffer[channelBufferIndex].length<=4&&ccEvent.controller.number===wm.MIDI_NRPN_MESSAGES.parammsb&&ccEvent.value===wm.MIDI_NRPN_MESSAGES.nullactiveparameter)wm._nrpnBuffer[channelBufferIndex].push(ccEvent);else if(4<=wm._nrpnBuffer[channelBufferIndex].length&&wm._nrpnBuffer[channelBufferIndex].length<=5&&ccEvent.controller.number===wm.MIDI_NRPN_MESSAGES.paramlsb&&ccEvent.value===wm.MIDI_NRPN_MESSAGES.nullactiveparameter){wm._nrpnBuffer[channelBufferIndex].push(ccEvent);var rawData=[];wm._nrpnBuffer[channelBufferIndex].forEach(function(ev){rawData.push(ev.data);});var nrpnNumber=wm._nrpnBuffer[channelBufferIndex][0].value<<7|wm._nrpnBuffer[channelBufferIndex][1].value,nrpnValue=wm._nrpnBuffer[channelBufferIndex][2].value;6===wm._nrpnBuffer[channelBufferIndex].length&&(nrpnValue=wm._nrpnBuffer[channelBufferIndex][2].value<<7|wm._nrpnBuffer[channelBufferIndex][3].value);var nrpnControllerType=\"\";switch(wm._nrpnBuffer[channelBufferIndex][2].controller.number){case wm.MIDI_NRPN_MESSAGES.entrymsb:nrpnControllerType=wm._nrpnTypes[0];break;case wm.MIDI_NRPN_MESSAGES.increment:nrpnControllerType=wm._nrpnTypes[1];break;case wm.MIDI_NRPN_MESSAGES.decrement:nrpnControllerType=wm._nrpnTypes[2];break;default:throw new Error(\"The NPRN type was unidentifiable.\")}var nrpnEvent={timestamp:ccEvent.timestamp,channel:ccEvent.channel,type:\"nrpn\",data:rawData,controller:{number:nrpnNumber,type:nrpnControllerType,name:\"Non-Registered Parameter \"+nrpnNumber},value:nrpnValue};wm._nrpnBuffer[channelBufferIndex]=[],this._userHandlers.channel[nrpnEvent.type]&&this._userHandlers.channel[nrpnEvent.type][nrpnEvent.channel]&&this._userHandlers.channel[nrpnEvent.type][nrpnEvent.channel].forEach(function(callback){callback(nrpnEvent);});}else wm._nrpnBuffer[channelBufferIndex]=[];else wm._nrpnBuffer[channelBufferIndex].push(ccEvent);}},Input.prototype._parseChannelEvent=function(e){var data1,data2,command=e.data[0]>>4,channel=1+(15&e.data[0]);1<e.data.length&&(data1=e.data[1],data2=2<e.data.length?e.data[2]:void 0);var event={target:this,data:e.data,timestamp:e.timeStamp,channel:channel};command===wm.MIDI_CHANNEL_MESSAGES.noteoff||command===wm.MIDI_CHANNEL_MESSAGES.noteon&&0===data2?(event.type=\"noteoff\",event.note={number:data1,name:wm._notes[data1%12],octave:wm.getOctave(data1)},event.velocity=data2/127,event.rawVelocity=data2):command===wm.MIDI_CHANNEL_MESSAGES.noteon?(event.type=\"noteon\",event.note={number:data1,name:wm._notes[data1%12],octave:wm.getOctave(data1)},event.velocity=data2/127,event.rawVelocity=data2):command===wm.MIDI_CHANNEL_MESSAGES.keyaftertouch?(event.type=\"keyaftertouch\",event.note={number:data1,name:wm._notes[data1%12],octave:wm.getOctave(data1)},event.value=data2/127):command===wm.MIDI_CHANNEL_MESSAGES.controlchange&&0<=data1&&data1<=119?(event.type=\"controlchange\",event.controller={number:data1,name:this.getCcNameByNumber(data1)},event.value=data2):command===wm.MIDI_CHANNEL_MESSAGES.channelmode&&120<=data1&&data1<=127?(event.type=\"channelmode\",event.controller={number:data1,name:this.getChannelModeByNumber(data1)},event.value=data2):command===wm.MIDI_CHANNEL_MESSAGES.programchange?(event.type=\"programchange\",event.value=data1):command===wm.MIDI_CHANNEL_MESSAGES.channelaftertouch?(event.type=\"channelaftertouch\",event.value=data1/127):command===wm.MIDI_CHANNEL_MESSAGES.pitchbend?(event.type=\"pitchbend\",event.value=((data2<<7)+data1-8192)/8192):event.type=\"unknownchannelmessage\",this._userHandlers.channel[event.type]&&this._userHandlers.channel[event.type][channel]&&this._userHandlers.channel[event.type][channel].forEach(function(callback){callback(event);});},Input.prototype.getCcNameByNumber=function(number){if(!(0<=(number=Math.floor(number))&&number<=119))throw new RangeError(\"The control change number must be between 0 and 119.\");for(var cc in wm.MIDI_CONTROL_CHANGE_MESSAGES)if(Object.prototype.hasOwnProperty.call(wm.MIDI_CONTROL_CHANGE_MESSAGES,cc)&&number===wm.MIDI_CONTROL_CHANGE_MESSAGES[cc])return cc},Input.prototype.getChannelModeByNumber=function(number){if(!(120<=(number=Math.floor(number))&&status<=127))throw new RangeError(\"The control change number must be between 120 and 127.\");for(var cm in wm.MIDI_CHANNEL_MODE_MESSAGES)if(Object.prototype.hasOwnProperty.call(wm.MIDI_CHANNEL_MODE_MESSAGES,cm)&&number===wm.MIDI_CHANNEL_MODE_MESSAGES[cm])return cm},Input.prototype._parseSystemEvent=function(e){var command=e.data[0],event={target:this,data:e.data,timestamp:e.timeStamp};command===wm.MIDI_SYSTEM_MESSAGES.sysex?event.type=\"sysex\":command===wm.MIDI_SYSTEM_MESSAGES.timecode?event.type=\"timecode\":command===wm.MIDI_SYSTEM_MESSAGES.songposition?event.type=\"songposition\":command===wm.MIDI_SYSTEM_MESSAGES.songselect?(event.type=\"songselect\",event.song=e.data[1]):command===wm.MIDI_SYSTEM_MESSAGES.tuningrequest?event.type=\"tuningrequest\":command===wm.MIDI_SYSTEM_MESSAGES.clock?event.type=\"clock\":command===wm.MIDI_SYSTEM_MESSAGES.start?event.type=\"start\":command===wm.MIDI_SYSTEM_MESSAGES.continue?event.type=\"continue\":command===wm.MIDI_SYSTEM_MESSAGES.stop?event.type=\"stop\":command===wm.MIDI_SYSTEM_MESSAGES.activesensing?event.type=\"activesensing\":command===wm.MIDI_SYSTEM_MESSAGES.reset?event.type=\"reset\":event.type=\"unknownsystemmessage\",this._userHandlers.system[event.type]&&this._userHandlers.system[event.type].forEach(function(callback){callback(event);});},Output.prototype.send=function(status,data,timestamp){if(!(128<=status&&status<=255))throw new RangeError(\"The status byte must be an integer between 128 (0x80) and 255 (0xFF).\");void 0===data&&(data=[]),Array.isArray(data)||(data=[data]);var message=[];return data.forEach(function(item){var parsed=Math.floor(item);if(!(0<=parsed&&parsed<=255))throw new RangeError(\"Data bytes must be integers between 0 (0x00) and 255 (0xFF).\");message.push(parsed);}),this._midiOutput.send([status].concat(message),parseFloat(timestamp)||0),this},Output.prototype.sendSysex=function(manufacturer,data,options){if(!wm.sysexEnabled)throw new Error(\"Sysex message support must first be activated.\");return options=options||{},manufacturer=[].concat(manufacturer),data.forEach(function(item){if(item<0||127<item)throw new RangeError(\"The data bytes of a sysex message must be integers between 0 (0x00) and 127 (0x7F).\")}),data=manufacturer.concat(data,wm.MIDI_SYSTEM_MESSAGES.sysexend),this.send(wm.MIDI_SYSTEM_MESSAGES.sysex,data,this._parseTimeParameter(options.time)),this},Output.prototype.sendTimecodeQuarterFrame=function(value,options){return options=options||{},this.send(wm.MIDI_SYSTEM_MESSAGES.timecode,value,this._parseTimeParameter(options.time)),this},Output.prototype.sendSongPosition=function(value,options){options=options||{};var msb=(value=Math.floor(value)||0)>>7&127,lsb=127&value;return this.send(wm.MIDI_SYSTEM_MESSAGES.songposition,[msb,lsb],this._parseTimeParameter(options.time)),this},Output.prototype.sendSongSelect=function(value,options){if(options=options||{},!(0<=(value=Math.floor(value))&&value<=127))throw new RangeError(\"The song number must be between 0 and 127.\");return this.send(wm.MIDI_SYSTEM_MESSAGES.songselect,[value],this._parseTimeParameter(options.time)),this},Output.prototype.sendTuningRequest=function(options){return options=options||{},this.send(wm.MIDI_SYSTEM_MESSAGES.tuningrequest,void 0,this._parseTimeParameter(options.time)),this},Output.prototype.sendClock=function(options){return options=options||{},this.send(wm.MIDI_SYSTEM_MESSAGES.clock,void 0,this._parseTimeParameter(options.time)),this},Output.prototype.sendStart=function(options){return options=options||{},this.send(wm.MIDI_SYSTEM_MESSAGES.start,void 0,this._parseTimeParameter(options.time)),this},Output.prototype.sendContinue=function(options){return options=options||{},this.send(wm.MIDI_SYSTEM_MESSAGES.continue,void 0,this._parseTimeParameter(options.time)),this},Output.prototype.sendStop=function(options){return options=options||{},this.send(wm.MIDI_SYSTEM_MESSAGES.stop,void 0,this._parseTimeParameter(options.time)),this},Output.prototype.sendActiveSensing=function(options){return options=options||{},this.send(wm.MIDI_SYSTEM_MESSAGES.activesensing,[],this._parseTimeParameter(options.time)),this},Output.prototype.sendReset=function(options){return options=options||{},this.send(wm.MIDI_SYSTEM_MESSAGES.reset,void 0,this._parseTimeParameter(options.time)),this},Output.prototype.stopNote=function(note,channel,options){if(\"all\"===note)return this.sendChannelMode(\"allnotesoff\",0,channel,options);var nVelocity=64;return (options=options||{}).rawVelocity?!isNaN(options.velocity)&&0<=options.velocity&&options.velocity<=127&&(nVelocity=options.velocity):!isNaN(options.velocity)&&0<=options.velocity&&options.velocity<=1&&(nVelocity=127*options.velocity),this._convertNoteToArray(note).forEach(function(item){wm.toMIDIChannels(channel).forEach(function(ch){this.send((wm.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(ch-1),[item,Math.round(nVelocity)],this._parseTimeParameter(options.time));}.bind(this));}.bind(this)),this},Output.prototype.playNote=function(note,channel,options){var time,nVelocity=64;if((options=options||{}).rawVelocity?!isNaN(options.velocity)&&0<=options.velocity&&options.velocity<=127&&(nVelocity=options.velocity):!isNaN(options.velocity)&&0<=options.velocity&&options.velocity<=1&&(nVelocity=127*options.velocity),time=this._parseTimeParameter(options.time),this._convertNoteToArray(note).forEach(function(item){wm.toMIDIChannels(channel).forEach(function(ch){this.send((wm.MIDI_CHANNEL_MESSAGES.noteon<<4)+(ch-1),[item,Math.round(nVelocity)],time);}.bind(this));}.bind(this)),!isNaN(options.duration)){options.duration<=0&&(options.duration=0);var nRelease=64;options.rawVelocity?!isNaN(options.release)&&0<=options.release&&options.release<=127&&(nRelease=options.release):!isNaN(options.release)&&0<=options.release&&options.release<=1&&(nRelease=127*options.release),this._convertNoteToArray(note).forEach(function(item){wm.toMIDIChannels(channel).forEach(function(ch){this.send((wm.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(ch-1),[item,Math.round(nRelease)],(time||wm.time)+options.duration);}.bind(this));}.bind(this));}return this},Output.prototype.sendKeyAftertouch=function(note,channel,pressure,options){var that=this;if(options=options||{},channel<1||16<channel)throw new RangeError(\"The channel must be between 1 and 16.\");(isNaN(pressure)||pressure<0||1<pressure)&&(pressure=.5);var nPressure=Math.round(127*pressure);return this._convertNoteToArray(note).forEach(function(item){wm.toMIDIChannels(channel).forEach(function(ch){that.send((wm.MIDI_CHANNEL_MESSAGES.keyaftertouch<<4)+(ch-1),[item,nPressure],that._parseTimeParameter(options.time));});}),this},Output.prototype.sendControlChange=function(controller,value,channel,options){if(options=options||{},\"string\"==typeof controller){if(void 0===(controller=wm.MIDI_CONTROL_CHANGE_MESSAGES[controller]))throw new TypeError(\"Invalid controller name.\")}else if(!(0<=(controller=Math.floor(controller))&&controller<=119))throw new RangeError(\"Controller numbers must be between 0 and 119.\");if(!(0<=(value=Math.floor(value)||0)&&value<=127))throw new RangeError(\"Controller value must be between 0 and 127.\");return wm.toMIDIChannels(channel).forEach(function(ch){this.send((wm.MIDI_CHANNEL_MESSAGES.controlchange<<4)+(ch-1),[controller,value],this._parseTimeParameter(options.time));}.bind(this)),this},Output.prototype._selectRegisteredParameter=function(parameter,channel,time){var that=this;if(parameter[0]=Math.floor(parameter[0]),!(0<=parameter[0]&&parameter[0]<=127))throw new RangeError(\"The control65 value must be between 0 and 127\");if(parameter[1]=Math.floor(parameter[1]),!(0<=parameter[1]&&parameter[1]<=127))throw new RangeError(\"The control64 value must be between 0 and 127\");return wm.toMIDIChannels(channel).forEach(function(){that.sendControlChange(101,parameter[0],channel,{time:time}),that.sendControlChange(100,parameter[1],channel,{time:time});}),this},Output.prototype._selectNonRegisteredParameter=function(parameter,channel,time){var that=this;if(parameter[0]=Math.floor(parameter[0]),!(0<=parameter[0]&&parameter[0]<=127))throw new RangeError(\"The control63 value must be between 0 and 127\");if(parameter[1]=Math.floor(parameter[1]),!(0<=parameter[1]&&parameter[1]<=127))throw new RangeError(\"The control62 value must be between 0 and 127\");return wm.toMIDIChannels(channel).forEach(function(){that.sendControlChange(99,parameter[0],channel,{time:time}),that.sendControlChange(98,parameter[1],channel,{time:time});}),this},Output.prototype._setCurrentRegisteredParameter=function(data,channel,time){var that=this;if((data=[].concat(data))[0]=Math.floor(data[0]),!(0<=data[0]&&data[0]<=127))throw new RangeError(\"The msb value must be between 0 and 127\");return wm.toMIDIChannels(channel).forEach(function(){that.sendControlChange(6,data[0],channel,{time:time});}),data[1]=Math.floor(data[1]),0<=data[1]&&data[1]<=127&&wm.toMIDIChannels(channel).forEach(function(){that.sendControlChange(38,data[1],channel,{time:time});}),this},Output.prototype._deselectRegisteredParameter=function(channel,time){var that=this;return wm.toMIDIChannels(channel).forEach(function(){that.sendControlChange(101,127,channel,{time:time}),that.sendControlChange(100,127,channel,{time:time});}),this},Output.prototype.setRegisteredParameter=function(parameter,data,channel,options){var that=this;if(options=options||{},!Array.isArray(parameter)){if(!wm.MIDI_REGISTERED_PARAMETER[parameter])throw new Error(\"The specified parameter is not available.\");parameter=wm.MIDI_REGISTERED_PARAMETER[parameter];}return wm.toMIDIChannels(channel).forEach(function(){that._selectRegisteredParameter(parameter,channel,options.time),that._setCurrentRegisteredParameter(data,channel,options.time),that._deselectRegisteredParameter(channel,options.time);}),this},Output.prototype.setNonRegisteredParameter=function(parameter,data,channel,options){var that=this;if(options=options||{},!(0<=parameter[0]&&parameter[0]<=127&&0<=parameter[1]&&parameter[1]<=127))throw new Error(\"Position 0 and 1 of the 2-position parameter array must both be between 0 and 127.\");return data=[].concat(data),wm.toMIDIChannels(channel).forEach(function(){that._selectNonRegisteredParameter(parameter,channel,options.time),that._setCurrentRegisteredParameter(data,channel,options.time),that._deselectRegisteredParameter(channel,options.time);}),this},Output.prototype.incrementRegisteredParameter=function(parameter,channel,options){var that=this;if(options=options||{},!Array.isArray(parameter)){if(!wm.MIDI_REGISTERED_PARAMETER[parameter])throw new Error(\"The specified parameter is not available.\");parameter=wm.MIDI_REGISTERED_PARAMETER[parameter];}return wm.toMIDIChannels(channel).forEach(function(){that._selectRegisteredParameter(parameter,channel,options.time),that.sendControlChange(96,0,channel,{time:options.time}),that._deselectRegisteredParameter(channel,options.time);}),this},Output.prototype.decrementRegisteredParameter=function(parameter,channel,options){if(options=options||{},!Array.isArray(parameter)){if(!wm.MIDI_REGISTERED_PARAMETER[parameter])throw new TypeError(\"The specified parameter is not available.\");parameter=wm.MIDI_REGISTERED_PARAMETER[parameter];}return wm.toMIDIChannels(channel).forEach(function(){this._selectRegisteredParameter(parameter,channel,options.time),this.sendControlChange(97,0,channel,{time:options.time}),this._deselectRegisteredParameter(channel,options.time);}.bind(this)),this},Output.prototype.setPitchBendRange=function(semitones,cents,channel,options){var that=this;if(options=options||{},!(0<=(semitones=Math.floor(semitones)||0)&&semitones<=127))throw new RangeError(\"The semitones value must be between 0 and 127\");if(!(0<=(cents=Math.floor(cents)||0)&&cents<=127))throw new RangeError(\"The cents value must be between 0 and 127\");return wm.toMIDIChannels(channel).forEach(function(){that.setRegisteredParameter(\"pitchbendrange\",[semitones,cents],channel,{time:options.time});}),this},Output.prototype.setModulationRange=function(semitones,cents,channel,options){var that=this;if(options=options||{},!(0<=(semitones=Math.floor(semitones)||0)&&semitones<=127))throw new RangeError(\"The semitones value must be between 0 and 127\");if(!(0<=(cents=Math.floor(cents)||0)&&cents<=127))throw new RangeError(\"The cents value must be between 0 and 127\");return wm.toMIDIChannels(channel).forEach(function(){that.setRegisteredParameter(\"modulationrange\",[semitones,cents],channel,{time:options.time});}),this},Output.prototype.setMasterTuning=function(value,channel,options){var that=this;if(options=options||{},(value=parseFloat(value)||0)<=-65||64<=value)throw new RangeError(\"The value must be a decimal number larger than -65 and smaller than 64.\");var coarse=Math.floor(value)+64,fine=value-Math.floor(value),msb=(fine=Math.round((fine+1)/2*16383))>>7&127,lsb=127&fine;return wm.toMIDIChannels(channel).forEach(function(){that.setRegisteredParameter(\"channelcoarsetuning\",coarse,channel,{time:options.time}),that.setRegisteredParameter(\"channelfinetuning\",[msb,lsb],channel,{time:options.time});}),this},Output.prototype.setTuningProgram=function(value,channel,options){var that=this;if(options=options||{},!(0<=(value=Math.floor(value))&&value<=127))throw new RangeError(\"The program value must be between 0 and 127\");return wm.toMIDIChannels(channel).forEach(function(){that.setRegisteredParameter(\"tuningprogram\",value,channel,{time:options.time});}),this},Output.prototype.setTuningBank=function(value,channel,options){var that=this;if(options=options||{},!(0<=(value=Math.floor(value)||0)&&value<=127))throw new RangeError(\"The bank value must be between 0 and 127\");return wm.toMIDIChannels(channel).forEach(function(){that.setRegisteredParameter(\"tuningbank\",value,channel,{time:options.time});}),this},Output.prototype.sendChannelMode=function(command,value,channel,options){if(options=options||{},\"string\"==typeof command){if(!(command=wm.MIDI_CHANNEL_MODE_MESSAGES[command]))throw new TypeError(\"Invalid channel mode message name.\")}else if(!(120<=(command=Math.floor(command))&&command<=127))throw new RangeError(\"Channel mode numerical identifiers must be between 120 and 127.\");if((value=Math.floor(value)||0)<0||127<value)throw new RangeError(\"Value must be an integer between 0 and 127.\");return wm.toMIDIChannels(channel).forEach(function(ch){this.send((wm.MIDI_CHANNEL_MESSAGES.channelmode<<4)+(ch-1),[command,value],this._parseTimeParameter(options.time));}.bind(this)),this},Output.prototype.sendProgramChange=function(program,channel,options){var that=this;if(options=options||{},program=Math.floor(program),isNaN(program)||program<0||127<program)throw new RangeError(\"Program numbers must be between 0 and 127.\");return wm.toMIDIChannels(channel).forEach(function(ch){that.send((wm.MIDI_CHANNEL_MESSAGES.programchange<<4)+(ch-1),[program],that._parseTimeParameter(options.time));}),this},Output.prototype.sendChannelAftertouch=function(pressure,channel,options){var that=this;options=options||{},pressure=parseFloat(pressure),(isNaN(pressure)||pressure<0||1<pressure)&&(pressure=.5);var nPressure=Math.round(127*pressure);return wm.toMIDIChannels(channel).forEach(function(ch){that.send((wm.MIDI_CHANNEL_MESSAGES.channelaftertouch<<4)+(ch-1),[nPressure],that._parseTimeParameter(options.time));}),this},Output.prototype.sendPitchBend=function(bend,channel,options){var that=this;if(options=options||{},isNaN(bend)||bend<-1||1<bend)throw new RangeError(\"Pitch bend value must be between -1 and 1.\");var nLevel=Math.round((bend+1)/2*16383),msb=nLevel>>7&127,lsb=127&nLevel;return wm.toMIDIChannels(channel).forEach(function(ch){that.send((wm.MIDI_CHANNEL_MESSAGES.pitchbend<<4)+(ch-1),[lsb,msb],that._parseTimeParameter(options.time));}),this},Output.prototype._parseTimeParameter=function(time){var value,parsed=parseFloat(time);return \"string\"==typeof time&&\"+\"===time.substring(0,1)?parsed&&0<parsed&&(value=wm.time+parsed):parsed>wm.time&&(value=parsed),value},Output.prototype._convertNoteToArray=function(note){var notes=[];return Array.isArray(note)||(note=[note]),note.forEach(function(item){notes.push(wm.guessNoteNumber(item));}),notes},module.exports?module.exports=wm:scope.WebMidi||(scope.WebMidi=wm);}(commonjsGlobal);\n});\n\nexport default webmidi_min;\n", "export const ROUTE_TO = \"route-to\";\nexport const TOGGLE_DEBUG = \"toggle-debug\";\nexport const TOGGLE_KEY_STATE = \"toggle-key-state\";\nexport const SET_KEY_STATE = \"set-key-state\";\nexport const RESET_KEY_STATE = \"reset-key-state\";\nexport const SET_RANDOM_KEY_STATE = \"set-random-key-state\";\nexport const SET_HIGHLIGHTS = \"set-highlights\";\nexport const RESET_HIGHLIGHTS = \"reset-highlights\";\nexport const SET_SIZE = \"set-size\";\nexport const TOGGLE_VIEW_CONFIG = \"toggle-view-config\";\nexport const SET_MIDI_DEVICES = \"set-midi-devices\";\nexport const BIND_ALL_DEVICES = \"bind-all-devices\";\nexport const BIND_DEVICES = \"bind-devices\";\nexport const SET_MIDI_FILE = \"set-midi-file\";\nexport const SET_MIDI_FILE_ERROR = \"set-midi-file-error\";\nexport const SET_COMPARISON = \"set-comparison\";\n", "import {dropdown} from \"../../_snowpack/pkg/@thi.ng/hdom-components.js\";\nimport {transduce, map, push} from \"../../_snowpack/pkg/@thi.ng/transducers.js\";\nimport WebMidi from \"../../_snowpack/pkg/webmidi.js\";\nimport {TOGGLE_KEY_STATE, SET_MIDI_DEVICES} from \"../events.js\";\nconst bindAllDevices = (bus) => {\n  WebMidi.inputs.forEach((input) => input.addListener(\"noteon\", \"all\", (e) => {\n    bus.dispatch([TOGGLE_KEY_STATE, e.note.number % 12]);\n    console.log(`Received 'noteon' message (${e.note.name + e.note.octave}) from ${input.name}`);\n  }));\n};\nexport const isEnabledMidi = (bus) => {\n  WebMidi.enable((err) => {\n    if (err) {\n      console.log(\"WebMidi could not be enabled.\", err);\n      return;\n    } else {\n      console.log(\"WebMidi enabled!\");\n      bus.dispatch([SET_MIDI_DEVICES, WebMidi.inputs.map((x) => x.name)]);\n    }\n    bindAllDevices(bus);\n  });\n};\nconst bindDevice = (bus, device) => {\n  WebMidi.inputs.forEach((input) => input.removeListener());\n  if (device === \"All Devices\") {\n    bindAllDevices(bus);\n    return;\n  } else {\n    const selectDevice = WebMidi.getInputByName(device);\n    if (selectDevice) {\n      selectDevice.addListener(\"noteon\", \"all\", (e) => {\n        bus.dispatch([TOGGLE_KEY_STATE, e.note.number % 12]);\n        console.log(`Received 'noteon' message (${e.note.name + e.note.octave}) from ${device}`);\n      });\n    }\n  }\n};\nexport const midiDevicesStatus = (ctx) => {\n  const views = ctx.views;\n  const ui = ctx.ui.midiDevicesStatus;\n  const bus = ctx.bus;\n  return () => {\n    const enabledMidi = views.enabledMidi.deref();\n    let midiDevices = views.midiDevices.deref();\n    return [\n      \"div\",\n      [\"span\", ui.content[Number(enabledMidi)], \"\"],\n      [\n        \"span\",\n        ui.dropdown.root,\n        midiDevices.length >= 1 ? [\n          dropdown,\n          {\n            ...ui.dropdown.selection,\n            ...{\n              onchange: (e) => bindDevice(bus, e.target.value)\n            }\n          },\n          transduce(map((x) => [x, x]), push(), [\"All Devices\", ...midiDevices])\n        ] : \"Web MIDI unavailable\"\n      ]\n    ];\n  };\n};\n", "export function eventLink(ctx, event, attribs, body) {\n  return [\n    \"a\",\n    {\n      ...attribs,\n      onclick: (e) => {\n        e.preventDefault();\n        ctx.bus.dispatch(event);\n      }\n    },\n    body\n  ];\n}\n", "import {TOGGLE_DEBUG} from \"../events.js\";\nimport {eventLink} from \"./event-link.js\";\nexport function debugContainer(ctx, debug, json) {\n  return [\n    \"div#debug\",\n    ctx.ui.column.debug[debug],\n    [\n      eventLink,\n      [TOGGLE_DEBUG],\n      ctx.ui.debugToggle,\n      debug ? \"close\" : \"open\"\n    ],\n    [\"pre\", ctx.ui.code, json]\n  ];\n}\n", "export const ROUTE_TO = \"route-to\";\n", "import * as __SNOWPACK_ENV__ from '../_snowpack/env.js';\n\nimport {Atom, defViewUnsafe} from \"../_snowpack/pkg/@thi.ng/atom.js\";\nimport {isArray} from \"../_snowpack/pkg/@thi.ng/checks.js\";\nimport {start} from \"../_snowpack/pkg/@thi.ng/hdom.js\";\nimport {EventBus, trace, valueSetter} from \"../_snowpack/pkg/@thi.ng/interceptors.js\";\nimport {EVENT_ROUTE_CHANGED, HTMLRouter} from \"../_snowpack/pkg/@thi.ng/router.js\";\nimport {isEnabledMidi} from \"./components/midi-devices-status.js\";\nimport {debugContainer} from \"./components/debug-container.js\";\nimport * as fx from \"./effects.js\";\nimport * as ev from \"./events.js\";\nconst ENV = __SNOWPACK_ENV__.MODE;\nexport class App {\n  constructor(config) {\n    this.config = config;\n    this.state = new Atom(config.initialState || {});\n    this.ctx = {\n      bus: new EventBus(this.state, config.events, config.effects),\n      views: {},\n      ui: config.ui\n    };\n    this.addViews(this.config.views);\n    this.router = new HTMLRouter(config.router);\n    this.router.addListener(EVENT_ROUTE_CHANGED, (e) => this.ctx.bus.dispatch([EVENT_ROUTE_CHANGED, e.value]));\n    this.ctx.bus.addHandlers({\n      [EVENT_ROUTE_CHANGED]: valueSetter(\"route\"),\n      [ev.ROUTE_TO]: (_, [__, route]) => ({[fx.ROUTE_TO]: route})\n    });\n    this.ctx.bus.addEffect(fx.ROUTE_TO, ([id, params]) => this.router.routeTo(this.router.format(id, params)));\n    if (ENV && ENV === \"development\") {\n      this.ctx.bus.instrumentWith([trace]);\n    }\n    this.addViews({\n      route: \"route\",\n      routeComponent: [\n        \"route.id\",\n        (id) => (this.config.components[id] || (() => [\"div\", `missing component for route: ${id}`]))(this.ctx)\n      ]\n    });\n  }\n  addViews(specs) {\n    const views = this.ctx.views;\n    for (let id in specs) {\n      const spec = specs[id];\n      views[id] = isArray(spec) ? defViewUnsafe(this.state, spec[0], spec[1]) : defViewUnsafe(this.state, spec);\n    }\n  }\n  start() {\n    isEnabledMidi(this.ctx.bus);\n    window.addEventListener(\"resize\", () => {\n      this.ctx.bus.dispatch([ev.SET_SIZE]);\n    });\n    this.router.start();\n    start(() => {\n      if (this.ctx.bus.processQueue()) {\n        return this.rootComponent();\n      }\n    }, {root: this.config.domRoot, ctx: this.ctx});\n  }\n  rootComponent() {\n    const debug = this.ctx.views.debug.deref();\n    const ui = this.ctx.ui;\n    return [\n      \"div\",\n      ui.root,\n      ENV && ENV === \"development\" ? [\n        [\n          \"div\",\n          ui.column.content[debug],\n          this.ctx.views.routeComponent\n        ],\n        [debugContainer, debug, this.ctx.views.json]\n      ] : [\"div\", this.ctx.views.routeComponent]\n    ];\n  }\n}\n", "export const button = (onclick, body, args = {}) => (_, disabled) => [\"a\", {...args, onclick, disabled}, body];\n", "import {button} from \"./button.js\";\nimport {RESET_KEY_STATE, SET_RANDOM_KEY_STATE} from \"../events.js\";\nexport const toolbar = (ctx) => {\n  const ui = ctx.ui;\n  const btClear = button((e) => {\n    e.preventDefault();\n    ctx.bus.dispatch([RESET_KEY_STATE]);\n  }, \"CLEAR\", ui.toolbar.button);\n  const btRandom = button((e) => {\n    e.preventDefault();\n    ctx.bus.dispatch([SET_RANDOM_KEY_STATE]);\n  }, \"RANDOM\", ui.toolbar.button);\n  return () => [\"div\", ui.toolbar.root, [btClear], [btRandom]];\n};\n", "const DEFAULT_OPTS = {\n  anim: 100,\n  pad: 1,\n  margin: 0,\n  hlOn: {fill: \"#E83015\"},\n  bgOn: {fill: \"#CCCCCC\"},\n  bgOff: {fill: \"#CCCCCC\"},\n  fgOn: {fill: \"#E83015\"},\n  fgOff: {fill: \"#fff\"},\n  floor: 1\n};\nconst blur = [\n  \"filter\",\n  {id: \"blur\"},\n  [\"feGaussianBlur\", {in: \"SourceGraphic\", stdDeviation: \".25\"}]\n];\nexport const clickToggleDot = (opts = {}) => {\n  const _opts = {\n    r: 5,\n    ...DEFAULT_OPTS,\n    ...opts\n  };\n  const {r, pad, margin, glyph, floor} = _opts;\n  const ratio = 0.5;\n  const ir = r * ratio ** 2;\n  const m2 = margin * 2;\n  const br = r + pad;\n  const cx = br + margin;\n  const height = br * 2;\n  const totalH = height + m2;\n  const svgSize = {width: totalH, height: totalH * floor};\n  const style = {transition: `all ${_opts.anim}ms ease-out`};\n  const center = {cx, cy: cx};\n  const hlOn = {\n    ..._opts.hlOn,\n    ...center,\n    r: br\n  };\n  const bgOn = {\n    ..._opts.bgOn,\n    ...center,\n    style,\n    r\n  };\n  const bgOff = {...bgOn, ..._opts.bgOff};\n  const fgOn = {\n    ..._opts.fgOn,\n    ...center,\n    style,\n    r: ir\n  };\n  const fgOff = {...fgOn, ..._opts.fgOff};\n  const glOn = {\n    ..._opts.fgOn,\n    x: \"50%\",\n    y: \"50%\",\n    \"text-anchor\": \"middle\",\n    \"alignment-baseline\": \"central\",\n    font: \"bold font-sans\",\n    \"font-size\": totalH * ratio,\n    style\n  };\n  const glOff = {...glOn, ..._opts.fgOff};\n  return (_, attribs, state, highlight) => [\n    \"svg\",\n    {...svgSize, ...attribs},\n    blur,\n    [\n      \"g\",\n      [\"circle\", highlight ? hlOn : {}],\n      [\"circle\", state ? bgOn : bgOff],\n      glyph ? [\"text\", state ? glOn : glOff, glyph] : [\"circle\", state ? fgOn : fgOff]\n    ]\n  ];\n};\n", "import {clickToggleDot} from \"./click-toggle.js\";\nimport {TOGGLE_KEY_STATE} from \"../events.js\";\nconst wDotOpts = {\n  anim: 0,\n  r: 16,\n  pad: 2\n};\nconst cDotOpts = {\n  ...wDotOpts,\n  glyph: \"C\"\n};\nconst bDotOpts = {\n  ...wDotOpts,\n  bgOn: {fill: \"#000\"},\n  bgOff: {fill: \"#000\"}\n};\nconst getClass = (i, ui) => {\n  if ([1, 3, 6, 8, 10].includes(i)) {\n    return ui.minor;\n  } else if (i === 4) {\n    return ui.e;\n  } else {\n    return ui.major;\n  }\n};\nexport const toggleGroup = (ctx) => {\n  const views = ctx.views;\n  const ui = ctx.ui;\n  const size = views.size.deref();\n  const toggleWidth = Math.min(18 * 2, size[0] * 0.9 / 13);\n  const opts = {\n    r: toggleWidth / 2 * (8 / 9),\n    pad: toggleWidth / 2 * (1 / 9)\n  };\n  const highlights = views.highlights.deref();\n  return [\n    \"div.mb-4\",\n    ...views.keyState.deref().map((x, i) => [\n      \"div\",\n      getClass(i, ui.toggleGroup.key),\n      [\n        i === 0 ? clickToggleDot({...cDotOpts, ...opts}) : [2, 4, 5, 7, 9, 11].includes(i) ? clickToggleDot({...wDotOpts, ...opts}) : clickToggleDot({...bDotOpts, ...opts}),\n        {\n          onclick: (e) => {\n            e.preventDefault();\n            ctx.bus.dispatch([TOGGLE_KEY_STATE, i]);\n          }\n        },\n        x,\n        highlights.includes(i)\n      ]\n    ])\n  ];\n};\n", "const iterator = (x) => x[Symbol.iterator]();\n\nfunction* frequencies(input, key) {\n    let freqs = {};\n    let iter = iterator(input);\n    let v;\n    while (((v = iter.next()), !v.done)) {\n        let k = key ? key(v.value) : v.value;\n        let id = JSON.stringify(k);\n        let bin = freqs[id];\n        if (bin) {\n            bin[1]++;\n        }\n        else {\n            freqs[id] = [k, 1];\n        }\n    }\n    yield* Object.keys(freqs).map((id) => freqs[id]);\n}\n\nexport { frequencies };\n", "import { i as implementsFunction } from '../common/implements-function-c507affc.js';\n\nconst isMap = (x) => x instanceof Map;\n\nfunction into(dest, src) {\n    if (isMap(dest)) {\n        for (let x of src) {\n            dest.set(x[0], x[1]);\n        }\n    }\n    else {\n        for (let x of src) {\n            dest.add(x);\n        }\n    }\n    return dest;\n}\n\nconst empty = (x, ctor) => implementsFunction(x, \"empty\")\n    ? x.empty()\n    : new (x[Symbol.species] || ctor)();\n\n/**\n * Computes the intersection of sets `a` and `b` and writes results into\n * new set or optionally given set `out` (assumed to be empty for\n * correct results). If `out` is *not* given, the returned Set type will\n * be that of `a` (provided it defines `Symbol.species`).\n *\n * @param a - first set\n * @param b - other set\n * @param out - result set\n */\nconst intersection = (a, b, out) => {\n    out = out || empty(a, Set);\n    if (a === b) {\n        return into(out, a);\n    }\n    if (b.size < a.size) {\n        return intersection(b, a, out);\n    }\n    for (let i of b) {\n        if (a.has(i)) {\n            out.add(i);\n        }\n    }\n    return out;\n};\n\nexport { intersection };\n", "/**\r\n * Fill a string with a repeated character\r\n *\r\n * @param character\r\n * @param repetition\r\n */\r\nconst fillStr = (s, n) => Array(Math.abs(n) + 1).join(s);\r\n\nfunction isNamed(src) {\r\n    return src !== null && typeof src === \"object\" && typeof src.name === \"string\"\r\n        ? true\r\n        : false;\r\n}\n\nfunction isPitch(pitch) {\r\n    return pitch !== null &&\r\n        typeof pitch === \"object\" &&\r\n        typeof pitch.step === \"number\" &&\r\n        typeof pitch.alt === \"number\"\r\n        ? true\r\n        : false;\r\n}\r\n// The number of fifths of [C, D, E, F, G, A, B]\r\nconst FIFTHS = [0, 2, 4, -1, 1, 3, 5];\r\n// The number of octaves it span each step\r\nconst STEPS_TO_OCTS = FIFTHS.map((fifths) => Math.floor((fifths * 7) / 12));\r\nfunction encode(pitch) {\r\n    const { step, alt, oct, dir = 1 } = pitch;\r\n    const f = FIFTHS[step] + 7 * alt;\r\n    if (oct === undefined) {\r\n        return [dir * f];\r\n    }\r\n    const o = oct - STEPS_TO_OCTS[step] - 4 * alt;\r\n    return [dir * f, dir * o];\r\n}\r\n// We need to get the steps from fifths\r\n// Fifths for CDEFGAB are [ 0, 2, 4, -1, 1, 3, 5 ]\r\n// We add 1 to fifths to avoid negative numbers, so:\r\n// for [\"F\", \"C\", \"G\", \"D\", \"A\", \"E\", \"B\"] we have:\r\nconst FIFTHS_TO_STEPS = [3, 0, 4, 1, 5, 2, 6];\r\nfunction decode(coord) {\r\n    const [f, o, dir] = coord;\r\n    const step = FIFTHS_TO_STEPS[unaltered(f)];\r\n    const alt = Math.floor((f + 1) / 7);\r\n    if (o === undefined) {\r\n        return { step, alt, dir };\r\n    }\r\n    const oct = o + 4 * alt + STEPS_TO_OCTS[step];\r\n    return { step, alt, oct, dir };\r\n}\r\n// Return the number of fifths as if it were unaltered\r\nfunction unaltered(f) {\r\n    const i = (f + 1) % 7;\r\n    return i < 0 ? 7 + i : i;\r\n}\n\nconst NoNote = { empty: true, name: \"\", pc: \"\", acc: \"\" };\r\nconst cache = new Map();\r\nconst stepToLetter = (step) => \"CDEFGAB\".charAt(step);\r\nconst altToAcc = (alt) => alt < 0 ? fillStr(\"b\", -alt) : fillStr(\"#\", alt);\r\nconst accToAlt = (acc) => acc[0] === \"b\" ? -acc.length : acc.length;\r\n/**\r\n * Given a note literal (a note name or a note object), returns the Note object\r\n * @example\r\n * note('Bb4') // => { name: \"Bb4\", midi: 70, chroma: 10, ... }\r\n */\r\nfunction note(src) {\r\n    const cached = cache.get(src);\r\n    if (cached) {\r\n        return cached;\r\n    }\r\n    const value = typeof src === \"string\"\r\n        ? parse(src)\r\n        : isPitch(src)\r\n            ? note(pitchName(src))\r\n            : isNamed(src)\r\n                ? note(src.name)\r\n                : NoNote;\r\n    cache.set(src, value);\r\n    return value;\r\n}\r\nconst REGEX = /^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\\d*)\\s*(.*)$/;\r\n/**\r\n * @private\r\n */\r\nfunction tokenizeNote(str) {\r\n    const m = REGEX.exec(str);\r\n    return [m[1].toUpperCase(), m[2].replace(/x/g, \"##\"), m[3], m[4]];\r\n}\r\n/**\r\n * @private\r\n */\r\nfunction coordToNote(noteCoord) {\r\n    return note(decode(noteCoord));\r\n}\r\nconst mod = (n, m) => ((n % m) + m) % m;\r\nconst SEMI = [0, 2, 4, 5, 7, 9, 11];\r\nfunction parse(noteName) {\r\n    const tokens = tokenizeNote(noteName);\r\n    if (tokens[0] === \"\" || tokens[3] !== \"\") {\r\n        return NoNote;\r\n    }\r\n    const letter = tokens[0];\r\n    const acc = tokens[1];\r\n    const octStr = tokens[2];\r\n    const step = (letter.charCodeAt(0) + 3) % 7;\r\n    const alt = accToAlt(acc);\r\n    const oct = octStr.length ? +octStr : undefined;\r\n    const coord = encode({ step, alt, oct });\r\n    const name = letter + acc + octStr;\r\n    const pc = letter + acc;\r\n    const chroma = (SEMI[step] + alt + 120) % 12;\r\n    const height = oct === undefined\r\n        ? mod(SEMI[step] + alt, 12) - 12 * 99\r\n        : SEMI[step] + alt + 12 * (oct + 1);\r\n    const midi = height >= 0 && height <= 127 ? height : null;\r\n    const freq = oct === undefined ? null : Math.pow(2, (height - 69) / 12) * 440;\r\n    return {\r\n        empty: false,\r\n        acc,\r\n        alt,\r\n        chroma,\r\n        coord,\r\n        freq,\r\n        height,\r\n        letter,\r\n        midi,\r\n        name,\r\n        oct,\r\n        pc,\r\n        step,\r\n    };\r\n}\r\nfunction pitchName(props) {\r\n    const { step, alt, oct } = props;\r\n    const letter = stepToLetter(step);\r\n    if (!letter) {\r\n        return \"\";\r\n    }\r\n    const pc = letter + altToAcc(alt);\r\n    return oct || oct === 0 ? pc + oct : pc;\r\n}\n\nconst NoInterval = { empty: true, name: \"\", acc: \"\" };\r\n// shorthand tonal notation (with quality after number)\r\nconst INTERVAL_TONAL_REGEX = \"([-+]?\\\\d+)(d{1,4}|m|M|P|A{1,4})\";\r\n// standard shorthand notation (with quality before number)\r\nconst INTERVAL_SHORTHAND_REGEX = \"(AA|A|P|M|m|d|dd)([-+]?\\\\d+)\";\r\nconst REGEX$1 = new RegExp(\"^\" + INTERVAL_TONAL_REGEX + \"|\" + INTERVAL_SHORTHAND_REGEX + \"$\");\r\n/**\r\n * @private\r\n */\r\nfunction tokenizeInterval(str) {\r\n    const m = REGEX$1.exec(`${str}`);\r\n    if (m === null) {\r\n        return [\"\", \"\"];\r\n    }\r\n    return m[1] ? [m[1], m[2]] : [m[4], m[3]];\r\n}\r\nconst cache$1 = {};\r\n/**\r\n * Get interval properties. It returns an object with:\r\n *\r\n * - name: the interval name\r\n * - num: the interval number\r\n * - type: 'perfectable' or 'majorable'\r\n * - q: the interval quality (d, m, M, A)\r\n * - dir: interval direction (1 ascending, -1 descending)\r\n * - simple: the simplified number\r\n * - semitones: the size in semitones\r\n * - chroma: the interval chroma\r\n *\r\n * @param {string} interval - the interval name\r\n * @return {Object} the interval properties\r\n *\r\n * @example\r\n * import { interval } from '@tonaljs/core'\r\n * interval('P5').semitones // => 7\r\n * interval('m3').type // => 'majorable'\r\n */\r\nfunction interval(src) {\r\n    return typeof src === \"string\"\r\n        ? cache$1[src] || (cache$1[src] = parse$1(src))\r\n        : isPitch(src)\r\n            ? interval(pitchName$1(src))\r\n            : isNamed(src)\r\n                ? interval(src.name)\r\n                : NoInterval;\r\n}\r\nconst SIZES = [0, 2, 4, 5, 7, 9, 11];\r\nconst TYPES = \"PMMPPMM\";\r\nfunction parse$1(str) {\r\n    const tokens = tokenizeInterval(str);\r\n    if (tokens[0] === \"\") {\r\n        return NoInterval;\r\n    }\r\n    const num = +tokens[0];\r\n    const q = tokens[1];\r\n    const step = (Math.abs(num) - 1) % 7;\r\n    const t = TYPES[step];\r\n    if (t === \"M\" && q === \"P\") {\r\n        return NoInterval;\r\n    }\r\n    const type = t === \"M\" ? \"majorable\" : \"perfectable\";\r\n    const name = \"\" + num + q;\r\n    const dir = num < 0 ? -1 : 1;\r\n    const simple = num === 8 || num === -8 ? num : dir * (step + 1);\r\n    const alt = qToAlt(type, q);\r\n    const oct = Math.floor((Math.abs(num) - 1) / 7);\r\n    const semitones = dir * (SIZES[step] + alt + 12 * oct);\r\n    const chroma = (((dir * (SIZES[step] + alt)) % 12) + 12) % 12;\r\n    const coord = encode({ step, alt, oct, dir });\r\n    return {\r\n        empty: false,\r\n        name,\r\n        num,\r\n        q,\r\n        step,\r\n        alt,\r\n        dir,\r\n        type,\r\n        simple,\r\n        semitones,\r\n        chroma,\r\n        coord,\r\n        oct,\r\n    };\r\n}\r\nfunction qToAlt(type, q) {\r\n    return (q === \"M\" && type === \"majorable\") ||\r\n        (q === \"P\" && type === \"perfectable\")\r\n        ? 0\r\n        : q === \"m\" && type === \"majorable\"\r\n            ? -1\r\n            : /^A+$/.test(q)\r\n                ? q.length\r\n                : /^d+$/.test(q)\r\n                    ? -1 * (type === \"perfectable\" ? q.length : q.length + 1)\r\n                    : 0;\r\n}\r\n// return the interval name of a pitch\r\nfunction pitchName$1(props) {\r\n    const { step, alt, oct = 0, dir } = props;\r\n    if (!dir) {\r\n        return \"\";\r\n    }\r\n    const num = step + 1 + 7 * oct;\r\n    const d = dir < 0 ? \"-\" : \"\";\r\n    const type = TYPES[step] === \"M\" ? \"majorable\" : \"perfectable\";\r\n    const name = d + num + altToQ(type, alt);\r\n    return name;\r\n}\r\nfunction altToQ(type, alt) {\r\n    if (alt === 0) {\r\n        return type === \"majorable\" ? \"M\" : \"P\";\r\n    }\r\n    else if (alt === -1 && type === \"majorable\") {\r\n        return \"m\";\r\n    }\r\n    else if (alt > 0) {\r\n        return fillStr(\"A\", alt);\r\n    }\r\n    else {\r\n        return fillStr(\"d\", type === \"perfectable\" ? alt : alt + 1);\r\n    }\r\n}\n\n/**\r\n * Transpose a note by an interval.\r\n *\r\n * @param {string} note - the note or note name\r\n * @param {string} interval - the interval or interval name\r\n * @return {string} the transposed note name or empty string if not valid notes\r\n * @example\r\n * import { tranpose } from \"@tonaljs/core\"\r\n * transpose(\"d3\", \"3M\") // => \"F#3\"\r\n * transpose(\"D\", \"3M\") // => \"F#\"\r\n * [\"C\", \"D\", \"E\", \"F\", \"G\"].map(pc => transpose(pc, \"M3)) // => [\"E\", \"F#\", \"G#\", \"A\", \"B\"]\r\n */\r\nfunction transpose(noteName, intervalName) {\r\n    const note$1 = note(noteName);\r\n    const interval$1 = interval(intervalName);\r\n    if (note$1.empty || interval$1.empty) {\r\n        return \"\";\r\n    }\r\n    const noteCoord = note$1.coord;\r\n    const intervalCoord = interval$1.coord;\r\n    const tr = noteCoord.length === 1\r\n        ? [noteCoord[0] + intervalCoord[0]]\r\n        : [noteCoord[0] + intervalCoord[0], noteCoord[1] + intervalCoord[1]];\r\n    return coordToNote(tr).name;\r\n}\n\nexport { altToAcc as a, isNamed as b, accToAlt as c, interval as d, isPitch as i, note as n, transpose as t };\n", "import { i as isPitch, a as altToAcc, b as isNamed, c as accToAlt, d as interval, n as note, t as transpose } from '../common/index.es-11efdcdf.js';\n\nconst NoRomanNumeral = { empty: true, name: \"\", chordType: \"\" };\r\nconst cache = {};\r\n/**\r\n * Get properties of a roman numeral string\r\n *\r\n * @function\r\n * @param {string} - the roman numeral string (can have type, like: Imaj7)\r\n * @return {Object} - the roman numeral properties\r\n * @param {string} name - the roman numeral (tonic)\r\n * @param {string} type - the chord type\r\n * @param {string} num - the number (1 = I, 2 = II...)\r\n * @param {boolean} major - major or not\r\n *\r\n * @example\r\n * romanNumeral(\"VIIb5\") // => { name: \"VII\", type: \"b5\", num: 7, major: true }\r\n */\r\nfunction get(src) {\r\n    return typeof src === \"string\"\r\n        ? cache[src] || (cache[src] = parse(src))\r\n        : typeof src === \"number\"\r\n            ? get(NAMES[src] || \"\")\r\n            : isPitch(src)\r\n                ? fromPitch(src)\r\n                : isNamed(src)\r\n                    ? get(src.name)\r\n                    : NoRomanNumeral;\r\n}\r\nfunction fromPitch(pitch) {\r\n    return get(altToAcc(pitch.alt) + NAMES[pitch.step]);\r\n}\r\nconst REGEX = /^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;\r\nfunction tokenize(str) {\r\n    return (REGEX.exec(str) || [\"\", \"\", \"\", \"\"]);\r\n}\r\nconst ROMANS = \"I II III IV V VI VII\";\r\nconst NAMES = ROMANS.split(\" \");\r\nfunction parse(src) {\r\n    const [name, acc, roman, chordType] = tokenize(src);\r\n    if (!roman) {\r\n        return NoRomanNumeral;\r\n    }\r\n    const upperRoman = roman.toUpperCase();\r\n    const step = NAMES.indexOf(upperRoman);\r\n    const alt = accToAlt(acc);\r\n    const dir = 1;\r\n    return {\r\n        empty: false,\r\n        name,\r\n        roman,\r\n        interval: interval({ step, alt, dir }).name,\r\n        acc,\r\n        chordType,\r\n        alt,\r\n        step,\r\n        major: roman === upperRoman,\r\n        oct: 0,\r\n        dir,\r\n    };\r\n}\n\nconst Empty = Object.freeze([]);\r\nconst NoKey = {\r\n    type: \"major\",\r\n    tonic: \"\",\r\n    alteration: 0,\r\n    keySignature: \"\",\r\n};\r\nconst NoKeyScale = {\r\n    tonic: \"\",\r\n    grades: Empty,\r\n    intervals: Empty,\r\n    scale: Empty,\r\n    chords: Empty,\r\n    chordsHarmonicFunction: Empty,\r\n    chordScales: Empty,\r\n};\r\nconst NoMajorKey = {\r\n    ...NoKey,\r\n    ...NoKeyScale,\r\n    type: \"major\",\r\n    minorRelative: \"\",\r\n    scale: Empty,\r\n    secondaryDominants: Empty,\r\n    secondaryDominantsMinorRelative: Empty,\r\n    substituteDominants: Empty,\r\n    substituteDominantsMinorRelative: Empty,\r\n};\r\nconst mapScaleToType = (scale, list, sep = \"\") => list.map((type, i) => `${scale[i]}${sep}${type}`);\r\nfunction keyScale(grades, chords, harmonicFunctions, chordScales) {\r\n    return (tonic) => {\r\n        const intervals = grades.map((gr) => get(gr).interval || \"\");\r\n        const scale = intervals.map((interval) => transpose(tonic, interval));\r\n        return {\r\n            tonic,\r\n            grades,\r\n            intervals,\r\n            scale,\r\n            chords: mapScaleToType(scale, chords),\r\n            chordsHarmonicFunction: harmonicFunctions.slice(),\r\n            chordScales: mapScaleToType(scale, chordScales, \" \"),\r\n        };\r\n    };\r\n}\r\nconst distInFifths = (from, to) => {\r\n    const f = note(from);\r\n    const t = note(to);\r\n    return f.empty || t.empty ? 0 : t.coord[0] - f.coord[0];\r\n};\r\nconst MajorScale = keyScale(\"I II III IV V VI VII\".split(\" \"), \"maj7 m7 m7 maj7 7 m7 m7b5\".split(\" \"), \"T SD T SD D T D\".split(\" \"), \"major,dorian,phrygian,lydian,mixolydian,minor,locrian\".split(\",\"));\r\n/**\r\n * Get a major key properties in a given tonic\r\n * @param tonic\r\n */\r\nfunction majorKey(tonic) {\r\n    const pc = note(tonic).pc;\r\n    if (!pc)\r\n        return NoMajorKey;\r\n    const keyScale = MajorScale(pc);\r\n    const alteration = distInFifths(\"C\", pc);\r\n    const romanInTonic = (src) => {\r\n        const r = get(src);\r\n        if (r.empty)\r\n            return \"\";\r\n        return transpose(tonic, r.interval) + r.chordType;\r\n    };\r\n    return {\r\n        ...keyScale,\r\n        type: \"major\",\r\n        minorRelative: transpose(pc, \"-3m\"),\r\n        alteration,\r\n        keySignature: altToAcc(alteration),\r\n        secondaryDominants: \"- VI7 VII7 I7 II7 III7 -\".split(\" \").map(romanInTonic),\r\n        secondaryDominantsMinorRelative: \"- IIIm7b5 IV#m7 Vm7 VIm7 VIIm7b5 -\"\r\n            .split(\" \")\r\n            .map(romanInTonic),\r\n        substituteDominants: \"- bIII7 IV7 bV7 bVI7 bVII7 -\"\r\n            .split(\" \")\r\n            .map(romanInTonic),\r\n        substituteDominantsMinorRelative: \"- IIIm7 Im7 IIbm7 VIm7 IVm7 -\"\r\n            .split(\" \")\r\n            .map(romanInTonic),\r\n    };\r\n}\n\nexport { majorKey };\n", "import { n as note } from './index.es-11efdcdf.js';\n\nfunction isMidi(arg) {\r\n    return +arg >= 0 && +arg <= 127;\r\n}\r\n/**\r\n * Get the note midi number (a number between 0 and 127)\r\n *\r\n * It returns undefined if not valid note name\r\n *\r\n * @function\r\n * @param {string|number} note - the note name or midi number\r\n * @return {Integer} the midi number or undefined if not valid note\r\n * @example\r\n * import { toMidi } from '@tonaljs/midi'\r\n * toMidi(\"C4\") // => 60\r\n * toMidi(60) // => 60\r\n * toMidi('60') // => 60\r\n */\r\nfunction toMidi(note$1) {\r\n    if (isMidi(note$1)) {\r\n        return +note$1;\r\n    }\r\n    const n = note(note$1);\r\n    return n.empty ? null : n.midi;\r\n}\r\nconst SHARPS = \"C C# D D# E F F# G G# A A# B\".split(\" \");\r\nconst FLATS = \"C Db D Eb E F Gb G Ab A Bb B\".split(\" \");\r\n/**\r\n * Given a midi number, returns a note name. The altered notes will have\r\n * flats unless explicitly set with the optional `useSharps` parameter.\r\n *\r\n * @function\r\n * @param {number} midi - the midi note number\r\n * @param {Object} options = default: `{ sharps: false, pitchClass: false }`\r\n * @param {boolean} useSharps - (Optional) set to true to use sharps instead of flats\r\n * @return {string} the note name\r\n * @example\r\n * import { midiToNoteName } from '@tonaljs/midi'\r\n * midiToNoteName(61) // => \"Db4\"\r\n * midiToNoteName(61, { pitchClass: true }) // => \"Db\"\r\n * midiToNoteName(61, { sharps: true }) // => \"C#4\"\r\n * midiToNoteName(61, { pitchClass: true, sharps: true }) // => \"C#\"\r\n * // it rounds to nearest note\r\n * midiToNoteName(61.7) // => \"D4\"\r\n */\r\nfunction midiToNoteName(midi, options = {}) {\r\n    if (isNaN(midi) || midi === -Infinity || midi === Infinity)\r\n        return \"\";\r\n    midi = Math.round(midi);\r\n    const pcs = options.sharps === true ? SHARPS : FLATS;\r\n    const pc = pcs[midi % 12];\r\n    if (options.pitchClass) {\r\n        return pc;\r\n    }\r\n    const o = Math.floor(midi / 12) - 1;\r\n    return pc + o;\r\n}\n\nexport { midiToNoteName as m, toMidi as t };\n", "import { n as note } from '../common/index.es-11efdcdf.js';\nimport { m as midiToNoteName } from '../common/index.es-4751a9e2.js';\n\n/**\r\n * Get a note from a note name\r\n *\r\n * @function\r\n * @example\r\n * Note.get('Bb4') // => { name: \"Bb4\", midi: 70, chroma: 10, ... }\r\n */\r\nconst get = note;\r\n/**\r\n * Simplify a note\r\n *\r\n * @function\r\n * @param {string} note - the note to be simplified\r\n * - sameAccType: default true. Use same kind of accidentals that source\r\n * @return {string} the simplified note or '' if not valid note\r\n * @example\r\n * simplify(\"C##\") // => \"D\"\r\n * simplify(\"C###\") // => \"D#\"\r\n * simplify(\"C###\")\r\n * simplify(\"B#4\") // => \"C5\"\r\n */\r\nconst simplify = (noteName) => {\r\n    const note = get(noteName);\r\n    if (note.empty) {\r\n        return \"\";\r\n    }\r\n    return midiToNoteName(note.midi || note.chroma, {\r\n        sharps: note.alt > 0,\r\n        pitchClass: note.midi === null,\r\n    });\r\n};\n\nexport { simplify };\n", "import { c as createCommonjsModule, a as commonjsGlobal } from '../common/_commonjsHelpers-eb5a497e.js';\n\n// data can be any array-like object.  It just needs to support .length, .slice, and an element getter []\n\nfunction parseMidi(data) {\n  var p = new Parser(data);\n\n  var headerChunk = p.readChunk();\n  if (headerChunk.id != 'MThd')\n    throw \"Bad MIDI file.  Expected 'MHdr', got: '\" + headerChunk.id + \"'\"\n  var header = parseHeader(headerChunk.data);\n\n  var tracks = [];\n  for (var i=0; !p.eof() && i < header.numTracks; i++) {\n    var trackChunk = p.readChunk();\n    if (trackChunk.id != 'MTrk')\n      throw \"Bad MIDI file.  Expected 'MTrk', got: '\" + trackChunk.id + \"'\"\n    var track = parseTrack(trackChunk.data);\n    tracks.push(track);\n  }\n\n  return {\n    header: header,\n    tracks: tracks\n  }\n}\n\n\nfunction parseHeader(data) {\n  var p = new Parser(data);\n\n  var format = p.readUInt16();\n  var numTracks = p.readUInt16();\n\n  var result = {\n    format: format,\n    numTracks: numTracks\n  };\n\n  var timeDivision = p.readUInt16();\n  if (timeDivision & 0x8000) {\n    result.framesPerSecond = 0x100 - (timeDivision >> 8);\n    result.ticksPerFrame = timeDivision & 0xFF;\n  } else {\n    result.ticksPerBeat = timeDivision;\n  }\n\n  return result\n}\n\nfunction parseTrack(data) {\n  var p = new Parser(data);\n\n  var events = [];\n  while (!p.eof()) {\n    var event = readEvent();\n    events.push(event);\n  }\n\n  return events\n\n  var lastEventTypeByte = null;\n\n  function readEvent() {\n    var event = {};\n    event.deltaTime = p.readVarInt();\n\n    var eventTypeByte = p.readUInt8();\n\n    if ((eventTypeByte & 0xf0) === 0xf0) {\n      // system / meta event\n      if (eventTypeByte === 0xff) {\n        // meta event\n        event.meta = true;\n        var metatypeByte = p.readUInt8();\n        var length = p.readVarInt();\n        switch (metatypeByte) {\n          case 0x00:\n            event.type = 'sequenceNumber';\n            if (length !== 2) throw \"Expected length for sequenceNumber event is 2, got \" + length\n            event.number = p.readUInt16();\n            return event\n          case 0x01:\n            event.type = 'text';\n            event.text = p.readString(length);\n            return event\n          case 0x02:\n            event.type = 'copyrightNotice';\n            event.text = p.readString(length);\n            return event\n          case 0x03:\n            event.type = 'trackName';\n            event.text = p.readString(length);\n            return event\n          case 0x04:\n            event.type = 'instrumentName';\n            event.text = p.readString(length);\n            return event\n          case 0x05:\n            event.type = 'lyrics';\n            event.text = p.readString(length);\n            return event\n          case 0x06:\n            event.type = 'marker';\n            event.text = p.readString(length);\n            return event\n          case 0x07:\n            event.type = 'cuePoint';\n            event.text = p.readString(length);\n            return event\n          case 0x20:\n            event.type = 'channelPrefix';\n            if (length != 1) throw \"Expected length for channelPrefix event is 1, got \" + length\n            event.channel = p.readUInt8();\n            return event\n          case 0x21:\n            event.type = 'portPrefix';\n            if (length != 1) throw \"Expected length for portPrefix event is 1, got \" + length\n            event.port = p.readUInt8();\n            return event\n          case 0x2f:\n            event.type = 'endOfTrack';\n            if (length != 0) throw \"Expected length for endOfTrack event is 0, got \" + length\n            return event\n          case 0x51:\n            event.type = 'setTempo';\n            if (length != 3) throw \"Expected length for setTempo event is 3, got \" + length\n            event.microsecondsPerBeat = p.readUInt24();\n            return event\n          case 0x54:\n            event.type = 'smpteOffset';\n            if (length != 5) throw \"Expected length for smpteOffset event is 5, got \" + length\n            var hourByte = p.readUInt8();\n            var FRAME_RATES = { 0x00: 24, 0x20: 25, 0x40: 29, 0x60: 30 };\n            event.frameRate = FRAME_RATES[hourByte & 0x60];\n            event.hour = hourByte & 0x1f;\n            event.min = p.readUInt8();\n            event.sec = p.readUInt8();\n            event.frame = p.readUInt8();\n            event.subFrame = p.readUInt8();\n            return event\n          case 0x58:\n            event.type = 'timeSignature';\n            if (length != 4) throw \"Expected length for timeSignature event is 4, got \" + length\n            event.numerator = p.readUInt8();\n            event.denominator = (1 << p.readUInt8());\n            event.metronome = p.readUInt8();\n            event.thirtyseconds = p.readUInt8();\n            return event\n          case 0x59:\n            event.type = 'keySignature';\n            if (length != 2) throw \"Expected length for keySignature event is 2, got \" + length\n            event.key = p.readInt8();\n            event.scale = p.readUInt8();\n            return event\n          case 0x7f:\n            event.type = 'sequencerSpecific';\n            event.data = p.readBytes(length);\n            return event\n          default:\n            event.type = 'unknownMeta';\n            event.data = p.readBytes(length);\n            event.metatypeByte = metatypeByte;\n            return event\n        }\n      } else if (eventTypeByte == 0xf0) {\n        event.type = 'sysEx';\n        var length = p.readVarInt();\n        event.data = p.readBytes(length);\n        return event\n      } else if (eventTypeByte == 0xf7) {\n        event.type = 'endSysEx';\n        var length = p.readVarInt();\n        event.data = p.readBytes(length);\n        return event\n      } else {\n        throw \"Unrecognised MIDI event type byte: \" + eventTypeByte\n      }\n    } else {\n      // channel event\n      var param1;\n      if ((eventTypeByte & 0x80) === 0) {\n        // running status - reuse lastEventTypeByte as the event type.\n        // eventTypeByte is actually the first parameter\n        if (lastEventTypeByte === null)\n          throw \"Running status byte encountered before status byte\"\n        param1 = eventTypeByte;\n        eventTypeByte = lastEventTypeByte;\n        event.running = true;\n      } else {\n        param1 = p.readUInt8();\n        lastEventTypeByte = eventTypeByte;\n      }\n      var eventType = eventTypeByte >> 4;\n      event.channel = eventTypeByte & 0x0f;\n      switch (eventType) {\n        case 0x08:\n          event.type = 'noteOff';\n          event.noteNumber = param1;\n          event.velocity = p.readUInt8();\n          return event\n        case 0x09:\n          var velocity = p.readUInt8();\n          event.type = velocity === 0 ? 'noteOff' : 'noteOn';\n          event.noteNumber = param1;\n          event.velocity = velocity;\n          if (velocity === 0) event.byte9 = true;\n          return event\n        case 0x0a:\n          event.type = 'noteAftertouch';\n          event.noteNumber = param1;\n          event.amount = p.readUInt8();\n          return event\n        case 0x0b:\n          event.type = 'controller';\n          event.controllerType = param1;\n          event.value = p.readUInt8();\n          return event\n        case 0x0c:\n          event.type = 'programChange';\n          event.programNumber = param1;\n          return event\n        case 0x0d:\n          event.type = 'channelAftertouch';\n          event.amount = param1;\n          return event\n        case 0x0e:\n          event.type = 'pitchBend';\n          event.value = (param1 + (p.readUInt8() << 7)) - 0x2000;\n          return event\n        default:\n          throw \"Unrecognised MIDI event type: \" + eventType\n      }\n    }\n  }\n}\n\nfunction Parser(data) {\n  this.buffer = data;\n  this.bufferLen = this.buffer.length;\n  this.pos = 0;\n}\n\nParser.prototype.eof = function() {\n  return this.pos >= this.bufferLen\n};\n\nParser.prototype.readUInt8 = function() {\n  var result = this.buffer[this.pos];\n  this.pos += 1;\n  return result\n};\n\nParser.prototype.readInt8 = function() {\n  var u = this.readUInt8();\n  if (u & 0x80)\n    return u - 0x100\n  else\n    return u\n};\n\nParser.prototype.readUInt16 = function() {\n  var b0 = this.readUInt8(),\n      b1 = this.readUInt8();\n\n    return (b0 << 8) + b1\n};\n\nParser.prototype.readInt16 = function() {\n  var u = this.readUInt16();\n  if (u & 0x8000)\n    return u - 0x10000\n  else\n    return u\n};\n\nParser.prototype.readUInt24 = function() {\n  var b0 = this.readUInt8(),\n      b1 = this.readUInt8(),\n      b2 = this.readUInt8();\n\n    return (b0 << 16) + (b1 << 8) + b2\n};\n\nParser.prototype.readInt24 = function() {\n  var u = this.readUInt24();\n  if (u & 0x800000)\n    return u - 0x1000000\n  else\n    return u\n};\n\nParser.prototype.readUInt32 = function() {\n  var b0 = this.readUInt8(),\n      b1 = this.readUInt8(),\n      b2 = this.readUInt8(),\n      b3 = this.readUInt8();\n\n    return (b0 << 24) + (b1 << 16) + (b2 << 8) + b3\n};\n\nParser.prototype.readBytes = function(len) {\n  var bytes = this.buffer.slice(this.pos, this.pos + len);\n  this.pos += len;\n  return bytes\n};\n\nParser.prototype.readString = function(len) {\n  var bytes = this.readBytes(len);\n  return String.fromCharCode.apply(null, bytes)\n};\n\nParser.prototype.readVarInt = function() {\n  var result = 0;\n  while (!this.eof()) {\n    var b = this.readUInt8();\n    if (b & 0x80) {\n      result += (b & 0x7f);\n      result <<= 7;\n    } else {\n      // b is last byte\n      return result + b\n    }\n  }\n  // premature eof\n  return result\n};\n\nParser.prototype.readChunk = function() {\n  var id = this.readString(4);\n  var length = this.readUInt32();\n  var data = this.readBytes(length);\n  return {\n    id: id,\n    length: length,\n    data: data\n  }\n};\n\nvar midiParser = parseMidi;\n\n// data should be the same type of format returned by parseMidi\n// for maximum compatibililty, returns an array of byte values, suitable for conversion to Buffer, Uint8Array, etc.\n\n// opts:\n// - running              reuse previous eventTypeByte when possible, to compress file\n// - useByte9ForNoteOff   use 0x09 for noteOff when velocity is zero\n\nfunction writeMidi(data, opts) {\n  if (typeof data !== 'object')\n    throw 'Invalid MIDI data'\n\n  opts = opts || {};\n\n  var header = data.header || {};\n  var tracks = data.tracks || [];\n  var i, len = tracks.length;\n\n  var w = new Writer();\n  writeHeader(w, header, len);\n\n  for (i=0; i < len; i++) {\n    writeTrack(w, tracks[i], opts);\n  }\n\n  return w.buffer\n}\n\nfunction writeHeader(w, header, numTracks) {\n  var format = header.format == null ? 1 : header.format;\n\n  var timeDivision = 128;\n  if (header.timeDivision) {\n    timeDivision = header.timeDivision;\n  } else if (header.ticksPerFrame && header.framesPerSecond) {\n    timeDivision = (-(header.framesPerSecond & 0xFF) << 8) | (header.ticksPerFrame & 0xFF);\n  } else if (header.ticksPerBeat) {\n    timeDivision = header.ticksPerBeat & 0x7FFF;\n  }\n\n  var h = new Writer();\n  h.writeUInt16(format);\n  h.writeUInt16(numTracks);\n  h.writeUInt16(timeDivision);\n\n  w.writeChunk('MThd', h.buffer);\n}\n\nfunction writeTrack(w, track, opts) {\n  var t = new Writer();\n  var i, len = track.length;\n  var eventTypeByte = null;\n  for (i=0; i < len; i++) {\n    // Reuse last eventTypeByte when opts.running is set, or event.running is explicitly set on it.\n    // parseMidi will set event.running for each event, so that we can get an exact copy by default.\n    // Explicitly set opts.running to false, to override event.running and never reuse last eventTypeByte.\n    if (opts.running === false || !opts.running && !track[i].running) eventTypeByte = null;\n\n    eventTypeByte = writeEvent(t, track[i], eventTypeByte, opts.useByte9ForNoteOff);\n  }\n  w.writeChunk('MTrk', t.buffer);\n}\n\nfunction writeEvent(w, event, lastEventTypeByte, useByte9ForNoteOff) {\n  var type = event.type;\n  var deltaTime = event.deltaTime;\n  var text = event.text || '';\n  var data = event.data || [];\n  var eventTypeByte = null;\n  w.writeVarInt(deltaTime);\n\n  switch (type) {\n    // meta events\n    case 'sequenceNumber':\n      w.writeUInt8(0xFF);\n      w.writeUInt8(0x00);\n      w.writeVarInt(2);\n      w.writeUInt16(event.number);\n      break;\n\n    case 'text':\n      w.writeUInt8(0xFF);\n      w.writeUInt8(0x01);\n      w.writeVarInt(text.length);\n      w.writeString(text);\n      break;\n\n    case 'copyrightNotice':\n      w.writeUInt8(0xFF);\n      w.writeUInt8(0x02);\n      w.writeVarInt(text.length);\n      w.writeString(text);\n      break;\n\n    case 'trackName':\n      w.writeUInt8(0xFF);\n      w.writeUInt8(0x03);\n      w.writeVarInt(text.length);\n      w.writeString(text);\n      break;\n\n    case 'instrumentName':\n      w.writeUInt8(0xFF);\n      w.writeUInt8(0x04);\n      w.writeVarInt(text.length);\n      w.writeString(text);\n      break;\n\n    case 'lyrics':\n      w.writeUInt8(0xFF);\n      w.writeUInt8(0x05);\n      w.writeVarInt(text.length);\n      w.writeString(text);\n      break;\n\n    case 'marker':\n      w.writeUInt8(0xFF);\n      w.writeUInt8(0x06);\n      w.writeVarInt(text.length);\n      w.writeString(text);\n      break;\n\n    case 'cuePoint':\n      w.writeUInt8(0xFF);\n      w.writeUInt8(0x07);\n      w.writeVarInt(text.length);\n      w.writeString(text);\n      break;\n\n    case 'channelPrefix':\n      w.writeUInt8(0xFF);\n      w.writeUInt8(0x20);\n      w.writeVarInt(1);\n      w.writeUInt8(event.channel);\n      break;\n\n    case 'portPrefix':\n      w.writeUInt8(0xFF);\n      w.writeUInt8(0x21);\n      w.writeVarInt(1);\n      w.writeUInt8(event.port);\n      break;\n\n    case 'endOfTrack':\n      w.writeUInt8(0xFF);\n      w.writeUInt8(0x2F);\n      w.writeVarInt(0);\n      break;\n\n    case 'setTempo':\n      w.writeUInt8(0xFF);\n      w.writeUInt8(0x51);\n      w.writeVarInt(3);\n      w.writeUInt24(event.microsecondsPerBeat);\n      break;\n\n    case 'smpteOffset':\n      w.writeUInt8(0xFF);\n      w.writeUInt8(0x54);\n      w.writeVarInt(5);\n      var FRAME_RATES = { 24: 0x00, 25: 0x20, 29: 0x40, 30: 0x60 };\n      var hourByte = (event.hour & 0x1F) | FRAME_RATES[event.frameRate];\n      w.writeUInt8(hourByte);\n      w.writeUInt8(event.min);\n      w.writeUInt8(event.sec);\n      w.writeUInt8(event.frame);\n      w.writeUInt8(event.subFrame);\n      break;\n\n    case 'timeSignature':\n      w.writeUInt8(0xFF);\n      w.writeUInt8(0x58);\n      w.writeVarInt(4);\n      w.writeUInt8(event.numerator);\n      var denominator = Math.floor((Math.log(event.denominator) / Math.LN2)) & 0xFF;\n      w.writeUInt8(denominator);\n      w.writeUInt8(event.metronome);\n      w.writeUInt8(event.thirtyseconds || 8);\n      break;\n\n    case 'keySignature':\n      w.writeUInt8(0xFF);\n      w.writeUInt8(0x59);\n      w.writeVarInt(2);\n      w.writeInt8(event.key);\n      w.writeUInt8(event.scale);\n      break;\n\n    case 'sequencerSpecific':\n      w.writeUInt8(0xFF);\n      w.writeUInt8(0x7F);\n      w.writeVarInt(data.length);\n      w.writeBytes(data);\n      break;\n\n    case 'unknownMeta':\n      if (event.metatypeByte != null) {\n        w.writeUInt8(0xFF);\n        w.writeUInt8(event.metatypeByte);\n        w.writeVarInt(data.length);\n        w.writeBytes(data);\n      }\n      break;\n\n    // system-exclusive\n    case 'sysEx':\n      w.writeUInt8(0xF0);\n      w.writeVarInt(data.length);\n      w.writeBytes(data);\n      break;\n\n    case 'endSysEx':\n      w.writeUInt8(0xF7);\n      w.writeVarInt(data.length);\n      w.writeBytes(data);\n      break;\n\n    // channel events\n    case 'noteOff':\n      // Use 0x90 when opts.useByte9ForNoteOff is set and velocity is zero, or when event.byte9 is explicitly set on it.\n      // parseMidi will set event.byte9 for each event, so that we can get an exact copy by default.\n      // Explicitly set opts.useByte9ForNoteOff to false, to override event.byte9 and always use 0x80 for noteOff events.\n      var noteByte = ((useByte9ForNoteOff !== false && event.byte9) || (useByte9ForNoteOff && event.velocity == 0)) ? 0x90 : 0x80;\n\n      eventTypeByte = noteByte | event.channel;\n      if (eventTypeByte !== lastEventTypeByte) w.writeUInt8(eventTypeByte);\n      w.writeUInt8(event.noteNumber);\n      w.writeUInt8(event.velocity);\n      break;\n\n    case 'noteOn':\n      eventTypeByte = 0x90 | event.channel;\n      if (eventTypeByte !== lastEventTypeByte) w.writeUInt8(eventTypeByte);\n      w.writeUInt8(event.noteNumber);\n      w.writeUInt8(event.velocity);\n      break;\n\n    case 'noteAftertouch':\n      eventTypeByte = 0xA0 | event.channel;\n      if (eventTypeByte !== lastEventTypeByte) w.writeUInt8(eventTypeByte);\n      w.writeUInt8(event.noteNumber);\n      w.writeUInt8(event.amount);\n      break;\n\n    case 'controller':\n      eventTypeByte = 0xB0 | event.channel;\n      if (eventTypeByte !== lastEventTypeByte) w.writeUInt8(eventTypeByte);\n      w.writeUInt8(event.controllerType);\n      w.writeUInt8(event.value);\n      break;\n\n    case 'programChange':\n      eventTypeByte = 0xC0 | event.channel;\n      if (eventTypeByte !== lastEventTypeByte) w.writeUInt8(eventTypeByte);\n      w.writeUInt8(event.programNumber);\n      break;\n\n    case 'channelAftertouch':\n      eventTypeByte = 0xD0 | event.channel;\n      if (eventTypeByte !== lastEventTypeByte) w.writeUInt8(eventTypeByte);\n      w.writeUInt8(event.amount);\n      break;\n\n    case 'pitchBend':\n      eventTypeByte = 0xE0 | event.channel;\n      if (eventTypeByte !== lastEventTypeByte) w.writeUInt8(eventTypeByte);\n      var value14 = 0x2000 + event.value;\n      var lsb14 = (value14 & 0x7F);\n      var msb14 = (value14 >> 7) & 0x7F;\n      w.writeUInt8(lsb14);\n      w.writeUInt8(msb14);\n    break;\n\n    default:\n      throw 'Unrecognized event type: ' + type\n  }\n  return eventTypeByte\n}\n\n\nfunction Writer() {\n  this.buffer = [];\n}\n\nWriter.prototype.writeUInt8 = function(v) {\n  this.buffer.push(v & 0xFF);\n};\nWriter.prototype.writeInt8 = Writer.prototype.writeUInt8;\n\nWriter.prototype.writeUInt16 = function(v) {\n  var b0 = (v >> 8) & 0xFF,\n      b1 = v & 0xFF;\n\n  this.writeUInt8(b0);\n  this.writeUInt8(b1);\n};\nWriter.prototype.writeInt16 = Writer.prototype.writeUInt16;\n\nWriter.prototype.writeUInt24 = function(v) {\n  var b0 = (v >> 16) & 0xFF,\n      b1 = (v >> 8) & 0xFF,\n      b2 = v & 0xFF;\n\n  this.writeUInt8(b0);\n  this.writeUInt8(b1);\n  this.writeUInt8(b2);\n};\nWriter.prototype.writeInt24 = Writer.prototype.writeUInt24;\n\nWriter.prototype.writeUInt32 = function(v) {\n  var b0 = (v >> 24) & 0xFF,\n      b1 = (v >> 16) & 0xFF,\n      b2 = (v >> 8) & 0xFF,\n      b3 = v & 0xFF;\n\n  this.writeUInt8(b0);\n  this.writeUInt8(b1);\n  this.writeUInt8(b2);\n  this.writeUInt8(b3);\n};\nWriter.prototype.writeInt32 = Writer.prototype.writeUInt32;\n\n\nWriter.prototype.writeBytes = function(arr) {\n  this.buffer = this.buffer.concat(Array.prototype.slice.call(arr, 0));\n};\n\nWriter.prototype.writeString = function(str) {\n  var i, len = str.length, arr = [];\n  for (i=0; i < len; i++) {\n    arr.push(str.codePointAt(i));\n  }\n  this.writeBytes(arr);\n};\n\nWriter.prototype.writeVarInt = function(v) {\n  if (v < 0) throw \"Cannot write negative variable-length integer\"\n\n  if (v <= 0x7F) {\n    this.writeUInt8(v);\n  } else {\n    var i = v;\n    var bytes = [];\n    bytes.push(i & 0x7F);\n    i >>= 7;\n    while (i) {\n      var b = i & 0x7F | 0x80;\n      bytes.push(b);\n      i >>= 7;\n    }\n    this.writeBytes(bytes.reverse());\n  }\n};\n\nWriter.prototype.writeChunk = function(id, data) {\n  this.writeString(id);\n  this.writeUInt32(data.length);\n  this.writeBytes(data);\n};\n\nvar midiWriter = writeMidi;\n\nvar parseMidi$1 = midiParser;\nvar writeMidi$1 = midiWriter;\n\nvar midiFile = {\n\tparseMidi: parseMidi$1,\n\twriteMidi: writeMidi$1\n};\n\nvar BinarySearch = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Return the index of the element at or before the given property\n * @hidden\n */\nfunction search(array, value, prop) {\n    if (prop === void 0) { prop = \"ticks\"; }\n    var beginning = 0;\n    var len = array.length;\n    var end = len;\n    if (len > 0 && array[len - 1][prop] <= value) {\n        return len - 1;\n    }\n    while (beginning < end) {\n        // calculate the midpoint for roughly equal partition\n        var midPoint = Math.floor(beginning + (end - beginning) / 2);\n        var event_1 = array[midPoint];\n        var nextEvent = array[midPoint + 1];\n        if (event_1[prop] === value) {\n            // choose the last one that has the same value\n            for (var i = midPoint; i < array.length; i++) {\n                var testEvent = array[i];\n                if (testEvent[prop] === value) {\n                    midPoint = i;\n                }\n            }\n            return midPoint;\n        }\n        else if (event_1[prop] < value && nextEvent[prop] > value) {\n            return midPoint;\n        }\n        else if (event_1[prop] > value) {\n            // search lower\n            end = midPoint;\n        }\n        else if (event_1[prop] < value) {\n            // search upper\n            beginning = midPoint + 1;\n        }\n    }\n    return -1;\n}\nexports.search = search;\n/**\n * Does a binary search to insert the note\n * in the correct spot in the array\n * @hidden\n */\nfunction insert(array, event, prop) {\n    if (prop === void 0) { prop = \"ticks\"; }\n    if (array.length) {\n        var index = search(array, event[prop], prop);\n        array.splice(index + 1, 0, event);\n    }\n    else {\n        array.push(event);\n    }\n}\nexports.insert = insert;\n\n});\n\nvar Header_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\nvar privatePPQMap = new WeakMap();\n/**\n * @hidden\n */\nexports.keySignatureKeys = [\n    \"Cb\",\n    \"Gb\",\n    \"Db\",\n    \"Ab\",\n    \"Eb\",\n    \"Bb\",\n    \"F\",\n    \"C\",\n    \"G\",\n    \"D\",\n    \"A\",\n    \"E\",\n    \"B\",\n    \"F#\",\n    \"C#\",\n];\n/** The parsed midi file header */\nvar Header = /** @class */ (function () {\n    function Header(midiData) {\n        // look through all the tracks for tempo changes\n        var _this = this;\n        /**\n         * The array of all the tempo events\n         */\n        this.tempos = [];\n        /**\n         * The time signatures\n         */\n        this.timeSignatures = [];\n        /**\n         * The time signatures\n         */\n        this.keySignatures = [];\n        /**\n         * Additional meta events\n         */\n        this.meta = [];\n        /**\n         * The name of the midi file\n         */\n        this.name = \"\";\n        privatePPQMap.set(this, 480);\n        if (midiData) {\n            privatePPQMap.set(this, midiData.header.ticksPerBeat);\n            // check time signature and tempo events from all of the tracks\n            midiData.tracks.forEach(function (track) {\n                return track.forEach(function (event) {\n                    if (event.meta) {\n                        if (event.type === \"timeSignature\") {\n                            _this.timeSignatures.push({\n                                ticks: event.absoluteTime,\n                                timeSignature: [\n                                    event.numerator,\n                                    event.denominator,\n                                ],\n                            });\n                        }\n                        else if (event.type === \"setTempo\") {\n                            _this.tempos.push({\n                                bpm: 60000000 / event.microsecondsPerBeat,\n                                ticks: event.absoluteTime,\n                            });\n                        }\n                        else if (event.type === \"keySignature\") {\n                            _this.keySignatures.push({\n                                key: exports.keySignatureKeys[event.key + 7],\n                                scale: event.scale === 0 ? \"major\" : \"minor\",\n                                ticks: event.absoluteTime,\n                            });\n                        }\n                    }\n                });\n            });\n            // check the first track for other relevant data\n            midiData.tracks[0].forEach(function (event) {\n                if (event.meta) {\n                    if (event.type === \"trackName\") {\n                        _this.name = event.text;\n                    }\n                    else if (event.type === \"text\" ||\n                        event.type === \"cuePoint\" ||\n                        event.type === \"marker\" ||\n                        event.type === \"lyrics\") {\n                        _this.meta.push({\n                            text: event.text,\n                            ticks: event.absoluteTime,\n                            type: event.type,\n                        });\n                    }\n                }\n            });\n            this.update();\n        }\n    }\n    /**\n     * This must be invoked after any changes are made to the tempo array\n     * or the timeSignature array for the updated values to be reflected.\n     */\n    Header.prototype.update = function () {\n        var _this = this;\n        var currentTime = 0;\n        var lastEventBeats = 0;\n        // make sure it's sorted\n        this.tempos.sort(function (a, b) { return a.ticks - b.ticks; });\n        this.tempos.forEach(function (event, index) {\n            var lastBPM = index > 0 ? _this.tempos[index - 1].bpm : _this.tempos[0].bpm;\n            var beats = event.ticks / _this.ppq - lastEventBeats;\n            var elapsedSeconds = (60 / lastBPM) * beats;\n            event.time = elapsedSeconds + currentTime;\n            currentTime = event.time;\n            lastEventBeats += beats;\n        });\n        this.timeSignatures.sort(function (a, b) { return a.ticks - b.ticks; });\n        this.timeSignatures.forEach(function (event, index) {\n            var lastEvent = index > 0\n                ? _this.timeSignatures[index - 1]\n                : _this.timeSignatures[0];\n            var elapsedBeats = (event.ticks - lastEvent.ticks) / _this.ppq;\n            var elapsedMeasures = elapsedBeats /\n                lastEvent.timeSignature[0] /\n                (lastEvent.timeSignature[1] / 4);\n            lastEvent.measures = lastEvent.measures || 0;\n            event.measures = elapsedMeasures + lastEvent.measures;\n        });\n    };\n    /**\n     * Convert ticks into seconds based on the tempo changes\n     */\n    Header.prototype.ticksToSeconds = function (ticks) {\n        // find the relevant position\n        var index = BinarySearch.search(this.tempos, ticks);\n        if (index !== -1) {\n            var tempo = this.tempos[index];\n            var tempoTime = tempo.time;\n            var elapsedBeats = (ticks - tempo.ticks) / this.ppq;\n            return tempoTime + (60 / tempo.bpm) * elapsedBeats;\n        }\n        else {\n            // assume 120\n            var beats = ticks / this.ppq;\n            return (60 / 120) * beats;\n        }\n    };\n    /**\n     * Convert ticks into measures based off of the time signatures\n     */\n    Header.prototype.ticksToMeasures = function (ticks) {\n        var index = BinarySearch.search(this.timeSignatures, ticks);\n        if (index !== -1) {\n            var timeSigEvent = this.timeSignatures[index];\n            var elapsedBeats = (ticks - timeSigEvent.ticks) / this.ppq;\n            return (timeSigEvent.measures +\n                elapsedBeats /\n                    (timeSigEvent.timeSignature[0] /\n                        timeSigEvent.timeSignature[1]) /\n                    4);\n        }\n        else {\n            return ticks / this.ppq / 4;\n        }\n    };\n    Object.defineProperty(Header.prototype, \"ppq\", {\n        /**\n         * The number of ticks per quarter note\n         */\n        get: function () {\n            return privatePPQMap.get(this);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Convert seconds to ticks based on the tempo events\n     */\n    Header.prototype.secondsToTicks = function (seconds) {\n        // find the relevant position\n        var index = BinarySearch.search(this.tempos, seconds, \"time\");\n        if (index !== -1) {\n            var tempo = this.tempos[index];\n            var tempoTime = tempo.time;\n            var elapsedTime = seconds - tempoTime;\n            var elapsedBeats = elapsedTime / (60 / tempo.bpm);\n            return Math.round(tempo.ticks + elapsedBeats * this.ppq);\n        }\n        else {\n            // assume 120\n            var beats = seconds / (60 / 120);\n            return Math.round(beats * this.ppq);\n        }\n    };\n    /**\n     * Convert the header into an object.\n     */\n    Header.prototype.toJSON = function () {\n        return {\n            keySignatures: this.keySignatures,\n            meta: this.meta,\n            name: this.name,\n            ppq: this.ppq,\n            tempos: this.tempos.map(function (t) {\n                return {\n                    bpm: t.bpm,\n                    ticks: t.ticks,\n                };\n            }),\n            timeSignatures: this.timeSignatures,\n        };\n    };\n    /**\n     * parse a header json object.\n     */\n    Header.prototype.fromJSON = function (json) {\n        this.name = json.name;\n        // clone all the attributes\n        this.tempos = json.tempos.map(function (t) { return Object.assign({}, t); });\n        this.timeSignatures = json.timeSignatures.map(function (t) {\n            return Object.assign({}, t);\n        });\n        this.keySignatures = json.keySignatures.map(function (t) {\n            return Object.assign({}, t);\n        });\n        this.meta = json.meta.map(function (t) { return Object.assign({}, t); });\n        privatePPQMap.set(this, json.ppq);\n        this.update();\n    };\n    /**\n     * Update the tempo of the midi to a single tempo. Will remove and replace\n     * any other tempos currently set and update all of the event timing.\n     * @param bpm The tempo in beats per second\n     */\n    Header.prototype.setTempo = function (bpm) {\n        this.tempos = [\n            {\n                bpm: bpm,\n                ticks: 0,\n            },\n        ];\n        this.update();\n    };\n    return Header;\n}());\nexports.Header = Header;\n\n});\n\n/**\n * Expose `arrayFlatten`.\n */\nvar arrayFlatten = flatten;\nvar from_1 = flattenFrom;\nvar depth = flattenDepth;\nvar fromDepth = flattenFromDepth;\n\n/**\n * Flatten an array.\n *\n * @param  {Array} array\n * @return {Array}\n */\nfunction flatten (array) {\n  if (!Array.isArray(array)) {\n    throw new TypeError('Expected value to be an array')\n  }\n\n  return flattenFrom(array)\n}\n\n/**\n * Flatten an array-like structure.\n *\n * @param  {Array} array\n * @return {Array}\n */\nfunction flattenFrom (array) {\n  return flattenDown(array, [])\n}\n\n/**\n * Flatten an array-like structure with depth.\n *\n * @param  {Array}  array\n * @param  {number} depth\n * @return {Array}\n */\nfunction flattenDepth (array, depth) {\n  if (!Array.isArray(array)) {\n    throw new TypeError('Expected value to be an array')\n  }\n\n  return flattenFromDepth(array, depth)\n}\n\n/**\n * Flatten an array-like structure with depth.\n *\n * @param  {Array}  array\n * @param  {number} depth\n * @return {Array}\n */\nfunction flattenFromDepth (array, depth) {\n  if (typeof depth !== 'number') {\n    throw new TypeError('Expected the depth to be a number')\n  }\n\n  return flattenDownDepth(array, [], depth)\n}\n\n/**\n * Flatten an array indefinitely.\n *\n * @param  {Array} array\n * @param  {Array} result\n * @return {Array}\n */\nfunction flattenDown (array, result) {\n  for (var i = 0; i < array.length; i++) {\n    var value = array[i];\n\n    if (Array.isArray(value)) {\n      flattenDown(value, result);\n    } else {\n      result.push(value);\n    }\n  }\n\n  return result\n}\n\n/**\n * Flatten an array with depth.\n *\n * @param  {Array}  array\n * @param  {Array}  result\n * @param  {number} depth\n * @return {Array}\n */\nfunction flattenDownDepth (array, result, depth) {\n  depth--;\n\n  for (var i = 0; i < array.length; i++) {\n    var value = array[i];\n\n    if (depth > -1 && Array.isArray(value)) {\n      flattenDownDepth(value, result, depth);\n    } else {\n      result.push(value);\n    }\n  }\n\n  return result\n}\narrayFlatten.from = from_1;\narrayFlatten.depth = depth;\narrayFlatten.fromDepth = fromDepth;\n\nvar Encode = createCommonjsModule(function (module, exports) {\nvar __spreadArrays = (commonjsGlobal && commonjsGlobal.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nvar __importDefault = (commonjsGlobal && commonjsGlobal.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\nvar array_flatten_1 = __importDefault(arrayFlatten);\nfunction encodeNote(note, channel) {\n    return [{\n            absoluteTime: note.ticks,\n            channel: channel,\n            deltaTime: 0,\n            noteNumber: note.midi,\n            type: \"noteOn\",\n            velocity: Math.floor(note.velocity * 127),\n        },\n        {\n            absoluteTime: note.ticks + note.durationTicks,\n            channel: channel,\n            deltaTime: 0,\n            noteNumber: note.midi,\n            type: \"noteOff\",\n            velocity: Math.floor(note.noteOffVelocity * 127),\n        }];\n}\nfunction encodeNotes(track) {\n    return array_flatten_1.default(track.notes.map(function (note) { return encodeNote(note, track.channel); }));\n}\nfunction encodeControlChange(cc, channel) {\n    return {\n        absoluteTime: cc.ticks,\n        channel: channel,\n        controllerType: cc.number,\n        deltaTime: 0,\n        type: \"controller\",\n        value: Math.floor(cc.value * 127),\n    };\n}\nfunction encodeControlChanges(track) {\n    var controlChanges = [];\n    for (var i = 0; i < 127; i++) {\n        if (track.controlChanges.hasOwnProperty(i)) {\n            track.controlChanges[i].forEach(function (cc) {\n                controlChanges.push(encodeControlChange(cc, track.channel));\n            });\n        }\n    }\n    return controlChanges;\n}\nfunction encodePitchBend(pb, channel) {\n    return {\n        absoluteTime: pb.ticks,\n        channel: channel,\n        deltaTime: 0,\n        type: \"pitchBend\",\n        value: pb.value,\n    };\n}\nfunction encodePitchBends(track) {\n    var pitchBends = [];\n    track.pitchBends.forEach(function (pb) {\n        pitchBends.push(encodePitchBend(pb, track.channel));\n    });\n    return pitchBends;\n}\nfunction encodeInstrument(track) {\n    return {\n        absoluteTime: 0,\n        channel: track.channel,\n        deltaTime: 0,\n        programNumber: track.instrument.number,\n        type: \"programChange\",\n    };\n}\nfunction encodeTrackName(name) {\n    return {\n        absoluteTime: 0,\n        deltaTime: 0,\n        meta: true,\n        text: name,\n        type: \"trackName\",\n    };\n}\nfunction encodeTempo(tempo) {\n    return {\n        absoluteTime: tempo.ticks,\n        deltaTime: 0,\n        meta: true,\n        microsecondsPerBeat: Math.floor(60000000 / tempo.bpm),\n        type: \"setTempo\",\n    };\n}\nfunction encodeTimeSignature(timeSig) {\n    return {\n        absoluteTime: timeSig.ticks,\n        deltaTime: 0,\n        denominator: timeSig.timeSignature[1],\n        meta: true,\n        metronome: 24,\n        numerator: timeSig.timeSignature[0],\n        thirtyseconds: 8,\n        type: \"timeSignature\",\n    };\n}\n// function encodeMeta(event: )\nfunction encodeKeySignature(keySig) {\n    var keyIndex = Header_1.keySignatureKeys.indexOf(keySig.key);\n    return {\n        absoluteTime: keySig.ticks,\n        deltaTime: 0,\n        key: keyIndex + 7,\n        meta: true,\n        scale: keySig.scale === \"major\" ? 0 : 1,\n        type: \"keySignature\",\n    };\n}\nfunction encodeText(textEvent) {\n    return {\n        absoluteTime: textEvent.ticks,\n        deltaTime: 0,\n        meta: true,\n        text: textEvent.text,\n        type: textEvent.type,\n    };\n}\n/**\n * Convert the midi object to an array\n */\nfunction encode(midi) {\n    var midiData = {\n        header: {\n            format: 1,\n            numTracks: midi.tracks.length + 1,\n            ticksPerBeat: midi.header.ppq,\n        },\n        tracks: __spreadArrays([\n            __spreadArrays([\n                // the name data\n                {\n                    absoluteTime: 0,\n                    deltaTime: 0,\n                    meta: true,\n                    text: midi.header.name,\n                    type: \"trackName\",\n                }\n            ], midi.header.keySignatures.map(function (keySig) { return encodeKeySignature(keySig); }), midi.header.meta.map(function (e) { return encodeText(e); }), midi.header.tempos.map(function (tempo) { return encodeTempo(tempo); }), midi.header.timeSignatures.map(function (timeSig) { return encodeTimeSignature(timeSig); }))\n        ], midi.tracks.map(function (track) {\n            return __spreadArrays([\n                // add the name\n                encodeTrackName(track.name),\n                // the instrument\n                encodeInstrument(track)\n            ], encodeNotes(track), encodeControlChanges(track), encodePitchBends(track));\n        })),\n    };\n    // sort and set deltaTime of all of the tracks\n    midiData.tracks = midiData.tracks.map(function (track) {\n        track = track.sort(function (a, b) { return a.absoluteTime - b.absoluteTime; });\n        var lastTime = 0;\n        track.forEach(function (note) {\n            note.deltaTime = note.absoluteTime - lastTime;\n            lastTime = note.absoluteTime;\n            delete note.absoluteTime;\n        });\n        // end of track\n        track.push({\n            deltaTime: 0,\n            meta: true,\n            type: \"endOfTrack\",\n        });\n        return track;\n    });\n    // return midiData\n    return new Uint8Array(midiFile.writeMidi(midiData));\n}\nexports.encode = encode;\n\n});\n\nvar ControlChange_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * A map of values to control change names\n * @hidden\n */\nexports.controlChangeNames = {\n    1: \"modulationWheel\",\n    2: \"breath\",\n    4: \"footController\",\n    5: \"portamentoTime\",\n    7: \"volume\",\n    8: \"balance\",\n    10: \"pan\",\n    64: \"sustain\",\n    65: \"portamentoTime\",\n    66: \"sostenuto\",\n    67: \"softPedal\",\n    68: \"legatoFootswitch\",\n    84: \"portamentoControl\",\n};\n/**\n * swap the keys and values\n * @hidden\n */\nexports.controlChangeIds = Object.keys(exports.controlChangeNames).reduce(function (obj, key) {\n    obj[exports.controlChangeNames[key]] = key;\n    return obj;\n}, {});\nvar privateHeaderMap = new WeakMap();\nvar privateCCNumberMap = new WeakMap();\n/**\n * Represents a control change event\n */\nvar ControlChange = /** @class */ (function () {\n    /**\n     * @param event\n     * @param header\n     */\n    function ControlChange(event, header) {\n        privateHeaderMap.set(this, header);\n        privateCCNumberMap.set(this, event.controllerType);\n        this.ticks = event.absoluteTime;\n        this.value = event.value;\n    }\n    Object.defineProperty(ControlChange.prototype, \"number\", {\n        /**\n         * The controller number\n         */\n        get: function () {\n            return privateCCNumberMap.get(this);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ControlChange.prototype, \"name\", {\n        /**\n         * return the common name of the control number if it exists\n         */\n        get: function () {\n            if (exports.controlChangeNames[this.number]) {\n                return exports.controlChangeNames[this.number];\n            }\n            else {\n                return null;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ControlChange.prototype, \"time\", {\n        /**\n         * The time of the event in seconds\n         */\n        get: function () {\n            var header = privateHeaderMap.get(this);\n            return header.ticksToSeconds(this.ticks);\n        },\n        set: function (t) {\n            var header = privateHeaderMap.get(this);\n            this.ticks = header.secondsToTicks(t);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ControlChange.prototype.toJSON = function () {\n        return {\n            number: this.number,\n            ticks: this.ticks,\n            time: this.time,\n            value: this.value,\n        };\n    };\n    return ControlChange;\n}());\nexports.ControlChange = ControlChange;\n\n});\n\nvar ControlChanges = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * Automatically creates an alias for named control values using Proxies\n * @hidden\n */\nfunction createControlChanges() {\n    return new Proxy({}, {\n        // tslint:disable-next-line: typedef\n        get: function (target, handler) {\n            if (target[handler]) {\n                return target[handler];\n            }\n            else if (ControlChange_1.controlChangeIds.hasOwnProperty(handler)) {\n                return target[ControlChange_1.controlChangeIds[handler]];\n            }\n        },\n        // tslint:disable-next-line: typedef\n        set: function (target, handler, value) {\n            if (ControlChange_1.controlChangeIds.hasOwnProperty(handler)) {\n                target[ControlChange_1.controlChangeIds[handler]] = value;\n            }\n            else {\n                target[handler] = value;\n            }\n            return true;\n        },\n    });\n}\nexports.createControlChanges = createControlChanges;\n\n});\n\nvar PitchBend_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar privateHeaderMap = new WeakMap();\n/**\n * Represents a pitch bend event\n */\nvar PitchBend = /** @class */ (function () {\n    /**\n     * @param event\n     * @param header\n     */\n    function PitchBend(event, header) {\n        privateHeaderMap.set(this, header);\n        this.ticks = event.absoluteTime;\n        this.value = event.value;\n    }\n    Object.defineProperty(PitchBend.prototype, \"time\", {\n        /**\n         * The time of the event in seconds\n         */\n        get: function () {\n            var header = privateHeaderMap.get(this);\n            return header.ticksToSeconds(this.ticks);\n        },\n        set: function (t) {\n            var header = privateHeaderMap.get(this);\n            this.ticks = header.secondsToTicks(t);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PitchBend.prototype.toJSON = function () {\n        return {\n            ticks: this.ticks,\n            time: this.time,\n            value: this.value,\n        };\n    };\n    return PitchBend;\n}());\nexports.PitchBend = PitchBend;\n\n});\n\nvar InstrumentMaps = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.instrumentByPatchID = [\n    \"acoustic grand piano\",\n    \"bright acoustic piano\",\n    \"electric grand piano\",\n    \"honky-tonk piano\",\n    \"electric piano 1\",\n    \"electric piano 2\",\n    \"harpsichord\",\n    \"clavi\",\n    \"celesta\",\n    \"glockenspiel\",\n    \"music box\",\n    \"vibraphone\",\n    \"marimba\",\n    \"xylophone\",\n    \"tubular bells\",\n    \"dulcimer\",\n    \"drawbar organ\",\n    \"percussive organ\",\n    \"rock organ\",\n    \"church organ\",\n    \"reed organ\",\n    \"accordion\",\n    \"harmonica\",\n    \"tango accordion\",\n    \"acoustic guitar (nylon)\",\n    \"acoustic guitar (steel)\",\n    \"electric guitar (jazz)\",\n    \"electric guitar (clean)\",\n    \"electric guitar (muted)\",\n    \"overdriven guitar\",\n    \"distortion guitar\",\n    \"guitar harmonics\",\n    \"acoustic bass\",\n    \"electric bass (finger)\",\n    \"electric bass (pick)\",\n    \"fretless bass\",\n    \"slap bass 1\",\n    \"slap bass 2\",\n    \"synth bass 1\",\n    \"synth bass 2\",\n    \"violin\",\n    \"viola\",\n    \"cello\",\n    \"contrabass\",\n    \"tremolo strings\",\n    \"pizzicato strings\",\n    \"orchestral harp\",\n    \"timpani\",\n    \"string ensemble 1\",\n    \"string ensemble 2\",\n    \"synthstrings 1\",\n    \"synthstrings 2\",\n    \"choir aahs\",\n    \"voice oohs\",\n    \"synth voice\",\n    \"orchestra hit\",\n    \"trumpet\",\n    \"trombone\",\n    \"tuba\",\n    \"muted trumpet\",\n    \"french horn\",\n    \"brass section\",\n    \"synthbrass 1\",\n    \"synthbrass 2\",\n    \"soprano sax\",\n    \"alto sax\",\n    \"tenor sax\",\n    \"baritone sax\",\n    \"oboe\",\n    \"english horn\",\n    \"bassoon\",\n    \"clarinet\",\n    \"piccolo\",\n    \"flute\",\n    \"recorder\",\n    \"pan flute\",\n    \"blown bottle\",\n    \"shakuhachi\",\n    \"whistle\",\n    \"ocarina\",\n    \"lead 1 (square)\",\n    \"lead 2 (sawtooth)\",\n    \"lead 3 (calliope)\",\n    \"lead 4 (chiff)\",\n    \"lead 5 (charang)\",\n    \"lead 6 (voice)\",\n    \"lead 7 (fifths)\",\n    \"lead 8 (bass + lead)\",\n    \"pad 1 (new age)\",\n    \"pad 2 (warm)\",\n    \"pad 3 (polysynth)\",\n    \"pad 4 (choir)\",\n    \"pad 5 (bowed)\",\n    \"pad 6 (metallic)\",\n    \"pad 7 (halo)\",\n    \"pad 8 (sweep)\",\n    \"fx 1 (rain)\",\n    \"fx 2 (soundtrack)\",\n    \"fx 3 (crystal)\",\n    \"fx 4 (atmosphere)\",\n    \"fx 5 (brightness)\",\n    \"fx 6 (goblins)\",\n    \"fx 7 (echoes)\",\n    \"fx 8 (sci-fi)\",\n    \"sitar\",\n    \"banjo\",\n    \"shamisen\",\n    \"koto\",\n    \"kalimba\",\n    \"bag pipe\",\n    \"fiddle\",\n    \"shanai\",\n    \"tinkle bell\",\n    \"agogo\",\n    \"steel drums\",\n    \"woodblock\",\n    \"taiko drum\",\n    \"melodic tom\",\n    \"synth drum\",\n    \"reverse cymbal\",\n    \"guitar fret noise\",\n    \"breath noise\",\n    \"seashore\",\n    \"bird tweet\",\n    \"telephone ring\",\n    \"helicopter\",\n    \"applause\",\n    \"gunshot\",\n];\nexports.InstrumentFamilyByID = [\n    \"piano\",\n    \"chromatic percussion\",\n    \"organ\",\n    \"guitar\",\n    \"bass\",\n    \"strings\",\n    \"ensemble\",\n    \"brass\",\n    \"reed\",\n    \"pipe\",\n    \"synth lead\",\n    \"synth pad\",\n    \"synth effects\",\n    \"world\",\n    \"percussive\",\n    \"sound effects\",\n];\nexports.DrumKitByPatchID = {\n    0: \"standard kit\",\n    8: \"room kit\",\n    16: \"power kit\",\n    24: \"electronic kit\",\n    25: \"tr-808 kit\",\n    32: \"jazz kit\",\n    40: \"brush kit\",\n    48: \"orchestra kit\",\n    56: \"sound fx kit\",\n};\n\n});\n\nvar Instrument_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * @hidden\n */\nvar privateTrackMap = new WeakMap();\n/**\n * Describes the midi instrument of a track\n */\nvar Instrument = /** @class */ (function () {\n    /**\n     * @param trackData\n     * @param track\n     */\n    function Instrument(trackData, track) {\n        /**\n         * The instrument number\n         */\n        this.number = 0;\n        privateTrackMap.set(this, track);\n        this.number = 0;\n        if (trackData) {\n            var programChange = trackData.find(function (e) { return e.type === \"programChange\"; });\n            if (programChange) {\n                this.number = programChange.programNumber;\n            }\n        }\n    }\n    Object.defineProperty(Instrument.prototype, \"name\", {\n        /**\n         * The common name of the instrument\n         */\n        get: function () {\n            if (this.percussion) {\n                return InstrumentMaps.DrumKitByPatchID[this.number];\n            }\n            else {\n                return InstrumentMaps.instrumentByPatchID[this.number];\n            }\n        },\n        set: function (n) {\n            var patchNumber = InstrumentMaps.instrumentByPatchID.indexOf(n);\n            if (patchNumber !== -1) {\n                this.number = patchNumber;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Instrument.prototype, \"family\", {\n        /**\n         * The instrument family, e.g. \"piano\".\n         */\n        get: function () {\n            if (this.percussion) {\n                return \"drums\";\n            }\n            else {\n                return InstrumentMaps.InstrumentFamilyByID[Math.floor(this.number / 8)];\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Instrument.prototype, \"percussion\", {\n        /**\n         * If the instrument is a percussion instrument\n         */\n        get: function () {\n            var track = privateTrackMap.get(this);\n            return track.channel === 9;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Convert it to JSON form\n     */\n    Instrument.prototype.toJSON = function () {\n        return {\n            family: this.family,\n            name: this.name,\n            number: this.number,\n        };\n    };\n    /**\n     * Convert from JSON form\n     */\n    Instrument.prototype.fromJSON = function (json) {\n        this.number = json.number;\n    };\n    return Instrument;\n}());\nexports.Instrument = Instrument;\n\n});\n\nvar Note_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Convert a midi note into a pitch\n */\nfunction midiToPitch(midi) {\n    var octave = Math.floor(midi / 12) - 1;\n    return midiToPitchClass(midi) + octave.toString();\n}\n/**\n * Convert a midi note to a pitch class (just the pitch no octave)\n */\nfunction midiToPitchClass(midi) {\n    var scaleIndexToNote = [\"C\", \"C#\", \"D\", \"D#\", \"E\", \"F\", \"F#\", \"G\", \"G#\", \"A\", \"A#\", \"B\"];\n    var note = midi % 12;\n    return scaleIndexToNote[note];\n}\n/**\n * Convert a pitch class to a MIDI note\n */\nfunction pitchClassToMidi(pitch) {\n    var scaleIndexToNote = [\"C\", \"C#\", \"D\", \"D#\", \"E\", \"F\", \"F#\", \"G\", \"G#\", \"A\", \"A#\", \"B\"];\n    return scaleIndexToNote.indexOf(pitch);\n}\n/**\n * Convert a pitch to a midi number\n */\n// tslint:disable-next-line: only-arrow-functions typedef\nvar pitchToMidi = (function () {\n    var regexp = /^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i;\n    var noteToScaleIndex = {\n        // tslint:disable-next-line: object-literal-sort-keys\n        cbb: -2, cb: -1, c: 0, \"c#\": 1, cx: 2,\n        dbb: 0, db: 1, d: 2, \"d#\": 3, dx: 4,\n        ebb: 2, eb: 3, e: 4, \"e#\": 5, ex: 6,\n        fbb: 3, fb: 4, f: 5, \"f#\": 6, fx: 7,\n        gbb: 5, gb: 6, g: 7, \"g#\": 8, gx: 9,\n        abb: 7, ab: 8, a: 9, \"a#\": 10, ax: 11,\n        bbb: 9, bb: 10, b: 11, \"b#\": 12, bx: 13,\n    };\n    return function (note) {\n        var split = regexp.exec(note);\n        var pitch = split[1];\n        var octave = split[2];\n        var index = noteToScaleIndex[pitch.toLowerCase()];\n        return index + (parseInt(octave, 10) + 1) * 12;\n    };\n}());\nvar privateHeaderMap = new WeakMap();\n/**\n * A Note consists of a noteOn and noteOff event\n */\nvar Note = /** @class */ (function () {\n    function Note(noteOn, noteOff, header) {\n        privateHeaderMap.set(this, header);\n        this.midi = noteOn.midi;\n        this.velocity = noteOn.velocity;\n        this.noteOffVelocity = noteOff.velocity;\n        this.ticks = noteOn.ticks;\n        this.durationTicks = noteOff.ticks - noteOn.ticks;\n    }\n    Object.defineProperty(Note.prototype, \"name\", {\n        /**\n         * The note name and octave in scientific pitch notation, e.g. \"C4\"\n         */\n        get: function () {\n            return midiToPitch(this.midi);\n        },\n        set: function (n) {\n            this.midi = pitchToMidi(n);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Note.prototype, \"octave\", {\n        /**\n         * The notes octave number\n         */\n        get: function () {\n            return Math.floor(this.midi / 12) - 1;\n        },\n        set: function (o) {\n            var diff = o - this.octave;\n            this.midi += diff * 12;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Note.prototype, \"pitch\", {\n        /**\n         * The pitch class name. e.g. \"A\"\n         */\n        get: function () {\n            return midiToPitchClass(this.midi);\n        },\n        set: function (p) {\n            this.midi = 12 * (this.octave + 1) + pitchClassToMidi(p);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Note.prototype, \"duration\", {\n        /**\n         * The duration of the segment in seconds\n         */\n        get: function () {\n            var header = privateHeaderMap.get(this);\n            return header.ticksToSeconds(this.ticks + this.durationTicks) - header.ticksToSeconds(this.ticks);\n        },\n        set: function (d) {\n            var header = privateHeaderMap.get(this);\n            var noteEndTicks = header.secondsToTicks(this.time + d);\n            this.durationTicks = noteEndTicks - this.ticks;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Note.prototype, \"time\", {\n        /**\n         * The time of the event in seconds\n         */\n        get: function () {\n            var header = privateHeaderMap.get(this);\n            return header.ticksToSeconds(this.ticks);\n        },\n        set: function (t) {\n            var header = privateHeaderMap.get(this);\n            this.ticks = header.secondsToTicks(t);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Note.prototype, \"bars\", {\n        /**\n         * The number of measures (and partial measures) to this beat.\n         * Takes into account time signature changes\n         * @readonly\n         */\n        get: function () {\n            var header = privateHeaderMap.get(this);\n            return header.ticksToMeasures(this.ticks);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Note.prototype.toJSON = function () {\n        return {\n            duration: this.duration,\n            durationTicks: this.durationTicks,\n            midi: this.midi,\n            name: this.name,\n            ticks: this.ticks,\n            time: this.time,\n            velocity: this.velocity,\n        };\n    };\n    return Note;\n}());\nexports.Note = Note;\n\n});\n\nvar Track_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n\nvar privateHeaderMap = new WeakMap();\n/**\n * A Track is a collection of notes and controlChanges\n */\nvar Track = /** @class */ (function () {\n    function Track(trackData, header) {\n        var _this = this;\n        /**\n         * The name of the track\n         */\n        this.name = \"\";\n        /**\n         * The track's note events\n         */\n        this.notes = [];\n        /**\n         * The control change events\n         */\n        this.controlChanges = ControlChanges.createControlChanges();\n        /**\n         * The pitch bend events\n         */\n        this.pitchBends = [];\n        privateHeaderMap.set(this, header);\n        if (trackData) {\n            var nameEvent = trackData.find(function (e) { return e.type === \"trackName\"; });\n            this.name = nameEvent ? nameEvent.text : \"\";\n        }\n        this.instrument = new Instrument_1.Instrument(trackData, this);\n        // defaults to 0\n        this.channel = 0;\n        if (trackData) {\n            var noteOns = trackData.filter(function (event) { return event.type === \"noteOn\"; });\n            var noteOffs = trackData.filter(function (event) { return event.type === \"noteOff\"; });\n            var _loop_1 = function () {\n                var currentNote = noteOns.shift();\n                // set the channel based on the note\n                this_1.channel = currentNote.channel;\n                // find the corresponding note off\n                var offIndex = noteOffs.findIndex(function (note) {\n                    return note.noteNumber === currentNote.noteNumber &&\n                        note.absoluteTime >= currentNote.absoluteTime;\n                });\n                if (offIndex !== -1) {\n                    // once it's got the note off, add it\n                    var noteOff = noteOffs.splice(offIndex, 1)[0];\n                    this_1.addNote({\n                        durationTicks: noteOff.absoluteTime - currentNote.absoluteTime,\n                        midi: currentNote.noteNumber,\n                        noteOffVelocity: noteOff.velocity / 127,\n                        ticks: currentNote.absoluteTime,\n                        velocity: currentNote.velocity / 127,\n                    });\n                }\n            };\n            var this_1 = this;\n            while (noteOns.length) {\n                _loop_1();\n            }\n            var controlChanges = trackData.filter(function (event) { return event.type === \"controller\"; });\n            controlChanges.forEach(function (event) {\n                _this.addCC({\n                    number: event.controllerType,\n                    ticks: event.absoluteTime,\n                    value: event.value / 127,\n                });\n            });\n            var pitchBends = trackData.filter(function (event) { return event.type === \"pitchBend\"; });\n            pitchBends.forEach(function (event) {\n                _this.addPitchBend({\n                    ticks: event.absoluteTime,\n                    // scale the value between -2^13 to 2^13 to -2 to 2\n                    value: event.value / Math.pow(2, 13),\n                });\n            });\n            var endOfTrackEvent = trackData.find(function (event) {\n                return event.type === \"endOfTrack\";\n            });\n            this.endOfTrackTicks =\n                endOfTrackEvent !== undefined\n                    ? endOfTrackEvent.absoluteTime\n                    : undefined;\n        }\n    }\n    /**\n     * Add a note to the notes array\n     * @param props The note properties to add\n     */\n    Track.prototype.addNote = function (props) {\n        var header = privateHeaderMap.get(this);\n        var note = new Note_1.Note({\n            midi: 0,\n            ticks: 0,\n            velocity: 1,\n        }, {\n            ticks: 0,\n            velocity: 0,\n        }, header);\n        Object.assign(note, props);\n        BinarySearch.insert(this.notes, note, \"ticks\");\n        return this;\n    };\n    /**\n     * Add a control change to the track\n     * @param props\n     */\n    Track.prototype.addCC = function (props) {\n        var header = privateHeaderMap.get(this);\n        var cc = new ControlChange_1.ControlChange({\n            controllerType: props.number,\n        }, header);\n        delete props.number;\n        Object.assign(cc, props);\n        if (!Array.isArray(this.controlChanges[cc.number])) {\n            this.controlChanges[cc.number] = [];\n        }\n        BinarySearch.insert(this.controlChanges[cc.number], cc, \"ticks\");\n        return this;\n    };\n    /**\n     * Add a control change to the track\n     */\n    Track.prototype.addPitchBend = function (props) {\n        var header = privateHeaderMap.get(this);\n        var pb = new PitchBend_1.PitchBend({}, header);\n        Object.assign(pb, props);\n        BinarySearch.insert(this.pitchBends, pb, \"ticks\");\n        return this;\n    };\n    Object.defineProperty(Track.prototype, \"duration\", {\n        /**\n         * The end time of the last event in the track\n         */\n        get: function () {\n            if (!this.notes.length) {\n                return 0;\n            }\n            var maxDuration = this.notes[this.notes.length - 1].time +\n                this.notes[this.notes.length - 1].duration;\n            for (var i = 0; i < this.notes.length - 1; i++) {\n                var duration = this.notes[i].time + this.notes[i].duration;\n                if (maxDuration < duration) {\n                    maxDuration = duration;\n                }\n            }\n            return maxDuration;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Track.prototype, \"durationTicks\", {\n        /**\n         * The end time of the last event in the track in ticks\n         */\n        get: function () {\n            if (!this.notes.length) {\n                return 0;\n            }\n            var maxDuration = this.notes[this.notes.length - 1].ticks +\n                this.notes[this.notes.length - 1].durationTicks;\n            for (var i = 0; i < this.notes.length - 1; i++) {\n                var duration = this.notes[i].ticks + this.notes[i].durationTicks;\n                if (maxDuration < duration) {\n                    maxDuration = duration;\n                }\n            }\n            return maxDuration;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Assign the json values to this track\n     */\n    Track.prototype.fromJSON = function (json) {\n        var _this = this;\n        this.name = json.name;\n        this.channel = json.channel;\n        this.instrument = new Instrument_1.Instrument(undefined, this);\n        this.instrument.fromJSON(json.instrument);\n        if (json.endOfTrackTicks !== undefined) {\n            this.endOfTrackTicks = json.endOfTrackTicks;\n        }\n        for (var number in json.controlChanges) {\n            if (json.controlChanges[number]) {\n                json.controlChanges[number].forEach(function (cc) {\n                    _this.addCC({\n                        number: cc.number,\n                        ticks: cc.ticks,\n                        value: cc.value,\n                    });\n                });\n            }\n        }\n        json.notes.forEach(function (n) {\n            _this.addNote({\n                durationTicks: n.durationTicks,\n                midi: n.midi,\n                ticks: n.ticks,\n                velocity: n.velocity,\n            });\n        });\n    };\n    /**\n     * Convert the track into a JSON format\n     */\n    Track.prototype.toJSON = function () {\n        // convert all the CCs to JSON\n        var controlChanges = {};\n        for (var i = 0; i < 127; i++) {\n            if (this.controlChanges.hasOwnProperty(i)) {\n                controlChanges[i] = this.controlChanges[i].map(function (c) {\n                    return c.toJSON();\n                });\n            }\n        }\n        var json = {\n            channel: this.channel,\n            controlChanges: controlChanges,\n            pitchBends: this.pitchBends.map(function (pb) { return pb.toJSON(); }),\n            instrument: this.instrument.toJSON(),\n            name: this.name,\n            notes: this.notes.map(function (n) { return n.toJSON(); }),\n        };\n        if (this.endOfTrackTicks !== undefined) {\n            json.endOfTrackTicks = this.endOfTrackTicks;\n        }\n        return json;\n    };\n    return Track;\n}());\nexports.Track = Track;\n\n});\n\nvar Midi_1 = createCommonjsModule(function (module, exports) {\nvar __awaiter = (commonjsGlobal && commonjsGlobal.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (commonjsGlobal && commonjsGlobal.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n/**\n * The main midi parsing class\n */\nvar Midi = /** @class */ (function () {\n    /**\n     * Parse the midi data\n     */\n    function Midi(midiArray) {\n        var _this = this;\n        // parse the midi data if there is any\n        var midiData = null;\n        if (midiArray) {\n            if (midiArray instanceof ArrayBuffer) {\n                midiArray = new Uint8Array(midiArray);\n            }\n            midiData = midiFile.parseMidi(midiArray);\n            // add the absolute times to each of the tracks\n            midiData.tracks.forEach(function (track) {\n                var currentTicks = 0;\n                track.forEach(function (event) {\n                    currentTicks += event.deltaTime;\n                    event.absoluteTime = currentTicks;\n                });\n            });\n            // ensure at most one instrument per track\n            midiData.tracks = splitTracks(midiData.tracks);\n        }\n        this.header = new Header_1.Header(midiData);\n        this.tracks = [];\n        // parse the midi data\n        if (midiArray) {\n            // format 0, everything is on the same track\n            this.tracks = midiData.tracks.map(function (trackData) { return new Track_1.Track(trackData, _this.header); });\n            // if it's format 1 and there are no notes on the first track, remove it\n            if (midiData.header.format === 1 && this.tracks[0].duration === 0) {\n                this.tracks.shift();\n            }\n        }\n    }\n    /**\n     * Download and parse the MIDI file. Returns a promise\n     * which resolves to the generated midi file\n     * @param url The url to fetch\n     */\n    Midi.fromUrl = function (url) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, arrayBuffer;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, fetch(url)];\n                    case 1:\n                        response = _a.sent();\n                        if (!response.ok) return [3 /*break*/, 3];\n                        return [4 /*yield*/, response.arrayBuffer()];\n                    case 2:\n                        arrayBuffer = _a.sent();\n                        return [2 /*return*/, new Midi(arrayBuffer)];\n                    case 3: throw new Error(\"could not load \" + url);\n                }\n            });\n        });\n    };\n    Object.defineProperty(Midi.prototype, \"name\", {\n        /**\n         * The name of the midi file, taken from the first track\n         */\n        get: function () {\n            return this.header.name;\n        },\n        set: function (n) {\n            this.header.name = n;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Midi.prototype, \"duration\", {\n        /**\n         * The total length of the file in seconds\n         */\n        get: function () {\n            // get the max of the last note of all the tracks\n            var durations = this.tracks.map(function (t) { return t.duration; });\n            return Math.max.apply(Math, durations);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Midi.prototype, \"durationTicks\", {\n        /**\n         * The total length of the file in ticks\n         */\n        get: function () {\n            // get the max of the last note of all the tracks\n            var durationTicks = this.tracks.map(function (t) { return t.durationTicks; });\n            return Math.max.apply(Math, durationTicks);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Add a track to the midi file\n     */\n    Midi.prototype.addTrack = function () {\n        var track = new Track_1.Track(undefined, this.header);\n        this.tracks.push(track);\n        return track;\n    };\n    /**\n     * Encode the midi as a Uint8Array.\n     */\n    Midi.prototype.toArray = function () {\n        return Encode.encode(this);\n    };\n    /**\n     * Convert the midi object to JSON.\n     */\n    Midi.prototype.toJSON = function () {\n        return {\n            header: this.header.toJSON(),\n            tracks: this.tracks.map(function (track) { return track.toJSON(); }),\n        };\n    };\n    /**\n     * Parse a JSON representation of the object. Will overwrite the current\n     * tracks and header.\n     */\n    Midi.prototype.fromJSON = function (json) {\n        var _this = this;\n        this.header = new Header_1.Header();\n        this.header.fromJSON(json.header);\n        this.tracks = json.tracks.map(function (trackJSON) {\n            var track = new Track_1.Track(undefined, _this.header);\n            track.fromJSON(trackJSON);\n            return track;\n        });\n    };\n    /**\n     * Clone the entire object midi object\n     */\n    Midi.prototype.clone = function () {\n        var midi = new Midi();\n        midi.fromJSON(this.toJSON());\n        return midi;\n    };\n    return Midi;\n}());\nexports.Midi = Midi;\nvar Track_2 = Track_1;\nexports.Track = Track_2.Track;\nvar Header_2 = Header_1;\nexports.Header = Header_2.Header;\n/**\n * Given a list of MIDI tracks, make sure that each channel corresponds to at\n * most one channel and at most one instrument. This means splitting up tracks\n * that contain more than one channel or instrument.\n */\nfunction splitTracks(tracks) {\n    var newTracks = [];\n    for (var i = 0; i < tracks.length; i++) {\n        var defaultTrack = newTracks.length;\n        // a map from [program, channel] tuples to new track numbers\n        var trackMap = new Map();\n        // a map from channel numbers to current program numbers\n        var currentProgram = Array(16).fill(0);\n        for (var _i = 0, _a = tracks[i]; _i < _a.length; _i++) {\n            var event_1 = _a[_i];\n            var targetTrack = defaultTrack;\n            // If the event has a channel, we need to find that channel's current\n            // program number and the appropriate track for this [program, channel]\n            // pair.\n            var channel = event_1.channel;\n            if (channel !== undefined) {\n                if (event_1.type === \"programChange\") {\n                    currentProgram[channel] = event_1.programNumber;\n                }\n                var program = currentProgram[channel];\n                var trackKey = program + \" \" + channel;\n                if (trackMap.has(trackKey)) {\n                    targetTrack = trackMap.get(trackKey);\n                }\n                else {\n                    targetTrack = defaultTrack + trackMap.size;\n                    trackMap.set(trackKey, targetTrack);\n                }\n            }\n            if (!newTracks[targetTrack]) {\n                newTracks.push([]);\n            }\n            newTracks[targetTrack].push(event_1);\n        }\n    }\n    return newTracks;\n}\n\n});\n\nvar Midi = Midi_1.Midi;\nexport { Midi };\n", "import { c as createCommonjsModule, a as commonjsGlobal } from './common/_commonjsHelpers-eb5a497e.js';\n\nvar meyda_min = createCommonjsModule(function (module, exports) {\n!function(t,e){module.exports=e();}(commonjsGlobal,(function(){var t=Object.freeze({__proto__:null,blackman:function(t){let e=new Float32Array(t),r=2*Math.PI/(t-1),a=2*r;for(let i=0;i<t/2;i++)e[i]=.42-.5*Math.cos(i*r)+.08*Math.cos(i*a);for(let r=Math.ceil(t/2);r>0;r--)e[t-r]=e[r-1];return e},sine:function(t){let e=Math.PI/(t-1),r=new Float32Array(t);for(let a=0;a<t;a++)r[a]=Math.sin(e*a);return r},hanning:function(t){let e=new Float32Array(t);for(let r=0;r<t;r++)e[r]=.5-.5*Math.cos(2*Math.PI*r/(t-1));return e},hamming:function(t){let e=new Float32Array(t);for(let r=0;r<t;r++)e[r]=.54-.46*Math.cos(2*Math.PI*(r/t-1));return e}});let e={};function r(t){for(;t%2==0&&t>1;)t/=2;return 1===t}function a(r,a){if(\"rect\"!==a){if(\"\"!==a&&a||(a=\"hanning\"),e[a]||(e[a]={}),!e[a][r.length])try{e[a][r.length]=t[a](r.length);}catch(t){throw new Error(\"Invalid windowing function\")}r=function(t,e){let r=[];for(let a=0;a<Math.min(t.length,e.length);a++)r[a]=t[a]*e[a];return r}(r,e[a][r.length]);}return r}function i(t,e,r){let a=new Float32Array(t);for(var i=0;i<a.length;i++)a[i]=i*e/r,a[i]=13*Math.atan(a[i]/1315.8)+3.5*Math.atan(Math.pow(a[i]/7518,2));return a}function n(t){return Float32Array.from(t)}function o(t){return 1125*Math.log(1+t/700)}function s(t,e,r){let a=new Float32Array(t+2),i=new Float32Array(t+2),n=e/2,s=o(0),l=(o(n)-s)/(t+1),u=Array(t+2);for(let t=0;t<a.length;t++)a[t]=t*l,i[t]=(h=a[t],700*(Math.exp(h/1125)-1)),u[t]=Math.floor((r+1)*i[t]/e);var h,m=Array(t);for(let t=0;t<m.length;t++){m[t]=Array.apply(null,new Array(r/2+1)).map(Number.prototype.valueOf,0);for(let e=u[t];e<u[t+1];e++)m[t][e]=(e-u[t])/(u[t+1]-u[t]);for(let e=u[t+1];e<u[t+2];e++)m[t][e]=(u[t+2]-e)/(u[t+2]-u[t+1]);}return m}function l(t,e,r,a=5,i=2,n=!0,o=440){var s=Math.floor(r/2)+1,l=new Array(r).fill(0).map(((a,i)=>t*function(t,e){return Math.log2(16*t/e)}(e*i/r,o)));l[0]=l[1]-1.5*t;var u,h,m,p=l.slice(1).map(((t,e)=>Math.max(t-l[e])),1).concat([1]),c=Math.round(t/2),f=new Array(t).fill(0).map(((e,r)=>l.map((e=>(10*t+c+e-r)%t-c)))),g=f.map(((t,e)=>t.map(((t,r)=>Math.exp(-.5*Math.pow(2*f[e][r]/p[r],2))))));if(h=(u=g)[0].map((()=>0)),m=u.reduce(((t,e)=>(e.forEach(((e,r)=>{t[r]+=Math.pow(e,2);})),t)),h).map(Math.sqrt),g=u.map(((t,e)=>t.map(((t,e)=>t/(m[e]||1))))),i){var w=l.map((e=>Math.exp(-.5*Math.pow((e/t-a)/i,2))));g=g.map((t=>t.map(((t,e)=>t*w[e]))));}return n&&(g=[...g.slice(3),...g.slice(0,3)]),g.map((t=>t.slice(0,s)))}function u(t,e){for(var r=0,a=0,i=0;i<e.length;i++)r+=Math.pow(i,t)*Math.abs(e[i]),a+=e[i];return r/a}function h(t){if(\"object\"!=typeof t.ampSpectrum||\"object\"!=typeof t.barkScale)throw new TypeError;var e=24,r=new Float32Array(e),a=0,i=t.ampSpectrum,n=new Int32Array(25);n[0]=0;var o=t.barkScale[i.length-1]/e,s=1;for(let r=0;r<i.length;r++)for(;t.barkScale[r]>o;)n[s++]=r,o=s*t.barkScale[i.length-1]/e;n[24]=i.length-1;for(let t=0;t<e;t++){let e=0;for(let r=n[t];r<n[t+1];r++)e+=i[r];r[t]=Math.pow(e,.23);}for(let t=0;t<r.length;t++)a+=r[t];return {specific:r,total:a}}function m(){if(\"object\"!=typeof arguments[0].ampSpectrum)throw new TypeError;for(var t=new Float32Array(arguments[0].ampSpectrum.length),e=0;e<t.length;e++)t[e]=Math.pow(arguments[0].ampSpectrum[e],2);return t}var p=null;var c=function(t,e){var r=t.length;return e=e||2,p&&p[r]||function(t){(p=p||{})[t]=new Array(t*t);for(var e=Math.PI/t,r=0;r<t;r++)for(var a=0;a<t;a++)p[t][a+r*t]=Math.cos(e*(a+.5)*r);}(r),t.map((function(){return 0})).map((function(a,i){return e*t.reduce((function(t,e,a,n){return t+e*p[r][a+i*r]}),0)}))};var f=Object.freeze({__proto__:null,buffer:function(t){return t.signal},rms:function(t){if(\"object\"!=typeof t.signal)throw new TypeError;for(var e=0,r=0;r<t.signal.length;r++)e+=Math.pow(t.signal[r],2);return e/=t.signal.length,e=Math.sqrt(e)},energy:function(){if(\"object\"!=typeof arguments[0].signal)throw new TypeError;for(var t=0,e=0;e<arguments[0].signal.length;e++)t+=Math.pow(Math.abs(arguments[0].signal[e]),2);return t},complexSpectrum:function(t){return t.complexSpectrum},spectralSlope:function(t){if(\"object\"!=typeof t.ampSpectrum)throw new TypeError;let e=0,r=0,a=new Float32Array(t.ampSpectrum.length),i=0,n=0;for(var o=0;o<t.ampSpectrum.length;o++){e+=t.ampSpectrum[o];let s=o*t.sampleRate/t.bufferSize;a[o]=s,i+=s*s,r+=s,n+=s*t.ampSpectrum[o];}return (t.ampSpectrum.length*n-r*e)/(e*(i-Math.pow(r,2)))},spectralCentroid:function(){if(\"object\"!=typeof arguments[0].ampSpectrum)throw new TypeError;return u(1,arguments[0].ampSpectrum)},spectralRolloff:function(){if(\"object\"!=typeof arguments[0].ampSpectrum)throw new TypeError;for(var t=arguments[0].ampSpectrum,e=arguments[0].sampleRate/(2*(t.length-1)),r=0,a=0;a<t.length;a++)r+=t[a];for(var i=.99*r,n=t.length-1;r>i&&n>=0;)r-=t[n],--n;return (n+1)*e},spectralFlatness:function(){if(\"object\"!=typeof arguments[0].ampSpectrum)throw new TypeError;for(var t=0,e=0,r=0;r<arguments[0].ampSpectrum.length;r++)t+=Math.log(arguments[0].ampSpectrum[r]),e+=arguments[0].ampSpectrum[r];return Math.exp(t/arguments[0].ampSpectrum.length)*arguments[0].ampSpectrum.length/e},spectralSpread:function(t){if(\"object\"!=typeof t.ampSpectrum)throw new TypeError;return Math.sqrt(u(2,t.ampSpectrum)-Math.pow(u(1,t.ampSpectrum),2))},spectralSkewness:function(t){if(\"object\"!=typeof t.ampSpectrum)throw new TypeError;var e=u(1,t.ampSpectrum),r=u(2,t.ampSpectrum),a=u(3,t.ampSpectrum);return (2*Math.pow(e,3)-3*e*r+a)/Math.pow(Math.sqrt(r-Math.pow(e,2)),3)},spectralKurtosis:function(){if(\"object\"!=typeof arguments[0].ampSpectrum)throw new TypeError;var t=arguments[0].ampSpectrum,e=u(1,t),r=u(2,t),a=u(3,t),i=u(4,t),n=-3*Math.pow(e,4)+6*e*r-4*e*a+i,o=Math.pow(Math.sqrt(r-Math.pow(e,2)),4);return n/o},amplitudeSpectrum:function(t){return t.ampSpectrum},zcr:function(){if(\"object\"!=typeof arguments[0].signal)throw new TypeError;for(var t=0,e=1;e<arguments[0].signal.length;e++)(arguments[0].signal[e-1]>=0&&arguments[0].signal[e]<0||arguments[0].signal[e-1]<0&&arguments[0].signal[e]>=0)&&t++;return t},loudness:h,perceptualSpread:function(){if(\"object\"!=typeof arguments[0].signal)throw new TypeError;for(var t=h(arguments[0]),e=0,r=0;r<t.specific.length;r++)t.specific[r]>e&&(e=t.specific[r]);var a=Math.pow((t.total-e)/t.total,2);return a},perceptualSharpness:function(){if(\"object\"!=typeof arguments[0].signal)throw new TypeError;for(var t=h(arguments[0]),e=t.specific,r=0,a=0;a<e.length;a++)r+=a<15?(a+1)*e[a+1]:.066*Math.exp(.171*(a+1));return r*=.11/t.total},powerSpectrum:m,mfcc:function(t){if(\"object\"!=typeof t.ampSpectrum)throw new TypeError(\"Valid ampSpectrum is required to generate MFCC\");if(\"object\"!=typeof t.melFilterBank)throw new TypeError(\"Valid melFilterBank is required to generate MFCC\");let e=Math.min(40,Math.max(1,t.numberOfMFCCCoefficients||13)),r=m(t),a=t.melFilterBank.length,i=Array(a);if(a<e)throw new Error(\"Insufficient filter bank for requested number of coefficients\");let n=new Float32Array(a);for(let e=0;e<n.length;e++){i[e]=new Float32Array(t.bufferSize/2),n[e]=0;for(let a=0;a<t.bufferSize/2;a++)i[e][a]=t.melFilterBank[e][a]*r[a],n[e]+=i[e][a];n[e]=Math.log(n[e]+1);}let o=Array.prototype.slice.call(n);return c(o).slice(0,e)},chroma:function(t){if(\"object\"!=typeof t.ampSpectrum)throw new TypeError(\"Valid ampSpectrum is required to generate chroma\");if(\"object\"!=typeof t.chromaFilterBank)throw new TypeError(\"Valid chromaFilterBank is required to generate chroma\");var e=t.chromaFilterBank.map(((e,r)=>t.ampSpectrum.reduce(((t,r,a)=>t+r*e[a]),0))),r=Math.max(...e);return r?e.map((t=>t/r)):e},spectralFlux:function(t){if(\"object\"!=typeof t.signal||\"object\"!=typeof t.previousSignal)throw new TypeError;let e=0;for(let r=-t.bufferSize/2;r<signal.length/2-1;r++)x=Math.abs(t.signal[r])-Math.abs(t.previousSignal[r]),e+=(x+Math.abs(x))/2;return e}});function g(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}var w={},S={},_={bitReverseArray:function(t){if(void 0===w[t]){for(var e=(t-1).toString(2).length,r=\"0\".repeat(e),a={},i=0;i<t;i++){var n=i.toString(2);n=r.substr(n.length)+n,n=[].concat(g(n)).reverse().join(\"\"),a[i]=parseInt(n,2);}w[t]=a;}return w[t]},multiply:function(t,e){return {real:t.real*e.real-t.imag*e.imag,imag:t.real*e.imag+t.imag*e.real}},add:function(t,e){return {real:t.real+e.real,imag:t.imag+e.imag}},subtract:function(t,e){return {real:t.real-e.real,imag:t.imag-e.imag}},euler:function(t,e){var r=-2*Math.PI*t/e;return {real:Math.cos(r),imag:Math.sin(r)}},conj:function(t){return t.imag*=-1,t},constructComplexArray:function(t){var e={};e.real=void 0===t.real?t.slice():t.real.slice();var r=e.real.length;return void 0===S[r]&&(S[r]=Array.apply(null,Array(r)).map(Number.prototype.valueOf,0)),e.imag=S[r].slice(),e}},d=function(t){var e={};void 0===t.real||void 0===t.imag?e=_.constructComplexArray(t):(e.real=t.real.slice(),e.imag=t.imag.slice());var r=e.real.length,a=Math.log2(r);if(Math.round(a)!=a)throw new Error(\"Input size must be a power of 2.\");if(e.real.length!=e.imag.length)throw new Error(\"Real and imaginary components must have the same length.\");for(var i=_.bitReverseArray(r),n={real:[],imag:[]},o=0;o<r;o++)n.real[i[o]]=e.real[o],n.imag[i[o]]=e.imag[o];for(var s=0;s<r;s++)e.real[s]=n.real[s],e.imag[s]=n.imag[s];for(var l=1;l<=a;l++)for(var u=Math.pow(2,l),h=0;h<u/2;h++)for(var m=_.euler(h,u),p=0;p<r/u;p++){var c=u*p+h,f=u*p+h+u/2,g={real:e.real[c],imag:e.imag[c]},w={real:e.real[f],imag:e.imag[f]},S=_.multiply(m,w),d=_.subtract(g,S);e.real[f]=d.real,e.imag[f]=d.imag;var y=_.add(S,g);e.real[c]=y.real,e.imag[c]=y.imag;}return e},y=d;class b{constructor(t,e){if(this._m=e,!t.audioContext)throw this._m.errors.noAC;if(t.bufferSize&&!r(t.bufferSize))throw this._m._errors.notPow2;if(!t.source)throw this._m._errors.noSource;this._m.audioContext=t.audioContext,this._m.bufferSize=t.bufferSize||this._m.bufferSize||256,this._m.hopSize=t.hopSize||this._m.hopSize||this._m.bufferSize,this._m.sampleRate=t.sampleRate||this._m.audioContext.sampleRate||44100,this._m.callback=t.callback,this._m.windowingFunction=t.windowingFunction||\"hanning\",this._m.featureExtractors=f,this._m.EXTRACTION_STARTED=t.startImmediately||!1,this._m.channel=\"number\"==typeof t.channel?t.channel:0,this._m.inputs=t.inputs||1,this._m.outputs=t.outputs||1,this._m.numberOfMFCCCoefficients=t.numberOfMFCCCoefficients||this._m.numberOfMFCCCoefficients||13,this._m.spn=this._m.audioContext.createScriptProcessor(this._m.bufferSize,this._m.inputs,this._m.outputs),this._m.spn.connect(this._m.audioContext.destination),this._m._featuresToExtract=t.featureExtractors||[],this._m.barkScale=i(this._m.bufferSize,this._m.sampleRate,this._m.bufferSize),this._m.melFilterBank=s(Math.max(this._m.melBands,this._m.numberOfMFCCCoefficients),this._m.sampleRate,this._m.bufferSize),this._m.inputData=null,this._m.previousInputData=null,this._m.frame=null,this._m.previousFrame=null,this.setSource(t.source),this._m.spn.onaudioprocess=t=>{if(null!==this._m.inputData&&(this._m.previousInputData=this._m.inputData),this._m.inputData=t.inputBuffer.getChannelData(this._m.channel),this._m.previousInputData)(e=new Float32Array(this._m.previousInputData.length+this._m.inputData.length-this._m.hopSize)).set(this._m.previousInputData.slice(this._m.hopSize)),e.set(this._m.inputData,this._m.previousInputData.length-this._m.hopSize);else var e=this._m.inputData;(function(t,e,r){if(t.length<e)throw new Error(\"Buffer is too short for frame length\");if(r<1)throw new Error(\"Hop length cannot be less that 1\");if(e<1)throw new Error(\"Frame length cannot be less that 1\");const a=1+Math.floor((t.length-e)/r);return new Array(a).fill(0).map(((a,i)=>t.slice(i*r,i*r+e)))})(e,this._m.bufferSize,this._m.hopSize).forEach((t=>{this._m.frame=t;var e=this._m.extract(this._m._featuresToExtract,this._m.frame,this._m.previousFrame);\"function\"==typeof this._m.callback&&this._m.EXTRACTION_STARTED&&this._m.callback(e),this._m.previousFrame=this._m.frame;}));};}start(t){this._m._featuresToExtract=t||this._m._featuresToExtract,this._m.EXTRACTION_STARTED=!0;}stop(){this._m.EXTRACTION_STARTED=!1;}setSource(t){this._m.source&&this._m.source.disconnect(this._m.spn),this._m.source=t,this._m.source.connect(this._m.spn);}setChannel(t){t<=this._m.inputs?this._m.channel=t:console.error(`Channel ${t} does not exist. Make sure you've provided a value for 'inputs' that is greater than ${t} when instantiating the MeydaAnalyzer`);}get(t){return this._m.inputData?this._m.extract(t||this._m._featuresToExtract,this._m.inputData,this._m.previousInputData):null}}var v={audioContext:null,spn:null,bufferSize:512,sampleRate:44100,melBands:26,chromaBands:12,callback:null,windowingFunction:\"hanning\",featureExtractors:f,EXTRACTION_STARTED:!1,numberOfMFCCCoefficients:13,_featuresToExtract:[],windowing:a,_errors:{notPow2:new Error(\"Meyda: Buffer size must be a power of 2, e.g. 64 or 512\"),featureUndef:new Error(\"Meyda: No features defined.\"),invalidFeatureFmt:new Error(\"Meyda: Invalid feature format\"),invalidInput:new Error(\"Meyda: Invalid input.\"),noAC:new Error(\"Meyda: No AudioContext specified.\"),noSource:new Error(\"Meyda: No source node specified.\")},createMeydaAnalyzer:function(t){return new b(t,Object.assign({},v))},listAvailableFeatureExtractors:function(){return Object.keys(this.featureExtractors)},extract:function(t,e,a){if(!e)throw this._errors.invalidInput;if(\"object\"!=typeof e)throw this._errors.invalidInput;if(!t)throw this._errors.featureUndef;if(!r(e.length))throw this._errors.notPow2;void 0!==this.barkScale&&this.barkScale.length==this.bufferSize||(this.barkScale=i(this.bufferSize,this.sampleRate,this.bufferSize)),void 0!==this.melFilterBank&&this.barkScale.length==this.bufferSize&&this.melFilterBank.length==this.melBands||(this.melFilterBank=s(Math.max(this.melBands,this.numberOfMFCCCoefficients),this.sampleRate,this.bufferSize)),void 0!==this.chromaFilterBank&&this.chromaFilterBank.length==this.chromaBands||(this.chromaFilterBank=l(this.chromaBands,this.sampleRate,this.bufferSize)),void 0===e.buffer?this.signal=n(e):this.signal=e;let o=M(e,this.windowingFunction,this.bufferSize);if(this.signal=o.windowedSignal,this.complexSpectrum=o.complexSpectrum,this.ampSpectrum=o.ampSpectrum,a){let t=M(a,this.windowingFunction,this.bufferSize);this.previousSignal=t.windowedSignal,this.previousComplexSpectrum=t.complexSpectrum,this.previousAmpSpectrum=t.ampSpectrum;}const u=t=>this.featureExtractors[t]({ampSpectrum:this.ampSpectrum,chromaFilterBank:this.chromaFilterBank,complexSpectrum:this.complexSpectrum,signal:this.signal,bufferSize:this.bufferSize,sampleRate:this.sampleRate,barkScale:this.barkScale,melFilterBank:this.melFilterBank,previousSignal:this.previousSignal,previousAmpSpectrum:this.previousAmpSpectrum,previousComplexSpectrum:this.previousComplexSpectrum,numberOfMFCCCoefficients:this.numberOfMFCCCoefficients});if(\"object\"==typeof t)return t.reduce(((t,e)=>Object.assign({},t,{[e]:u(e)})),{});if(\"string\"==typeof t)return u(t);throw this._errors.invalidFeatureFmt}},M=function(t,e,r){var i={};void 0===t.buffer?i.signal=n(t):i.signal=t,i.windowedSignal=a(i.signal,e),i.complexSpectrum=y(i.windowedSignal),i.ampSpectrum=new Float32Array(r/2);for(var o=0;o<r/2;o++)i.ampSpectrum[o]=Math.sqrt(Math.pow(i.complexSpectrum.real[o],2)+Math.pow(i.complexSpectrum.imag[o],2));return i};return \"undefined\"!=typeof window&&(window.Meyda=v),v}));\n\n});\n\nexport default meyda_min;\n", "import {\n  transduce,\n  push,\n  comp,\n  filter,\n  map,\n  multiplexObj,\n  zip,\n  repeat,\n  take,\n  choices,\n  range\n} from \"../_snowpack/pkg/@thi.ng/transducers.js\";\nimport {frequencies} from \"../_snowpack/pkg/@thi.ng/iterators.js\";\nimport {intersection} from \"../_snowpack/pkg/@thi.ng/associative.js\";\nimport {majorKey} from \"../_snowpack/pkg/@tonaljs/key.js\";\nimport {simplify} from \"../_snowpack/pkg/@tonaljs/note.js\";\nimport {toMidi} from \"../_snowpack/pkg/@tonaljs/midi.js\";\nimport {Midi as parseMidi} from \"../_snowpack/pkg/@tonejs/midi.js\";\nimport Meyda from \"../_snowpack/pkg/meyda.js\";\nconst keys = [\n  \"C\",\n  \"C#\",\n  \"D\",\n  \"D#\",\n  \"E\",\n  \"F\",\n  \"F#\",\n  \"G\",\n  \"G#\",\n  \"A\",\n  \"A#\",\n  \"B\"\n];\nconst majorKeys = transduce(map((x) => majorKey(x)), push(), keys);\nexport const scales = transduce(multiplexObj({\n  raw: map((x) => x),\n  tonicMidi: map((x) => toMidi(x.tonic + \"2\") % 12),\n  majorKey: map((x) => x.tonic),\n  minorKey: map((x) => simplify(x.minorRelative).toLowerCase()),\n  normalizedMidis: map((x) => transduce(map((y) => toMidi(y + \"2\") % 12), push(), x.scale))\n}), push(), majorKeys);\nexport const getComparisons = (keyState) => {\n  const inputMidis = transduce(comp(map((x) => keyState[x] ? x : null), filter((x) => x !== null)), push(), range(12));\n  const commons = transduce(comp(map((x) => intersection(new Set(x.normalizedMidis), new Set(inputMidis))), map((x) => Array.from(x))), push(), scales);\n  let comparisons = transduce(multiplexObj({\n    majorKey: map((x) => x[0].majorKey),\n    minorKey: map((x) => x[0].minorKey),\n    normalizedMidis: map((x) => x[0].normalizedMidis),\n    common: map((x) => x[1]),\n    similarity: map((x) => x[1].length / inputMidis.length + (inputMidis.includes(x[0].tonicMidi) ? 0.1 : 0))\n  }), push(), zip(scales, commons));\n  comparisons = comparisons.sort((a, b) => b.similarity - a.similarity);\n  return comparisons;\n};\nexport const defaultKeyState = [...repeat(false, 12)];\nexport const randomKeyState = [...take(12, choices([true, false], [0.5, 0.5]))];\nexport const parseMidiFile = (result) => {\n  const parsedMidi = new parseMidi(result);\n  let tracks = parsedMidi.tracks;\n  tracks.sort((a, b) => b.notes.length - a.notes.length);\n  const track = tracks[0];\n  const midiNotes = transduce(map((x) => x[0] % 12), push(), take(7, frequencies(track.notes.map((x) => x.midi))));\n  return Array.from(new Set(midiNotes));\n};\nconst createAudioContext = () => {\n  try {\n    return new AudioContext();\n  } catch {\n    return new window.webkitAudioContext();\n  }\n};\nconst decodeAudioData = async (context, arrayBuffer) => {\n  try {\n    return await context.decodeAudioData(arrayBuffer);\n  } catch {\n    return new Promise((reject, resolve) => {\n      context.decodeAudioData(arrayBuffer, reject, resolve);\n    });\n  }\n};\nconst nearestPowerOf2 = (n) => {\n  return Math.pow(2, Math.round(Math.log(n) / Math.log(2)));\n};\nexport const parseAudioFile = async (result) => {\n  const SAMPLES_PER_SECOND = 1;\n  const context = createAudioContext();\n  const audioBuffer = await decodeAudioData(context, result);\n  const audioArray = audioBuffer.getChannelData(0);\n  const chunkSize = nearestPowerOf2(audioBuffer.sampleRate / SAMPLES_PER_SECOND);\n  const chunkCount = Math.floor(audioArray.length / chunkSize);\n  const chroma = transduce(map((i) => Meyda.extract(\"chroma\", audioArray.slice(i * chunkSize, (i + 1) * chunkSize))), push(), range(chunkCount));\n  const coreNotes = transduce(map((x) => x.indexOf(1)), push(), chroma);\n  return transduce(map((x) => x[0]), push(), transduce(map((x) => x), push(), frequencies(coreNotes)).sort((a, b) => b[1] - a[1])).slice(0, 7);\n};\n", "import {SET_HIGHLIGHTS, RESET_HIGHLIGHTS} from \"../events.js\";\nimport {getComparisons} from \"../utils.js\";\nexport const keyGroup = (ctx) => {\n  const views = ctx.views;\n  const ui = ctx.ui;\n  const size = views.size.deref();\n  const width = Math.min(400 * 1.1, size[0] * 0.9);\n  const viewConfig = views.viewConfig.deref();\n  const comparisons = getComparisons(views.keyState.deref());\n  const buffer = 0.1;\n  const whRatio = 35;\n  const bgOpts = {\n    width,\n    height: width / whRatio,\n    rx: 5,\n    fill: \"#e2e2e2\"\n  };\n  return [\n    \"div\",\n    ui.keyGroup.root,\n    ...comparisons.map((x, _) => [\n      \"div\",\n      {\n        ...ui.keyGroup.block,\n        ...{\n          onmouseover: (e) => {\n            e.preventDefault();\n            ctx.bus.dispatch([SET_HIGHLIGHTS, x.normalizedMidis]);\n          },\n          onmouseleave: (e) => {\n            e.preventDefault();\n            ctx.bus.dispatch([RESET_HIGHLIGHTS]);\n          }\n        }\n      },\n      [\n        \"div.flex\",\n        [\n          \"div\",\n          x.majorKey,\n          viewConfig.showSmall ? [\"small\", \" maj\"] : []\n        ],\n        viewConfig.showMinor ? [\n          \"div\",\n          [\"span.text-red-600\", \"  \"],\n          x.minorKey,\n          viewConfig.showSmall ? [\"small\", \" min\"] : []\n        ] : []\n      ],\n      [\n        \"div\",\n        [\n          \"svg\",\n          {width: width * (1 + buffer), height: width / whRatio},\n          [\n            \"g\",\n            [\"rect\", bgOpts],\n            x.common.length > 0 ? [\n              \"rect\",\n              {\n                ...bgOpts,\n                width: (x.similarity - buffer) * width,\n                fill: \"#000\"\n              }\n            ] : []\n          ]\n        ]\n      ]\n    ])\n  ];\n};\n", "import {parseMidiFile, defaultKeyState, parseAudioFile} from \"../utils.js\";\nimport {SET_MIDI_FILE, SET_MIDI_FILE_ERROR, SET_KEY_STATE} from \"../events.js\";\nconst stopE = (e) => {\n  e.preventDefault();\n};\nconst onDrop = (bus, e) => {\n  stopE(e);\n  const files = e.dataTransfer.files;\n  if (files && files.length > 0) {\n    const reader = new FileReader();\n    const file = files[0];\n    reader.onload = async (e2) => {\n      if (file.type === \"audio/midi\") {\n        bus.dispatch([SET_MIDI_FILE, file.name]);\n        const midiNotes = parseMidiFile(e2.target.result);\n        bus.dispatch([\n          SET_KEY_STATE,\n          defaultKeyState.map((_, k) => midiNotes.includes(k) ? true : false)\n        ]);\n      } else if (file.type === \"audio/aac\" || file.type === \"audio/mpeg\" || file.type === \"audio/wav\") {\n        bus.dispatch([SET_MIDI_FILE, file.name]);\n        const midiNotes = await parseAudioFile(e2.target.result);\n        bus.dispatch([\n          SET_KEY_STATE,\n          defaultKeyState.map((_, k) => midiNotes.includes(k) ? true : false)\n        ]);\n      } else {\n        bus.dispatch([SET_MIDI_FILE_ERROR]);\n      }\n    };\n    reader.readAsArrayBuffer(file);\n  }\n};\nexport const fileDropZone = (ctx) => {\n  const bus = ctx.bus;\n  const views = ctx.views;\n  const ui = ctx.ui.fileDropZone;\n  const midiFile = views.midiFile.deref();\n  const size = views.size.deref();\n  const bWidth = Math.min(400 * 1.1, size[0] * 0.9);\n  return [\n    \"div\",\n    {\n      ...ui.root,\n      ...{\n        ondrop: (e) => {\n          e.target.classList.remove(\"nm-inset-gray-200-sm\");\n          onDrop(bus, e);\n        },\n        ondragenter: (e) => {\n          e.target.classList.add(\"nm-inset-gray-200-sm\");\n          stopE(e);\n        },\n        ondragleave: (e) => {\n          e.target.classList.remove(\"nm-inset-gray-200-sm\");\n          stopE(e);\n        },\n        ondragover: (e) => stopE(e),\n        style: {\n          width: `${bWidth}px`\n        }\n      }\n    },\n    midiFile\n  ];\n};\n", "import {slideToggleRect} from \"../../_snowpack/pkg/@thi.ng/hdom-components.js\";\nimport {TOGGLE_VIEW_CONFIG} from \"../events.js\";\nconst rectOpts = {\n  w: 16,\n  h: 8,\n  pad: 2,\n  margin: 0\n};\nconst toggleSq = slideToggleRect({...rectOpts, vertical: false});\nexport const viewConfigToggleGroup = (ctx) => {\n  const views = ctx.views;\n  const ui = ctx.ui.viewConfigToggleGroup;\n  const config = views.viewConfig.deref();\n  return [\n    \"div\",\n    Object.entries(config).map(([k, v]) => [\n      \"div\",\n      ui.block,\n      [\n        toggleSq,\n        {\n          onclick: () => ctx.bus.dispatch([TOGGLE_VIEW_CONFIG, k])\n        },\n        v\n      ],\n      [\"span\", ui.caption, k]\n    ])\n  ];\n};\n", "import {title} from \"../../_snowpack/pkg/@thi.ng/hdom-components.js\";\nimport {midiDevicesStatus} from \"./midi-devices-status.js\";\nimport {toolbar} from \"./toolbar.js\";\nimport {toggleGroup} from \"./toggle-group.js\";\nimport {keyGroup} from \"./key-group.js\";\nimport {fileDropZone} from \"./file-drop-zone.js\";\nimport {viewConfigToggleGroup} from \"./view-config-toggle-group.js\";\nconst h2 = title({\n  element: \"h2\",\n  attribs: {class: \"text-2xl font-extrabold mb-4\"}\n});\nexport const home = (_) => {\n  return () => [\n    \"div\",\n    [h2, \"OP-Z KEY FINDER\"],\n    [\"div.pb-4\", midiDevicesStatus],\n    [\"div.pb-4\", toolbar],\n    [\"div.mb-4\", [toggleGroup], [keyGroup]],\n    [fileDropZone],\n    [\n      \"div.block\",\n      [\"details\", [\"summary\", \"View Config\"], [viewConfigToggleGroup]]\n    ]\n  ];\n};\n", "export const HOME = {\n  id: \"home\",\n  match: [\"home\"]\n};\n", "import {\n  EV_SET_VALUE,\n  EV_TOGGLE_VALUE,\n  FX_DELAY,\n  FX_DISPATCH_ASYNC,\n  FX_DISPATCH_NOW,\n  valueUpdater\n} from \"../_snowpack/pkg/@thi.ng/interceptors.js\";\nimport {take, choices} from \"../_snowpack/pkg/@thi.ng/transducers.js\";\nimport {home} from \"./components/home.js\";\nimport * as ev from \"./events.js\";\nimport * as routes from \"./routes.js\";\nimport {defaultKeyState} from \"./utils.js\";\nexport const CONFIG = {\n  router: {\n    useFragment: true,\n    defaultRouteID: routes.HOME.id,\n    routes: [routes.HOME]\n  },\n  events: {\n    [ev.TOGGLE_DEBUG]: valueUpdater(\"debug\", (x) => x ^ 1),\n    [ev.TOGGLE_KEY_STATE]: [\n      (_, [__, i]) => ({\n        [FX_DISPATCH_NOW]: [EV_TOGGLE_VALUE, [\"keyState\", i]]\n      })\n    ],\n    [ev.SET_KEY_STATE]: [\n      (_, [__, keyState]) => ({\n        [FX_DISPATCH_NOW]: [EV_SET_VALUE, [\"keyState\", keyState]]\n      })\n    ],\n    [ev.RESET_KEY_STATE]: [\n      () => ({\n        [FX_DISPATCH_NOW]: [ev.SET_KEY_STATE, defaultKeyState]\n      })\n    ],\n    [ev.SET_RANDOM_KEY_STATE]: [\n      () => ({\n        [FX_DISPATCH_NOW]: [\n          ev.SET_KEY_STATE,\n          [...take(12, choices([true, false], [0.5, 0.5]))]\n        ]\n      })\n    ],\n    [ev.SET_HIGHLIGHTS]: [\n      (_, [__, highlights]) => ({\n        [FX_DISPATCH_NOW]: [EV_SET_VALUE, [\"highlights\", highlights]]\n      })\n    ],\n    [ev.RESET_HIGHLIGHTS]: [\n      () => ({\n        [FX_DISPATCH_NOW]: [ev.SET_HIGHLIGHTS, []]\n      })\n    ],\n    [ev.SET_SIZE]: [\n      () => ({\n        [FX_DISPATCH_NOW]: [\n          EV_SET_VALUE,\n          [\"size\", [window.innerWidth, window.innerHeight]]\n        ]\n      })\n    ],\n    [ev.TOGGLE_VIEW_CONFIG]: [\n      (_, [__, key]) => ({\n        [FX_DISPATCH_NOW]: [EV_TOGGLE_VALUE, [\"viewConfig\", key]]\n      })\n    ],\n    [ev.SET_MIDI_DEVICES]: [\n      (_, [__, devices]) => ({\n        [FX_DISPATCH_NOW]: [\n          [EV_TOGGLE_VALUE, \"enabledMidi\"],\n          [EV_SET_VALUE, [\"midiDevices\", devices]]\n        ]\n      })\n    ],\n    [ev.SET_MIDI_FILE]: [\n      (_, [__, file]) => ({\n        [FX_DISPATCH_NOW]: [[EV_SET_VALUE, [\"midiFile\", file]]]\n      })\n    ],\n    [ev.SET_MIDI_FILE_ERROR]: [\n      () => ({\n        [FX_DISPATCH_NOW]: [ev.SET_MIDI_FILE, \"INVALID MIDI FILE...\"],\n        [FX_DISPATCH_ASYNC]: [\n          FX_DELAY,\n          [500, \"DROP MIDI/AUDIO FILE HERE...\"],\n          ev.SET_MIDI_FILE,\n          ev.SET_MIDI_FILE\n        ]\n      })\n    ],\n    [ev.SET_COMPARISON]: [\n      (_, [__, comparison]) => ({\n        [FX_DISPATCH_NOW]: [[EV_SET_VALUE, [\"comparison\", comparison]]]\n      })\n    ]\n  },\n  effects: {},\n  components: {\n    [routes.HOME.id]: home\n  },\n  domRoot: \"app\",\n  initialState: {\n    enabledMidi: false,\n    midiDevices: [],\n    midiFile: \"DROP MIDI/AUDIO FILE HERE...\",\n    keyState: defaultKeyState,\n    highlights: [],\n    size: [window.innerWidth, window.innerHeight],\n    viewConfig: {showMinor: true, showSmall: true},\n    route: {},\n    debug: 1\n  },\n  views: {\n    enabledMidi: \"enabledMidi\",\n    midiDevices: \"midiDevices\",\n    midiFile: \"midiFile\",\n    keyState: \"keyState\",\n    highlights: \"highlights\",\n    size: \"size\",\n    viewConfig: \"viewConfig\",\n    json: [\"\", (state) => JSON.stringify(state, null, 2)],\n    debug: \"debug\"\n  },\n  ui: {\n    root: {class: \"clearfix flex flex-row font-sans m-0\"},\n    midiDevicesStatus: {\n      content: [\n        {class: \"gray-500 p-1 bg-red-200 rounded-full\"},\n        {class: \"gray-500 p-1 bg-green-200 rounded-full\"}\n      ],\n      dropdown: {\n        root: {\n          class: \"ml-2 rounded-full nm-flat-gray-200 p-2 font-medium uppercase\"\n        },\n        selection: {class: \"bg-transparent font-medium uppercase\"}\n      }\n    },\n    toolbar: {\n      root: {class: \"my-4\"},\n      button: {\n        class: \"cursor-pointer mr-3 px-8 py-2 text-md font-medium nm-flat-gray-200 hover:nm-flat-gray-200-lg active:nm-inset-gray-200-sm rounded-full uppercase transition duration-200 ease-in-out transform\"\n      }\n    },\n    toggleGroup: {\n      root: {class: \"\"},\n      key: {\n        major: {\n          class: \"inline-block cursor-pointer nm-flat-gray-200 hover:nm-flat-gray-200-lg active:nm-inset-gray-200-lg rounded-full\"\n        },\n        e: {\n          class: \"inline-block cursor-pointer nm-flat-gray-200 hover:nm-flat-gray-200-lg active:nm-inset-gray-200-lg rounded-full mr-8\"\n        },\n        minor: {\n          class: \"inline-block cursor-pointer nm-flat-gray-200 hover:nm-flat-gray-200-lg active:nm-inset-gray-200-lg rounded-full mb-8\"\n        }\n      }\n    },\n    keyGroup: {\n      root: {class: \"inline-block\"},\n      block: {class: \"my-2 mr-2\"}\n    },\n    fileDropZone: {\n      root: {\n        class: \"mt-2 mb-8 border-dotted border-2 inline-block p-8 text-center font-medium nm-flat-gray-200-lg\"\n      }\n    },\n    code: {\n      class: \"m-0 ml-8 p-2 text-xs bg-gray-100 font-mono overflow-x-hidden\"\n    },\n    column: {\n      content: [\n        {class: \"float-left w-full m-4\"},\n        {class: \"float-left w-5/6 m-4\"}\n      ],\n      debug: [\n        {class: \"float-right m-4 close\"},\n        {class: \"float-right m-4 open\"}\n      ]\n    },\n    debugToggle: {class: \"toggle cursor-pointer tracking-wider\"},\n    viewConfigToggleGroup: {\n      block: {\n        class: \"cursor-pointer my-2 flex justify-start items-center\"\n      },\n      caption: {class: \"ml-2\"}\n    }\n  }\n};\n", "import {App} from \"./app.js\";\nimport {CONFIG} from \"./config.js\";\nnew App(CONFIG).start();\n"],
  "mappings": "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AAQ,CAI/C,IAAK,UAAY,CACb,GAAI,GAAS,EAAiB,IAAI,MAClC,MAAO,GAAO,eAAe,KAAK,QAEtC,IAAK,SAAU,EAAG,CACd,GAAI,GAAS,EAAiB,IAAI,MAClC,KAAK,MAAQ,EAAO,eAAe,IAEvC,WAAY,GACZ,aAAc,KAElB,EAAU,UAAU,OAAS,UAAY,CACrC,MAAO,CACH,MAAO,KAAK,MACZ,KAAM,KAAK,KACX,MAAO,KAAK,QAGb,KAEX,EAAQ,UAAY,IAIhB,GAAiB,EAAqB,SAAU,EAAQ,EAAS,CACrE,OAAO,eAAe,EAAS,aAAc,CAAE,MAAO,KACtD,EAAQ,oBAAsB,CAC1B,uBACA,wBACA,uBACA,mBACA,mBACA,mBACA,cACA,QACA,UACA,eACA,YACA,aACA,UACA,YACA,gBACA,WACA,gBACA,mBACA,aACA,eACA,aACA,YACA,YACA,kBACA,0BACA,0BACA,yBACA,0BACA,0BACA,oBACA,oBACA,mBACA,gBACA,yBACA,uBACA,gBACA,cACA,cACA,eACA,eACA,SACA,QACA,QACA,aACA,kBACA,oBACA,kBACA,UACA,oBACA,oBACA,iBACA,iBACA,aACA,aACA,cACA,gBACA,UACA,WACA,OACA,gBACA,cACA,gBACA,eACA,eACA,cACA,WACA,YACA,eACA,OACA,eACA,UACA,WACA,UACA,QACA,WACA,YACA,eACA,aACA,UACA,UACA,kBACA,oBACA,oBACA,iBACA,mBACA,iBACA,kBACA,uBACA,kBACA,eACA,oBACA,gBACA,gBACA,mBACA,eACA,gBACA,cACA,oBACA,iBACA,oBACA,oBACA,iBACA,gBACA,gBACA,QACA,QACA,WACA,OACA,UACA,WACA,SACA,SACA,cACA,QACA,cACA,YACA,aACA,cACA,aACA,iBACA,oBACA,eACA,WACA,aACA,iBACA,aACA,WACA,WAEJ,EAAQ,qBAAuB,CAC3B,QACA,uBACA,QACA,SACA,OACA,UACA,WACA,QACA,OACA,OACA,aACA,YACA,gBACA,QACA,aACA,iBAEJ,EAAQ,iBAAmB,CACvB,EAAG,eACH,EAAG,WACH,GAAI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",
  "names": []
}
