parcelRequire=function(e){var r="function"==typeof parcelRequire&&parcelRequire,n="function"==typeof require&&require,i={};function u(e,u){if(e in i)return i[e];var t="function"==typeof parcelRequire&&parcelRequire;if(!u&&t)return t(e,!0);if(r)return r(e,!0);if(n&&"string"==typeof e)return n(e);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}return u.register=function(e,r){i[e]=r},i=e(u),u.modules=i,u}(function (require) {var Nc={};const l=Symbol();const O=()=>{};const ma=void 0===Nc?(r,$="assertion failed")=>{if("function"==typeof r&&!r()||!r)throw new Error("function"==typeof $?$():$)}:O;let M,P;const Va=Object.getPrototypeOf({}),j=(e,t)=>{let $;return e===t||(null==e?e==t:"function"==typeof e.equiv?e.equiv(t):null==t?e==t:"function"==typeof t.equiv?t.equiv(e):"string"!=typeof e&&"string"!=typeof t&&(null!=($=Object.getPrototypeOf(e))&&$!==Va||null!=($=Object.getPrototypeOf(t))&&$!==Va?"function"!=typeof e&&void 0!==e.length&&"function"!=typeof t&&void 0!==t.length?T(e,t):e instanceof Set&&t instanceof Set?U(e,t):e instanceof Map&&t instanceof Map?aa(e,t):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.toString()===t.toString():e!=e&&t!=t:ba(e,t)))};const T=(e,t,$=j)=>{let o=e.length;if(o===t.length)for(;--o>=0&&$(e[o],t[o]););return o<0};const U=(e,t,$=j)=>e.size===t.size&&$([...e.keys()].sort(),[...t.keys()].sort());const aa=(e,t,$=j)=>e.size===t.size&&$([...e].sort(),[...t].sort());const ba=(e,t,$=j)=>{if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let o in e)if(!t.hasOwnProperty(o)||!$(e[o],t[o]))return!1;return!0};let Fb=[],Mb=[];const Ob=r=>M&&M.length>=r?M:M=new Int32Array(r),Wb=r=>P&&P.length>=r?P:P=new Int32Array(r),ja=(r,$,e,a,t)=>{const c=$.length,l=r.linear;if(r.distance=c,0!==t){for(let r=0,e=0;r<c;r++,e+=3)l[e]=a,l[e+1]=r,l[e+2]=$[r];if(3===t){const a=r[e];for(let r=0;r<c;r++)a[r]=$[r]}}return r},jd=(r,$,e=3,a=j)=>{const t={distance:0,adds:{},dels:{},const:{},linear:[]};if(r===$||null==r&&null==$)return t;if(null==r||0===r.length)return ja(t,$,"adds",1,e);if(null==$||0===$.length)return ja(t,r,"dels",-1,e);const c=r.length>=$.length;let l,n,h,s;c?(l=$,n=r):(l=r,n=$),h=l.length,s=n.length;const d=h+1,o=s-h,i=o+d,z=h+s+3,J=Wb(z).fill(-1,0,z),f=Ob(z).fill(-1,0,z),v=Fb,u=Mb;v.length=0,u.length=0;const P=(r,$,e)=>{const t=r+d;let c,o;$>e?(c=J[t-1],o=$):(c=J[t+1],o=e);let i=o-r;for(;i<h&&o<s&&a(l[i],n[o]);)i++,o++;return J[t]=u.length/3,u.push(i,o,c),o};let g,p,_=-1;do{for(p=(g=-++_)+d;g<o;g++,p++)f[p]=P(g,f[p-1]+1,f[p+1]);for(p=(g=o+_)+d;g>o;g--,p--)f[p]=P(g,f[p-1]+1,f[p+1]);f[i]=P(o,f[i-1]+1,f[i+1])}while(f[i]!==s);if(t.distance=o+2*_,0!==e){for(_=3*J[i];_>=0;)v.push(_),_=3*u[_+2];3===e?Ya(v,u,t,l,n,c):Za(v,u,t,l,n,c,1===e)}return t};const Ya=(r,$,e,a,t,c)=>{const l=e.linear,n=e.const;let h,s,d,o,i=r.length,z=0,J=0;for(c?(h=e.dels,s=e.adds,d=-1,o=1):(h=e.adds,s=e.dels,d=1,o=-1);--i>=0;){const e=r[i],c=$[e],f=$[e+1],v=f-c;for(;z<c||J<f;){const r=J-z;v>r?(l.push(d,J,h[J]=t[J]),J++):v<r?(l.push(o,z,s[z]=a[z]),z++):(l.push(0,z,n[z]=a[z]),z++,J++)}}},Za=(r,$,e,a,t,c,l)=>{const n=e.linear,h=c?-1:1,s=c?1:-1;let d=r.length,o=0,i=0;for(;--d>=0;){const e=r[d],c=$[e],z=$[e+1],J=z-c;for(;o<c||i<z;){const r=i-o;J>r?(n.push(h,i,t[i]),i++):J<r?(n.push(s,o,a[o]),o++):(l&&n.push(0,o,a[o]),o++,i++)}}};const fb=(t,e,$=3,i=j)=>t===e?{distance:0}:0===$?gb(t,e,i):tb(t,e,i);const gb=(t,e,$)=>{t||(t={}),e||(e={});let i=0;for(let r in t){const f=e[r];(void 0===f||!$(t[r],f))&&i++}for(let r in e)!(r in t)&&i++;return{distance:i}},tb=(t,e,$)=>{t||(t={}),e||(e={});let i=0;const r=[],f=[],s=[];for(let n in t){const r=e[n];void 0===r?(f.push(n),i++):$(t[n],r)||(s.push(n,r),i++)}for(let n in e)n in t||(r.push(n),i++);return{distance:i,adds:r,dels:f,edits:s}};const x=Array.isArray,Jb=Math.max,va=Object.getPrototypeOf({}),xa=(()=>{const e=new Array(2048);for(let t=2,r=e.length;t<r;t++)e[t]=t-2;return e})(),Pb=e=>{if(e<=xa.length)return xa.slice(0,e);const t=new Array(e);for(;--e>=2;)t[e]=e-2;return t},Na=(e,t,r,$,i,o=0)=>{const n=i[1];if(n.__skip)return;if(!1===n.__diff)return q($),void t.replaceChild(e,r,o,i);const f=$[1];if(f&&f.__skip)return void t.replaceChild(e,r,o,i,!1);let s=n.__impl;if(s&&s!==t)return s.diffTree(e,s,r,$,i,o);const a=jd($,i,1,m);if(0===a.distance)return;const h=a.linear,T=t.getChild(r,o);let l,p,v,K;if(0!==h[0]||$[1].key!==n.key)return q($),void t.replaceChild(e,r,o,i);if((K=$.__release)&&K!==i.__release&&q($),0!==h[3]&&(yc(t,T,$[1],i[1]),2===a.distance))return;const Q=h.length,d=$.length-1,u=Xc(h),c=Pb(d+1);for(l=2,p=6;p<Q;l++,p+=3)(v=h[p])&&(-1===v?Yb(e,t,T,$,i,h,p,u,c,d):$b(e,t,T,h,p,u,c,d));(K=i.__init)&&K!=$.__init&&K.apply(i,[T,...i.__args])};const Yb=(e,t,r,$,i,o,n,f,s,a)=>{const h=o[n+2];if(x(h)){let T=h[1].key;if(void 0!==T&&void 0!==f[T][2]){const o=f[T];T=o[0],Na(e,t,r,$[T],i[o[2]],s[T])}else{const e=o[n+1];q(h),t.removeChild(r,s[e]),bc(s,a,e)}}else"string"==typeof h&&t.setContent(r,"")},$b=(e,t,r,$,i,o,n,f)=>{const s=$[i+2];if("string"==typeof s)t.setContent(r,s);else if(x(s)){const a=s[1].key;if(void 0===a||void 0===o[a][0]){const o=$[i+1];t.createTree(e,r,s,n[o]),kc(n,f,o)}}},bc=(e,t,r)=>{for(;t>r;t--)e[t]=Jb(e[t]-1,0)},kc=(e,t,r)=>{for(;t>=r;t--)e[t]++},yc=(e,t,r,$)=>{const i=fb(r,$,3,j);e.removeAttribs(t,i.dels,r);let o,n,f,s=l;for(o=(f=i.edits).length;(o-=2)>=0;)0===(n=f[o]).indexOf("on")&&e.removeAttribs(t,[n],r),"value"!==n?e.setAttrib(t,n,f[o+1],$):s=f[o+1];for(o=(f=i.adds).length;--o>=0;)"value"!==(n=f[o])?e.setAttrib(t,n,$[n],$):s=$[n];s!==l&&e.setAttrib(t,"value",s,$)};const q=e=>{if(x(e)){let t;if((t=e[1])&&!1===t.__release)return;for(e.__release&&(e.__release.apply(e.__this,e.__args),delete e.__release),t=e.length;--t>=2;)q(e[t])}};const Xc=e=>{let t,r,$;const i={};for(let o=e.length;(o-=3)>=0;)r=e[o+2],x(r)&&void 0!==(t=r[1].key)&&(!($=i[t])&&(i[t]=$=[,,]),$[e[o]+1]=e[o+1]);return i},m=(e,t)=>{let r;return e===t||(null==e?e==t:"function"==typeof e.equiv?e.equiv(t):null==t?e==t:"function"==typeof t.equiv?t.equiv(e):"string"!=typeof e&&"string"!=typeof t&&(null!=(r=Object.getPrototypeOf(e))&&r!==va||null!=(r=Object.getPrototypeOf(t))&&r!==va?"function"!=typeof e&&void 0!==e.length&&"function"!=typeof t&&void 0!==t.length?T(e,t,m):e instanceof Set&&t instanceof Set?U(e,t,m):e instanceof Map&&t instanceof Map?aa(e,t,m):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.toString()===t.toString():e!=e&&t!=t:!(!1===e.__diff||!1===t.__diff)&&ba(e,t,m)))};const pd=o=>"function"==typeof o;const s=(n,t)=>null!=n&&"function"==typeof n[t];const t=Array.isArray;const _a=t=>null!=t&&"function"!=typeof t&&void 0!==t.length;const bb=t=>"string"==typeof t;const cb=e=>null!=e&&"function"==typeof e[Symbol.iterator];const eb=$=>$ instanceof Map;const V=t=>null!=t&&"string"!=typeof t&&"function"==typeof t[Symbol.iterator];const W=Object.getPrototypeOf,ib=$=>{let r;return null!=$&&"object"==typeof $&&(null===(r=W($))||null===W(r))};const kb=t=>t instanceof Set;const lb="http://www.w3.org/2000/svg";const nb={"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&apos;"};const qb=/^([^\s\.#]+)(?:#([^\s\.#]+))?(?:\.([^\s#]+))?$/;const zd=new RegExp(`[${Object.keys(nb).join("")}]`,"g");const sb={button:1,option:1,text:1,textarea:1};const X=e=>e.split(" ").reduce((e,t)=>(e[t]=!0,e),{}),ub=X("animate animateColor animateMotion animateTransform circle clipPath color-profile defs desc discard ellipse feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feDropShadow feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence filter font foreignObject g image line linearGradient marker mask metadata mpath path pattern polygon polyline radialGradient rect set stop style svg switch symbol text textPath title tref tspan use view");const yd=X("area base br circle col command ellipse embed hr img input keygen line link meta param path polygon polyline rect source stop track use wbr ?xml");const xb=t=>{let $,r="";for(let e in t)$=t[e],pd($)&&($=$(t)),null!=$&&(r+=`${e}:${$};`);return r};const Cb=(e,t)=>{if(null==e||!t||!t.length)return e;const r=Object.assign({},e);for(let n of t){const e=r[n];s(e,"deref")&&(r[n]=e.deref())}return r};const Z=(r,o=r=>void 0!==r?": "+r:"")=>class extends Error{constructor(s){super(r(s)+o(s))}};const Hb=Z(()=>"illegal argument(s)");const _=r=>{throw new Hb(r)};const Lb=Z(()=>"illegal arity");const A=r=>{throw new Lb(r)};const o=t,ca=V,fa=(e,t)=>t.__init&&t.__init.apply(t.__this,[e,...t.__args]),p=(e,t,r,s,$,n=!0)=>{if(o(s)){const o=s[0];if("function"==typeof o)return p(e,t,r,o.apply(null,[e.ctx,...s.slice(1)]),$);const a=s[1];if(a.__impl)return a.__impl.createTree(e,r,s,$,n);const i=t.createElement(r,o,a,$);if(s.length>2){const r=s.length;for(let $=2;$<r;$++)p(e,t,i,s[$],void 0,n)}return n&&fa(i,s),i}if(ca(s)){const o=[];for(let a of s)o.push(p(e,t,r,a,$,n));return o}return null==s?r:t.createTextElement(r,s)};const w=(e,t,r,s,$=0)=>{if(o(s)){const n=t.getChild(r,$);"function"==typeof s[0]&&w(e,t,r,s[0].apply(null,[e.ctx,...s.slice(1)]),$);const o=s[1];if(o.__impl)return o.__impl.hydrateTree(e,r,s,$);fa(n,s);for(let e in o)0===e.indexOf("on")&&t.setAttrib(n,e,o[e]);for(let r=s.length,$=2;$<r;$++)w(e,t,n,s[$],$-2)}else if(ca(s))for(let n of s)w(e,t,r,n,$),$++};const _b=(e,t,r,s)=>{const $=ub[t]?document.createElementNS(lb,t):document.createElement(t);return r&&ic($,r),na(e,$,s)};const ac=(e,t,r)=>na(e,document.createTextNode(t),r);const na=(e,t,r)=>e?void 0===r?e.appendChild(t):e.insertBefore(t,e.children[r]):t;const cc=(e,t)=>e.children[t];const gc=(e,t,r,s,$,n=!0)=>(t.removeChild(r,s),t.createTree(e,r,$,s,n));const hc=(e,t)=>e.textContent=t;const ic=(e,t)=>{for(let r in t)oa(e,r,t[r],t);return e};const oa=(e,t,r,s)=>{if(t.startsWith("__"))return;const $=0===t.indexOf("on");if($||"function"!=typeof r||(r=r(s)),void 0!==r&&!1!==r)switch(t){case"style":qc(e,r);break;case"value":lc(e,r);break;case"accesskey":e.accessKey=r;break;case"contenteditable":e.contentEditable=r;break;case"tabindex":e.tabIndex=r;break;case"align":case"autocapitalize":case"checked":case"dir":case"draggable":case"hidden":case"id":case"lang":case"namespaceURI":case"scrollTop":case"scrollLeft":case"title":e[t]=r;break;default:$?tc(e,t.substr(2),r):e.setAttribute(t,!0===r?"":r);}else null!=e[t]?e[t]=null:e.removeAttribute(t);return e};const lc=(e,t)=>{let r;switch(e.type){case"text":case"textarea":case"password":case"search":case"number":case"email":case"url":case"tel":case"date":case"datetime-local":case"time":case"week":case"month":if(void 0!==(r=e.value)&&"string"==typeof t){const s=t.length-(r.length-(e.selectionStart||0));e.value=t,e.selectionStart=e.selectionEnd=s;break}default:e.value=t;}};const mc=(e,t,r)=>{for(let s=t.length;--s>=0;){const $=t[s];0===$.indexOf("on")?wc(e,$.substr(2),r[$]):e.hasAttribute($)?e.removeAttribute($):e[$]=null}};const qc=(e,t)=>(e.setAttribute("style",xb(t)),e);const tc=(e,t,r)=>o(r)?e.addEventListener(t,...r):e.addEventListener(t,r);const wc=(e,t,r)=>o(r)?e.removeEventListener(t,...r):e.removeEventListener(t,r);const xc=(e,t)=>{const r=e.children[t];void 0!==r&&e.removeChild(r)};const u=t,zc=V,Dc=ib,Fc=(e,r)=>{let $,i,t,n,a,o=e[0],l=Dc(e[1]);return"string"==typeof o&&($=qb.exec(o))||_(`${o} is not a valid tag name`),o!==(i=$[1])||!l||r&&!e[1].key?(a=l?Object.assign({},e[1]):{},t=$[2],n=$[3],t&&(a.id=t),n&&(n=n.replace(/\./g," "),a.class?a.class+=" "+n:a.class=n),a.__skip&&e.length<3?[i,a]:[i,a,...e.slice(l?2:1)]):e};const Hc=(e,r)=>d(r,e,e.ctx,[0],!1!==e.keys,!1!==e.span);const d=(e,r,$,i,t,n)=>{if(null!=e){if(u(e)){if(0===e.length)return;let a,o,l=e[1];if(l&&(o=l.__impl)&&(o=o.normalizeTree))return o(r,e);const s=e[0];if("function"==typeof s)return d(s.apply(null,[$,...e.slice(1)]),r,$,i,t,n);if("function"==typeof s.render){const o=[$,...e.slice(1)];return a=d(s.render.apply(s,o),r,$,i,t,n),u(a)&&(a.__this=s,a.__init=s.init,a.__release=s.release,a.__args=o),a}if(!1===(l=(a=Fc(e,t))[1]).__normalize)return a;if(t&&void 0===l.key&&(l.key=i.join("-")),a.length>2){const e=a[0],o=[e,l];n=n&&!sb[e];for(let l=2,s=2,x=0,c=a.length;l<c;l++){let e=a[l];if(null!=e){const a=u(e);if(a&&u(e[0])||!a&&zc(e))for(let l of e)void 0!==(l=d(l,r,$,i.concat(x),t,n))&&(o[s++]=l),x++;else void 0!==(e=d(e,r,$,i.concat(x),t,n))&&(o[s++]=e),x++}}return o}return a}return"function"==typeof e?d(e($),r,$,i,t,n):"function"==typeof e.toHiccup?d(e.toHiccup(r.ctx),r,$,i,t,n):"function"==typeof e.deref?d(e.deref(),r,$,i,t,n):n?["span",t?{key:i.join("-")}:{},e.toString()]:e.toString()}};const Oc={createTree(e,t,r,$,i){return p(e,this,t,r,$,i)},hydrateTree(e,t,r,$){return w(e,this,t,r,$)},diffTree(e,t,r,$,i){Na(e,this,t,r,$,i)},normalizeTree:Hc,getElementById:e=>document.getElementById(e),getChild:cc,createElement:_b,createTextElement:ac,replaceChild(e,t,r,$,i){gc(e,this,t,r,$,i)},removeChild:xc,setContent:hc,removeAttribs:mc,setAttrib:oa};const Qc=(e,o)=>bb(e)?o.getElementById(e):e;const Rc=(e,r={},t=Oc)=>{const a=Object.assign({root:"app"},r);let $=[],n=!0;const o=Qc(a.root,t),i=()=>{if(n){a.ctx=Cb(r.ctx,a.autoDerefKeys);const f=t.normalizeTree(a,e);null!=f&&(a.hydrate?(t.hydrateTree(a,o,f),a.hydrate=!1):t.diffTree(a,o,$,f),$=f),n&&requestAnimationFrame(i)}};return requestAnimationFrame(i),()=>n=!1};var Sc=function(){return Sc=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Sc.apply(this,arguments)};function Wc(t,e,r,o){var n,a=arguments.length,$=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)$=Reflect.decorate(t,e,r,o);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&($=(a<3?n($):a>3?n(e,r,$):n(e,r))||$);return a>3&&$&&Object.defineProperty(e,r,$),$}function za(t){return this instanceof za?(this.v=t,this):new za(t)}const Yc=(e,o={})=>{const t=Reflect.ownKeys(e),r=Reflect.ownKeys(o),n=Symbol("isa");function p(o){for(let r of t){const t=Object.getOwnPropertyDescriptor(o.prototype,r);!t||t.configurable?Object.defineProperty(o.prototype,r,{value:e[r],writable:!0}):console.log(`not patching: ${o.name}.${r.toString()}`)}return Object.defineProperty(o.prototype,n,{value:!0}),o}for(let i of r)Object.defineProperty(p,i,{value:o[i],enumerable:o.propertyIsEnumerable(i)});return Object.defineProperty(p,Symbol.hasInstance,{value:e=>!!e[n]}),p};const $c=Yc({addWatch(t,s){return this._watches=this._watches||{},!this._watches[t]&&(this._watches[t]=s,!0)},removeWatch(t){if(this._watches)return!!this._watches[t]&&(delete this._watches[t],!0)},notifyWatches(t,s){if(!this._watches)return;const e=this._watches;for(let i in e)e[i](i,t,s)}});const _c=(r,o=r=>void 0!==r?": "+r:"")=>class extends Error{constructor(e){super(r(e)+o(e))}};const cd=_c(()=>"illegal state");const ed=e=>{throw new cd(e)};const Ba=Array.isArray;const ld=t=>"string"==typeof t;const od=r=>r&&(r instanceof Float32Array||r instanceof Float64Array||r instanceof Uint32Array||r instanceof Int32Array||r instanceof Uint8Array||r instanceof Int8Array||r instanceof Uint16Array||r instanceof Int16Array||r instanceof Uint8ClampedArray);const Ia=t=>Ba(t)?t:ld(t)?t.length>0?t.split("."):[]:null!=t?[t]:[];function Xa(e){const t=Ia(e),[r,l,n,$]=t;switch(t.length){case 0:return e=>e;case 1:return e=>null!=e?e[r]:void 0;case 2:return e=>null!=e&&null!=(e=e[r])?e[l]:void 0;case 3:return e=>null!=e&&null!=(e=e[r])&&null!=(e=e[l])?e[n]:void 0;case 4:return e=>null!=e&&null!=(e=e[r])&&null!=(e=e[l])&&null!=(e=e[n])?e[$]:void 0;default:return e=>{const r=t.length-1;let l=e;for(let n=0;null!=l&&n<=r;n++)l=l[t[n]];return l};}}function La($){const e=Ia($),[t,r,o,p]=e;switch(e.length){case 0:return($,e)=>e;case 1:return($,e)=>($=a($),$[t]=e,$);case 2:return($,e)=>{let o;return($=a($))[t]=o=a($[t]),o[r]=e,$};case 3:return($,e)=>{let p,c;return($=a($))[t]=p=a($[t]),p[r]=c=a(p[r]),c[o]=e,$};case 4:return($,e)=>{let c,C,G;return($=a($))[t]=c=a($[t]),c[r]=C=a(c[r]),C[o]=G=a(C[o]),G[p]=e,$};default:let $;for(let t=e.length;--t>=0;)$=$a(e[t],$);return $;}}const a=$=>Ba($)||od($)?$.slice():Object.assign({},$);const $a=($,e)=>(t,r)=>(t=a(t),t[$]=e?e(t[$],r):r,t);const Qa=(e,$,t,...r)=>ab(e,$,t,...r);function ab(e,$,t,...r){return La($)(e,t.apply(null,(r.unshift(Xa($)(e)),r)))}const Sa=(e,$,t)=>La($)(e,t);let Ta=class{constructor(e,t){t&&!t(e)&&ed("initial state value did not validate"),this._value=e,this.valid=t}get value(){return this._value}set value(e){this.reset(e)}deref(){return this._value}equiv(e){return this===e}reset(e){const t=this._value;return this.valid&&!this.valid(e)?t:(this._value=e,this.notifyWatches(t,e),e)}resetIn(e,t){return this.reset(Sa(this._value,e,t))}resetInUnsafe(e,t){return this.reset(Sa(this._value,e,t))}swap(e,...t){return this.reset(e.apply(null,[this._value,...t]))}swapIn(e,t,...r){return this.reset(Qa(this._value,e,t,...r))}swapInUnsafe(e,t,...r){return this.reset(Qa(this._value,e,t,...r))}addWatch(e,t){}removeWatch(e){}notifyWatches(e,t){}release(){return delete this._watches,delete this._value,!0}};Ta=Wc([$c],Ta);function*db($,r){const e=n($)(k()),t=e[1],s=e[2];for(let i of r){const $=s([],i);if(h($))return void(yield*v(t($.deref())));$.length&&(yield*$)}yield*v(t([]))}function*I($,r){const e=n($)([O,O,($,r)=>r])[2];for(let t of r){let $=e(l,t);if(h($))return void(($=v($.deref()))!==l&&(yield $));$!==l&&(yield $)}}const n=r=>s(r,"xform")?r.xform():r;class i{constructor(e){this.value=e}deref(){return this.value}}const hb=e=>new i(e);const h=e=>e instanceof i;const jb=e=>e instanceof i?e:new i(e);const v=e=>e instanceof i?e.deref():e;function k($){return $?[...$]:Y(()=>[],($,r)=>($.push(r),$))}const mb=e=>2===e.length?[void 0,e[1]]:3===e.length?[e[1],e[2]]:A(e.length);function K(...e){const r=e[0],$=r[0],u=r[1],t=r[2],c=null==(e=mb(e))[0]?$():e[0],o=e[1];return v(u(s(o,"$reduce")?o.$reduce(t,c):_a(o)?ob(t,c,o):pb(t,c,o)))}const ob=(e,r,$)=>{for(let u=0,t=$.length;u<t;u++)if(r=e(r,$[u]),h(r)){r=r.deref();break}return r},pb=(e,r,$)=>{for(let u of $)if(r=e(r,u),h(r)){r=r.deref();break}return r},Y=(e,r)=>[e,e=>e,r];const Wa=($,r,e=I)=>{const t=r.length-1;return cb(r[t])?r.length>1?e($.apply(null,r.slice(0,t)),r[t]):e($(),r[0]):void 0};function g(...e){let r,$;switch(e.length){case 4:$=e[3],r=e[2];break;case 3:$=e[2];break;case 2:return b(r=>g(e[0],e[1],r));default:A(e.length);}return K(n(e[0])(e[1]),r,$)}function b(t,r){return r?I(b(t),r):r=>{const $=r[2];return B(r,(r,e)=>$(r,t(e)))}}const B=($,o)=>[$[0],$[1],o];const vb=e=>{const{1:r,2:$}=n(e)(k());let t=!1;return e=>{if(!t){let p=$([],e);return(t=h(p))&&(p=r(p.deref())),1===p.length?p[0]:p.length>0?p:void 0}}};function C($){return $?K(C(),$):Y(()=>new Set,($,e)=>$.add(e))}function da(...e){let[r,$,t,o,u,c,p,n,s,a]=e;switch(e.length){case 0:A(0);case 1:return r;case 2:return(...e)=>r($(...e));case 3:return(...e)=>r($(t(...e)));case 4:return(...e)=>r($(t(o(...e))));case 5:return(...e)=>r($(t(o(u(...e)))));case 6:return(...e)=>r($(t(o(u(c(...e))))));case 7:return(...e)=>r($(t(o(u(c(p(...e)))))));case 8:return(...e)=>r($(t(o(u(c(p(n(...e))))))));case 9:return(...e)=>r($(t(o(u(c(p(n(s(...e)))))))));case 10:default:const G=(...e)=>r($(t(o(u(c(p(n(s(a(...e))))))))));return 10===e.length?G:da(G,...e.slice(10));}}function yb(...e){const[r,t,n,u,s,a,c,$]=e;switch(e.length){case 1:return e=>[r(e)];case 2:return e=>[r(e),t(e)];case 3:return e=>[r(e),t(e),n(e)];case 4:return e=>[r(e),t(e),n(e),u(e)];case 5:return e=>[r(e),t(e),n(e),u(e),s(e)];case 6:return e=>[r(e),t(e),n(e),u(e),s(e),a(e)];case 7:return e=>[r(e),t(e),n(e),u(e),s(e),a(e),c(e)];case 8:return e=>[r(e),t(e),n(e),u(e),s(e),a(e),c(e),$(e)];default:return r=>{let t=new Array(e.length);for(let n=e.length;--n>=0;)t[n]=e[n](r);return t};}}function zb(e,t,r){return new Ab(e,t,r)}class Ab{constructor(e,t,r){void 0===e?(e=0,t=1/0):void 0===t&&(t=e,e=0),r=void 0===r?e<t?1:-1:r,this.from=e,this.to=t,this.step=r}*[Symbol.iterator](){const e=this.step,t=this.to;let r=this.from;if(e>0)for(;r<t;)yield r,r+=e;else if(e<0)for(;r>t;)yield r,r+=e}$reduce(e,t){const r=this.step;if(r>0)for(let o=this.from,$=this.to;o<$&&!h(t);o+=r)t=e(t,o);else for(let o=this.from,$=this.to;o>$&&!h(t);o+=r)t=e(t,o);return t}}function*Bb(...o){const t=o.map(o=>o[Symbol.iterator]());for(;;){const o=[];for(let e of t){let t=e.next();if(t.done)return;o.push(t.value)}yield o}}function ea(r,$){return $?I(ea(r),$):$=>{const e=$[2];return B($,($,t)=>r(t)?e($,t):$)}}const Db=e=>((null==e||!e[Symbol.iterator])&&_(`value is not iterable: ${e}`),e);const Eb=r=>t(r)?r:[...Db(r)];const $=1/4294967295;class Gb{float(t=1){return this.int()*$*t}norm(t=1){return 2*(this.int()*$-.5)*t}minmax(t,$){return this.float()*($-t)+t}gaussian(t=10,$=-.5,r=1){let a=0,n=t;for(;n-->0;)a+=this.float(r);return a/t+$}}const r=Math.random;class Ib extends Gb{int(){return 4294967295*r()>>>0}float($=1){return r()*$}norm($=1){return 2*(r()-.5)*$}}const ga=new Ib;const Kb=(e,t,r=ga)=>{const $=e.length;ma($>0,"no choices given");const o=e.map(t?(e,r)=>[e,t[r]]:e=>[e,1]).sort((e,t)=>t[1]-e[1]),m=o.reduce((e,t)=>e+t[1],0);return ma(m>0,"no choices given"),()=>{const e=r.float(m);let t=m;for(let r=0;r<$;r++)if((t-=o[r][1])<=e)return o[r][0]}};function ha(...e){return e=e.map(n),da.apply(null,e)}function ia(e,r){return r?db(ia(e),r):r=>{const $=r[2];let g=e;return B(r,(e,r)=>--g>0?$(e,r):0===g?jb($(e,r)):hb(e))}}function Nb(...$){return b(yb.apply(null,$.map(vb)))}function D(...$){const e=Wa(D,$);if(e)return e;const[r,p]=$,t=Object.keys(r);return ha(Nb.apply(null,t.map($=>r[$])),ka(t,p))}function ka(...r){const $=r.length>2&&Wa(ka,r);if($)return $;let e=r[0];if(t(e)&&(e=e.reduce((r,$,e)=>(r[$]=e,r),{})),r[1]){const $=Object.keys(e);return b(t=>g(ha(b(r=>[r,t[e[r]]]),ea(r=>void 0!==r[1])),r[1],$))}return b(Qb(e))}const Qb=e=>{const r=Object.keys(e),[t,n,o]=r,[s,c,$]=r.map(r=>e[r]);switch(r.length){case 3:return e=>{const r={};let a;return void 0!==(a=e[$])&&(r[o]=a),void 0!==(a=e[c])&&(r[n]=a),void 0!==(a=e[s])&&(r[t]=a),r};case 2:return e=>{const r={};let o;return void 0!==(o=e[c])&&(r[n]=o),void 0!==(o=e[s])&&(r[t]=o),r};case 1:return e=>{const r={};let n=e[s];return void 0!==n&&(r[t]=n),r};default:return t=>{let n,o;const s={};for(let c=r.length-1;c>=0;c--)n=r[c],void 0!==(o=t[e[n]])&&(s[n]=o);return s};}};function*Rb(e,$=1/0){for(;$-->0;)yield e()}const Sb=($,e,r=ga)=>Rb(e?Kb(Eb($),e,r):()=>$[0|r.float($.length)]);function*Tb(e,o=1/0){for(;o-->0;)yield e}function Ub($,e){if(eb($))for(let t of e)$.set(t[0],t[1]);else for(let t of e)$.add(t);return $}const Vb=(e,$)=>s(e,"empty")?e.empty():new(e[Symbol.species]||$);const la=e=>kb(e)?e:new Set(e);const Xb=(e,$,r)=>r?K(e(),r):[()=>null,e=>e||new Set,(e,r)=>e?$(e,la(r)):la(r)];const E=(e,t,r)=>{if(r=r||Vb(e,Set),e===t)return Ub(r,e);if(t.size<e.size)return E(t,e,r);for(let $ of t)e.has($)&&r.add($);return r};function Zb(e){return Xb(Zb,E,e)}function F($){return"object"==typeof $&&"string"==typeof $.name}function G($){return"object"==typeof $&&"number"==typeof $.step&&"number"==typeof $.alt}const pa=[0,2,4,-1,1,3,5],qa=pa.map($=>Math.floor(7*$/12));function ra($){const{step:t,alt:e,oct:r,dir:o=1}=$,p=pa[t]+7*e;return void 0===r?[o*p]:[o*p,o*(r-qa[t]-4*e)]}const dc=[3,0,4,1,5,2,6];function ec($){const[t,e,r]=$,o=dc[fc(t)],p=Math.floor((t+1)/7);return void 0===e?{step:o,alt:p,dir:r}:{step:o,alt:p,oct:e+4*p+qa[o],dir:r}}function fc($){const t=($+1)%7;return t<0?7+t:t}const sa={empty:!0,name:"",pc:"",acc:""},ta={},ua=($,t)=>Array(t+1).join($),jc=$=>"CDEFGAB".charAt($),H=$=>$<0?ua("b",-$):ua("#",$),wa=$=>"b"===$[0]?-$.length:$.length;function c($){return"string"==typeof $?ta[$]||(ta[$]=rc($)):G($)?c(sc($)):F($)?c($.name):sa}const nc=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function oc($){const t=nc.exec($);return[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]}function pc($){return c(ec($))}const ya=[0,2,4,5,7,9,11];function rc($){const t=oc($);if(""===t[0]||""!==t[3])return sa;const e=t[0],r=t[1],o=t[2],p=(e.charCodeAt(0)+3)%7,u=wa(r),a=o.length?+o:void 0,n=ra({step:p,alt:u,oct:a}),c=e+r+o,z=e+r,V=(ya[p]+u+120)%12,s=void 0===a?-100:a,i=ya[p]+u+12*(s+1),l=i>=0&&i<=127?i:null;return{empty:!1,acc:r,alt:u,chroma:V,coord:n,freq:void 0===a?null:440*Math.pow(2,(i-69)/12),height:i,letter:e,midi:l,name:c,oct:a,pc:z,step:p}}function sc($){const{step:t,alt:e,oct:r}=$,o=jc(t);if(!o)return"";const p=o+H(e);return r||0===r?p+r:p}const J={empty:!0,name:"",acc:""},uc=new RegExp("^([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})|(AA|A|P|M|m|d|dd)([-+]?\\d+)$");function vc($){const t=uc.exec(`${$}`);return null===t?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}const Aa={};function y($){return"string"==typeof $?Aa[$]||(Aa[$]=Ac($)):G($)?y(Cc($)):F($)?y($.name):J}const Ca=[0,2,4,5,7,9,11],Da="PMMPPMM";function Ac($){const t=vc($);if(""===t[0])return J;const e=+t[0],r=t[1],o=(Math.abs(e)-1)%7,p=Da[o];if("M"===p&&"P"===r)return J;const u="M"===p?"majorable":"perfectable",a=""+e+r,n=e<0?-1:1,c=8===e||-8===e?e:n*(o+1),z=Bc(u,r),V=Math.floor((Math.abs(e)-1)/7);return{empty:!1,name:a,num:e,q:r,step:o,alt:z,dir:n,type:u,simple:c,semitones:n*(Ca[o]+z+12*V),chroma:(n*(Ca[o]+z)%12+12)%12,coord:ra({step:o,alt:z,oct:V,dir:n}),oct:V}}function Bc($,t){return"M"===t&&"majorable"===$||"P"===t&&"perfectable"===$?0:"m"===t&&"majorable"===$?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*("perfectable"===$?t.length:t.length+1):0}function Cc($){const{step:t,alt:e,oct:r=0,dir:o}=$;return o?(o<0?"-":"")+(t+1+7*r)+Ec("M"===Da[t]?"majorable":"perfectable",e):""}const Ea=($,t)=>Array(Math.abs(t)+1).join($);function Ec($,t){return 0===t?"majorable"===$?"M":"P":-1===t&&"majorable"===$?"m":t>0?Ea("A",t):Ea("d","perfectable"===$?t:t+1)}function Fa($,t){const e=c($),r=y(t);if(e.empty||r.empty)return"";const o=e.coord,p=r.coord;return pc(1===o.length?[o[0]+p[0]]:[o[0]+p[0],o[1]+p[1]]).name}function Gc($){return+$>=0&&+$<=127}function Ga($){if(Gc($))return+$;const o=c($);return o.empty?null:o.midi}const xd=Math.log(2),wd=Math.log(440);const Kc="C C# D D# E F F# G G# A A# B".split(" "),Lc="C Db D Eb E F Gb G Ab A Bb B".split(" ");function Mc($,o={}){$=Math.round($);const r=(!0===o.sharps?Kc:Lc)[$%12];return o.pitchClass?r:r+(Math.floor($/12)-1)}const Ha=$=>o=>{const r=c(o);if(r.empty)return"";const t=$?r.alt>0:r.alt<0,v=null===r.midi;return Mc(r.midi||r.chroma,{sharps:t,pitchClass:v})},qd=Ha(!0),ud=Ha(!1);const Ja={empty:!0,name:"",chordType:""},Ka={};function z($){return"string"==typeof $?Ka[$]||(Ka[$]=Zc($)):"number"==typeof $?z(N[$]||""):G($)?Tc($):F($)?z($.name):Ja}function Tc($){return z(H($.alt)+N[$.step])}const Uc=/^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;function Vc($){return Uc.exec($)||["","","",""]}const Ma="I II III IV V VI VII",N=Ma.split(" "),td=Ma.toLowerCase().split(" ");function Zc($){const[r,e,a,t]=Vc($);if(!a)return Ja;const o=a.toUpperCase(),R=N.indexOf(o),n=wa(e);return{empty:!1,name:r,roman:a,interval:y({step:R,alt:n,dir:1}).name,acc:e,chordType:t,alt:n,step:R,major:a===o,oct:0,dir:1}}const Pa=t=>(i,a="")=>i.map((i,r)=>"-"!==i?t[r]+a+i:"");function e(t,i,a,r){return o=>{const $=t.split(" "),e=$.map(t=>z(t).interval||""),n=e.map(t=>Fa(o,t)),m=Pa(n);return{tonic:o,grades:$,intervals:e,scale:n,chords:m(i.split(" ")),chordsHarmonicFunction:a.split(" "),chordScales:m(r.split(",")," ")}}}const ad=(t,i)=>{const a=c(t),r=c(i);return a.empty||r.empty?0:r.coord[0]-a.coord[0]},bd=e("I II III IV V VI VII","maj7 m7 m7 maj7 7 m7 m7b5","T SD T SD D T D","major,dorian,phrygian,lydian,mixolydian,minor,locrian"),sd=e("I II bIII IV V bVI bVII","m7 m7b5 maj7 m7 m7 maj7 7","T SD T SD D SD SD","minor,locrian,major,dorian,phrygian,lydian,mixolydian"),vd=e("I II bIII IV V bVI VII","mmaj7 m7b5 +maj7 m7 7 maj7 mo7","T SD T SD D SD D","harmonic minor,locrian 6,major augmented,lydian diminished,phrygian dominant,lydian #9,ultralocrian"),rd=e("I II bIII IV V VI VII","m6 m7 +maj7 7 7 m7b5 m7b5","T SD T SD D - -","melodic minor,dorian b2,lydian augmented,lydian dominant,mixolydian b6,locrian #2,altered");function fd(t){const i=bd(t),a=ad("C",t),r=Pa(i.scale);return{...i,type:"major",minorRelative:Fa(t,"-3m"),alteration:a,keySignature:H(a),secondaryDominants:r("- VI7 VII7 I7 II7 III7 -".split(" ")),secondaryDominantsMinorRelative:r("- IIIm7b5 IV#m7 Vm7 VIm7 VIIm7b5 -".split(" ")),substituteDominants:r("- bIII7 IV7 bV7 bVI7 bVII7 -".split(" ")),substituteDominantsMinorRelative:r("- IIIm7 Im7 IIbm7 VIm7 IVm7 -".split(" "))}}const gd=t=>{const e=Object.assign({element:"h1",attribs:{},subElement:"small",subAttribs:{}},t);return(t,s,r)=>[e.element,e.attribs,s,r?[e.subElement,e.subAttribs,r]:void 0]};const hd={anim:100,pad:1,margin:0,hlOn:{fill:"#E83015"},bgOn:{fill:"#CCCCCC"},bgOff:{fill:"#CCCCCC"},fgOn:{fill:"#E83015"},fgOff:{fill:"#fff"},floor:1},id=["filter",{id:"blur"},["feGaussianBlur",{in:"SourceGraphic",stdDeviation:".25"}]],Q=(t={})=>{const s=Object.assign(Object.assign({r:5},hd),t),{r:e,pad:i,margin:n,glyph:a,floor:c}=s,g=e*Math.pow(.5,2),l=e+i,r=l+n,$=2*l+2*n,o={width:$,height:$*c},b={transition:`all ${s.anim}ms ease-out`},O={cx:r,cy:r},f=Object.assign(Object.assign(Object.assign({},s.hlOn),O),{r:l}),j=Object.assign(Object.assign(Object.assign({},s.bgOn),O),{style:b,r:e}),T=Object.assign(Object.assign({},j),s.bgOff),p=Object.assign(Object.assign(Object.assign({},s.fgOn),O),{style:b,r:g}),G=Object.assign(Object.assign({},p),s.fgOff),Y=Object.assign(Object.assign({},s.fgOn),{x:"50%",y:"50%","text-anchor":"middle","alignment-baseline":"central",font:"bold sans-serif","font-size":.5*$,style:b}),h=Object.assign(Object.assign({},Y),s.fgOff);return(t,s,e,i)=>["svg",Object.assign(Object.assign({},o),s),id,["g",["circle",i?f:{}],["circle",e?j:T],a?["text",e?Y:h,a]:["circle",e?p:G]]]};const kd=gd({element:"h2",attribs:{class:"#000"}});const Ua=(t,s,e={})=>(i,n)=>["a",Object.assign(Object.assign({},e),{onclick:t,disabled:n}),s];const md=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],nd=g(b($=>fd($)),k(),md);let R=g(D({raw:b($=>$),tonicMidi:b($=>Ga($.tonic+"2")%12),musicKey:b($=>$.tonic),normalizedMidis:b($=>g(b($=>Ga($+"2")%12),C(),$.scale))}),k(),nd);console.log(R);const S=[...Tb(!1,12)],f=new Ta({keyState:S,highlights:new Set,size:[window.innerWidth,window.innerHeight]}),dd=$=>{f.resetIn(["keyState",$],!f.deref().keyState[$])},Ra=$=>{f.resetIn(["highlights"],$)};window.addEventListener("resize",()=>{f.resetIn(["size"],[window.innerWidth,window.innerHeight])});const Oa={class:"mr3 pv2 ph2 bg-black white f4"},Pc=()=>{const $=Ua(()=>void f.resetIn(["keyState"],S),"Clean",Oa),t=Ua(()=>void f.resetIn(["keyState"],[...ia(12,Sb([!0,!1],[.5,.5]))]),"Random",Oa);return()=>["div.mv4",[$],[t]]},L={anim:0,r:16,pad:2},Jc=Object.assign(Object.assign({},L),{glyph:"C"}),Ic=Object.assign(Object.assign({},L),{bgOn:{fill:"#000"},bgOff:{fill:"#000"},floor:2}),wb=$=>{const t=f.deref();return()=>["div.mb4",...t.keyState.map((B,e)=>[4===e?"div.dib.mr4":"div.dib",[0===e?Q(Object.assign(Object.assign({},Jc),$)):new Set([2,4,5,7,9,11]).has(e)?Q(Object.assign(Object.assign({},L),$)):Q(Object.assign(Object.assign({},Ic),$)),{class:"pointer mr0",onclick:()=>dd(e)},B,t.highlights.has(e)]])]},rb=($,t)=>{const B={width:t,height:t/35,rx:5,fill:"#e2e2e2"};return()=>["div",...$.map(($,e)=>["div.mv2.mr2",{onmouseover:()=>Ra($.normalizedMidis),onmouseout:()=>void Ra(new Set)},["div",$.musicKey,["small"," maj"]],["div.dib",["svg",{width:1.1*t,height:t/35},["g",["rect",B],$.common.size?["rect",Object.assign(Object.assign({},B),{width:$.similarity*t,fill:"#000"})]:[]]]]])]},Ad=Rc(()=>{const $=f.deref(),t=$.keyState,B=$.size,e=Math.min(36,.9*B[0]/13),i=Math.min(400,.9*B[0]);let r=g(b($=>t[$]?$:null),C(),zb(12)),d=g(b($=>E($.normalizedMidis,r)),k(),R),a=g(D({musicKey:b($=>$[0].musicKey),normalizedMidis:b($=>$[0].normalizedMidis),common:b($=>$[1]),similarity:b($=>$[1].size/r.size+(r.has($[0].tonicMidi)?.1:0))}),k(),Bb(R,d));return a=a.sort(($,t)=>t.similarity-$.similarity),["div",[kd,"OP-Z KEY FINDER"],Pc,["div",wb({r:e/2*(8/9),pad:e/2*(1/9)}),rb(a,i)]]});return{"B6dB":{}};});